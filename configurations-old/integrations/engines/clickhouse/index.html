<!DOCTYPE html>
<html class="no-js" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Complete documentation for Vulcan - complete stack for building data products" name="description"/>
<meta content="DataOS Vulcan Team" name="author"/>
<link href="https://tmdc-io.github.io/vulcan-docs/configurations-old/integrations/engines/clickhouse/" rel="canonical"/>
<link href="../../../../assets/images/vulcan.svg" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.0" name="generator"/>
<title>ClickHouse - DataOS Vulcan</title>
<link href="../../../../assets/stylesheets/main.618322db.min.css" rel="stylesheet"/>
<link href="../../../../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
<link href="../../../../assets/stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><script src="../../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
<body data-md-color-accent="blue-grey" data-md-color-primary="blue-grey" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#clickhouse">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="DataOS Vulcan" class="md-header__button md-logo" data-md-component="logo" href="../../../.." title="DataOS Vulcan">
<img alt="logo" src="../../../../assets/images/vulcan-white.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DataOS Vulcan
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              ClickHouse
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="blue-grey" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="blue-grey" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="blue-grey" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="blue-grey" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/tmdc-io/vulcan-book" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    tmdc-io/vulcan-book
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DataOS Vulcan" class="md-nav__button md-logo" data-md-component="logo" href="../../../.." title="DataOS Vulcan">
<img alt="logo" src="../../../../assets/images/vulcan-white.svg"/>
</a>
    DataOS Vulcan
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/tmdc-io/vulcan-book" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    tmdc-io/vulcan-book
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../..">
<span class="md-ellipsis">
    
  
    About
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Configurations
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Configurations
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../configurations/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Options
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Options
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../configurations/options/model_defaults/">
<span class="md-ellipsis">
    
  
    Model defaults
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../configurations/options/variables/">
<span class="md-ellipsis">
    
  
    Variables
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../configurations/options/execution_hooks/">
<span class="md-ellipsis">
    
  
    Execution Hooks
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../configurations/options/notifications/">
<span class="md-ellipsis">
    
  
    Notifications
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../configurations/options/linter/">
<span class="md-ellipsis">
    
  
    Linter
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Engines
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Engines
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../configurations/engines/postgres/postgres/">
<span class="md-ellipsis">
    
  
    Postgres
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../configurations/engines/snowflake/snowflake/">
<span class="md-ellipsis">
    
  
    Snowflake
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    CI/CD
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
            
  
    CI/CD
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../ci-cd/index.md">
<span class="md-ellipsis">
    
  
    None
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Components
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Components
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Model
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Model
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/model/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/model/properties/">
<span class="md-ellipsis">
    
  
    Properties
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Types
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_1_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Types
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/model/types/sql_models/">
<span class="md-ellipsis">
    
  
    SQL models
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/model/types/python_models/">
<span class="md-ellipsis">
    
  
    Python models
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/model/types/external_models/">
<span class="md-ellipsis">
    
  
    External models
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/model/types/managed_models/">
<span class="md-ellipsis">
    
  
    Managed models
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/model/model_kinds/">
<span class="md-ellipsis">
    
  
    Kinds
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/model/statements/">
<span class="md-ellipsis">
    
  
    Statements
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/tests/tests/">
<span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/audits/audits/">
<span class="md-ellipsis">
    
  
    Auditing
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/checks/checks/">
<span class="md-ellipsis">
    
  
    Checks
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Semantics
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Semantics
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/semantics/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/semantics/models/">
<span class="md-ellipsis">
    
  
    Semantic Models
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/semantics/business_metrics/">
<span class="md-ellipsis">
    
  
    Business Metrics
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Advance Features
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_6">
<span class="md-nav__icon md-icon"></span>
            
  
    Advance Features
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6_1" id="__nav_3_6_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Macros
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_6_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Macros
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/advanced-features/macros/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/advanced-features/macros/variables/">
<span class="md-ellipsis">
    
  
    Variables
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/advanced-features/macros/built_in/">
<span class="md-ellipsis">
    
  
    Built In
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/advanced-features/macros/jinja/">
<span class="md-ellipsis">
    
  
    Jinja
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/advanced-features/signals/">
<span class="md-ellipsis">
    
  
    Signals
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../components/advanced-features/custom_materializations/">
<span class="md-ellipsis">
    
  
    Custom materializations
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../guides/get-started/docker/">
<span class="md-ellipsis">
    
  
    Get Started
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../guides/plan/">
<span class="md-ellipsis">
    
  
    Plan
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../guides/run_and_scheduling/">
<span class="md-ellipsis">
    
  
    Run and Scheduling
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../guides/models/">
<span class="md-ellipsis">
    
  
    Models
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../guides/incremental_by_time/">
<span class="md-ellipsis">
    
  
    Incremental by Time
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../guides/data_quality/">
<span class="md-ellipsis">
    
  
    Data Quality
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../guides/model_selection/">
<span class="md-ellipsis">
    
  
    Model Selection
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../guides/transpiling_semantics/">
<span class="md-ellipsis">
    
  
    Transpiling Semantics
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../reference/cli.md">
<span class="md-ellipsis">
    
  
    CLI Commands
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Cookbook
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            
  
    Cookbook
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cookbook/index.md">
<span class="md-ellipsis">
    
  
    None
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            
  
    FAQ
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../faq/index.md">
<span class="md-ellipsis">
    
  
    None
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="On this page" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      On this page
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#background">
<span class="md-ellipsis">
      
        Background
      
    </span>
</a>
<nav aria-label="Background" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#object-naming">
<span class="md-ellipsis">
      
        Object naming
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#table-engines">
<span class="md-ellipsis">
      
        Table engines
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#clickhouse-modes-of-operation">
<span class="md-ellipsis">
      
        ClickHouse modes of operation
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#permissions">
<span class="md-ellipsis">
      
        Permissions
      
    </span>
</a>
<nav aria-label="Permissions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#environment-views">
<span class="md-ellipsis">
      
        Environment views
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#physical-tables">
<span class="md-ellipsis">
      
        Physical tables
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cluster-specification">
<span class="md-ellipsis">
      
        Cluster specification
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#model-definition">
<span class="md-ellipsis">
      
        Model definition
      
    </span>
</a>
<nav aria-label="Model definition" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#table-engine">
<span class="md-ellipsis">
      
        Table engine
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ttl">
<span class="md-ellipsis">
      
        TTL
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#partitioning">
<span class="md-ellipsis">
      
        Partitioning
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#settings">
<span class="md-ellipsis">
      
        Settings
      
    </span>
</a>
<nav aria-label="Settings" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#connection-settings">
<span class="md-ellipsis">
      
        Connection settings
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ddl-settings">
<span class="md-ellipsis">
      
        DDL settings
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#query-settings">
<span class="md-ellipsis">
      
        Query settings
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-considerations">
<span class="md-ellipsis">
      
        Performance considerations
      
    </span>
</a>
<nav aria-label="Performance considerations" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#why-delete-or-replace">
<span class="md-ellipsis">
      
        Why delete or replace?
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#temp-table-swap">
<span class="md-ellipsis">
      
        Temp table swap
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#partition-swap">
<span class="md-ellipsis">
      
        Partition swap
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#localbuilt-in-scheduler">
<span class="md-ellipsis">
      
        Local/Built-in Scheduler
      
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="clickhouse">ClickHouse<a class="headerlink" href="#clickhouse" title="Link to this section">¶</a></h1>
<p>This page describes Vulcan support for the ClickHouse engine, including configuration options specific to ClickHouse.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ClickHouse may not be used for the Vulcan <a href="../../reference/configuration.md#connections">state connection</a>.</p>
</div>
<h2 id="background">Background<a class="headerlink" href="#background" title="Link to this section">¶</a></h2>
<p><a href="https://clickhouse.com/">ClickHouse</a> is a distributed, column-oriented SQL engine designed to rapidly execute analytical workloads.</p>
<p>It provides users fine-grained control of its behavior, but that control comes at the cost of complex configuration.</p>
<p>This section provides background information about ClickHouse, providing context for how to use Vulcan with the ClickHouse engine.</p>
<h3 id="object-naming">Object naming<a class="headerlink" href="#object-naming" title="Link to this section">¶</a></h3>
<p>Most SQL engines use a three-level hierarchical naming scheme: tables/views are nested within <em>schemas</em>, and schemas are nested within <em>catalogs</em>. For example, the full name of a table might be <code>my_catalog.my_schema.my_table</code>.</p>
<p>ClickHouse instead uses a two-level hierarchical naming scheme that has no counterpart to <em>catalog</em>. In addition, it calls the second level in the hierarchy "databases." Vulcan and its documentation refer to this second level as "schemas."</p>
<p>Vulcan fully supports ClickHouse's two-level naming scheme without user action.</p>
<h3 id="table-engines">Table engines<a class="headerlink" href="#table-engines" title="Link to this section">¶</a></h3>
<p>Every ClickHouse table is created with a <a href="https://clickhouse.com/docs/en/engines/table-engines">"table engine" that controls how the table's data is stored and queried</a>. ClickHouse's (and Vulcan's) default table engine is <code>MergeTree</code>.</p>
<p>The <a href="https://clickhouse.com/docs/en/engines/table-engines/mergetree-family/mergetree"><code>MergeTree</code> engine family</a> requires that every table be created with an <code>ORDER BY</code> clause.</p>
<p>Vulcan will automatically inject an empty <code>ORDER BY</code> clause into every <code>MergeTree</code> family table's <code>CREATE</code> statement, or you can specify the columns/expressions by which the table should be ordered.</p>
<h3 id="clickhouse-modes-of-operation">ClickHouse modes of operation<a class="headerlink" href="#clickhouse-modes-of-operation" title="Link to this section">¶</a></h3>
<p>Conceptually, it may be helpful to view ClickHouse as having three modes of operation: single server, cluster, and ClickHouse Cloud. Vulcan supports all three modes.</p>
<h4 id="single-server-mode">Single server mode<a class="headerlink" href="#single-server-mode" title="Link to this section">¶</a></h4>
<p>Single server mode is similar to other SQL engines: aside from choosing each table's engine, you do not need to worry about how computations are executed. You issue standard SQL commands/queries, and ClickHouse executes them.</p>
<h4 id="cluster-mode">Cluster mode<a class="headerlink" href="#cluster-mode" title="Link to this section">¶</a></h4>
<p>Cluster mode allows you to scale your ClickHouse engine to any number of networked servers. This enables massive workloads, but requires that you specify how computations are executed by the networked servers.</p>
<p>ClickHouse coordinates the computations on the networked servers with <a href="https://clickhouse.com/docs/en/architecture/horizontal-scaling">ClickHouse Keeper</a> (it also supports <a href="https://zookeeper.apache.org/">Apache ZooKeeper</a>).</p>
<p>You specify named virtual clusters of servers in the Keeper configuration, and those clusters provide namespaces for data objects and computations. For example, you might include all networked servers in the cluster you name <code>MyCluster</code>.</p>
<p>In general, you must be connected to a ClickHouse server to execute commands. By default, each command you execute runs in single-server mode on the server you are connected to.</p>
<p>To associate an object with a cluster, DDL commands that create or modify it must include the text <code>ON CLUSTER [your cluster name]</code>.</p>
<p>If you provide a cluster name in your Vulcan connection configuration, Vulcan will automatically inject the <code>ON CLUSTER</code> statement into the DDL commands for all objects created while executing the project. We provide more information about clusters in Vulcan <a href="#cluster-specification">below</a>.</p>
<h4 id="clickhouse-cloud-mode">ClickHouse Cloud mode<a class="headerlink" href="#clickhouse-cloud-mode" title="Link to this section">¶</a></h4>
<p><a href="https://clickhouse.com/cloud">ClickHouse Cloud</a> is a managed ClickHouse platform. It allows you to scale ClickHouse without administering a cluster yourself or modifying your SQL commands to run on the cluster.</p>
<p>ClickHouse Cloud automates ClickHouse's cluster controls, which sometimes constrains ClickHouse's flexibility or how you execute SQL commands. For example, creating a table with a <code>SELECT</code> command must <a href="https://clickhouse.com/docs/en/sql-reference/statements/create/table#from-select-query">occur in two steps on ClickHouse Cloud</a>. Vulcan handles this limitation for you.</p>
<p>Aside from those constraints, ClickHouse Cloud mode is similar to single server mode - you run standard SQL commands/queries, and ClickHouse Cloud executes them.</p>
<h2 id="permissions">Permissions<a class="headerlink" href="#permissions" title="Link to this section">¶</a></h2>
<p>In the default Vulcan configuration, users must have sufficient permissions to create new ClickHouse databases.</p>
<p>Alternatively, you can configure specific databases where Vulcan should create table and view objects.</p>
<h3 id="environment-views">Environment views<a class="headerlink" href="#environment-views" title="Link to this section">¶</a></h3>
<p>Use the <a href="../../guides/configuration.md#disable-environment-specific-schemas"><code>environment_suffix_target</code> key in your project configuration</a> to specify that environment views should be created within the model's database instead of in a new database:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="nt">environment_suffix_target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">table</span>
</span></code></pre></div>
<h3 id="physical-tables">Physical tables<a class="headerlink" href="#physical-tables" title="Link to this section">¶</a></h3>
<p>Use the <a href="../../guides/configuration.md#physical-table-schemas"><code>physical_schema_mapping</code> key in your project configuration</a> to specify the databases where physical tables should be created.</p>
<p>The key accepts a dictionary of regular expressions that map model database names to the corresponding databases where physical tables should be created.</p>
<p>Vulcan will compare a model's database name to each regular expression and use the first match to determine which database a physical table should be created in.</p>
<p>For example, this configuration places every model's physical table in the <code>model_physical_tables</code> database because the regular expression <code>.*</code> matches any database name:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="nt">physical_schema_mapping</span><span class="p">:</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">  </span><span class="s">'.*'</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">model_physical_tables</span>
</span></code></pre></div>
<h2 id="cluster-specification">Cluster specification<a class="headerlink" href="#cluster-specification" title="Link to this section">¶</a></h2>
<p>A ClickHouse cluster allows multiple networked ClickHouse servers to operate on the same data object. Every cluster must be named in the ClickHouse configuration files, and that name is passed to a table's DDL statements in the <code>ON CLUSTER</code> clause.</p>
<p>For example, we could create a table <code>my_schema.my_table</code> on cluster <code>TheCluster</code> like this: <code>CREATE TABLE my_schema.my_table ON CLUSTER TheCluster (col1 Int8)</code>.</p>
<p>To create Vulcan objects on a cluster, provide the cluster name to the <code>cluster</code> key in the Vulcan connection definition (see all connection parameters <a href="#localbuilt-in-scheduler">below</a>).</p>
<p>Vulcan will automatically inject the <code>ON CLUSTER</code> clause and cluster name you provide into all project DDL statements.</p>
<h2 id="model-definition">Model definition<a class="headerlink" href="#model-definition" title="Link to this section">¶</a></h2>
<p>This section describes how you control a table's engine and other ClickHouse-specific functionality in Vulcan models.</p>
<h3 id="table-engine">Table engine<a class="headerlink" href="#table-engine" title="Link to this section">¶</a></h3>
<p>Vulcan uses the <code>MergeTree</code> table engine with an empty <code>ORDER BY</code> clause by default.</p>
<p>Specify a different table engine by passing the table engine definition to the model DDL's <code>storage_format</code> parameter. For example, you could specify the <code>Log</code> table engine like this:</p>
<div class="language-sql highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span>
<span class="normal"><a href="#__codelineno-2-4">4</a></span>
<span class="normal"><a href="#__codelineno-2-5">5</a></span>
<span class="normal"><a href="#__codelineno-2-6">6</a></span>
<span class="normal"><a href="#__codelineno-2-7">7</a></span>
<span class="normal"><a href="#__codelineno-2-8">8</a></span>
<span class="normal"><a href="#__codelineno-2-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="n">my_schema</span><span class="p">.</span><span class="n">my_log_table</span><span class="p">,</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="k">full</span><span class="p">,</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="hll"><span class="w">    </span><span class="n">storage_format</span><span class="w"> </span><span class="n">Log</span><span class="p">,</span>
</span></span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="p">);</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="k">select</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">    </span><span class="o">*</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="k">from</span><span class="w"> </span><span class="n">other_schema</span><span class="p">.</span><span class="n">other_table</span><span class="p">;</span>
</span></code></pre></div></td></tr></tbody></table></div>
<p>You may also specify more complex table engine definitions. For example:</p>
<div class="language-sql highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span>
<span class="normal"><a href="#__codelineno-3-6">6</a></span>
<span class="normal"><a href="#__codelineno-3-7">7</a></span>
<span class="normal"><a href="#__codelineno-3-8">8</a></span>
<span class="normal"><a href="#__codelineno-3-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="n">my_schema</span><span class="p">.</span><span class="n">my_rep_table</span><span class="p">,</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="k">full</span><span class="p">,</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="hll"><span class="w">    </span><span class="n">storage_format</span><span class="w"> </span><span class="n">ReplicatedMergeTree</span><span class="p">(</span><span class="s1">'/clickhouse/tables/{shard}/table_name'</span><span class="p">,</span><span class="w"> </span><span class="s1">'{replica}'</span><span class="p">,</span><span class="w"> </span><span class="n">ver</span><span class="p">),</span>
</span></span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="p">);</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="k">select</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">    </span><span class="o">*</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="k">from</span><span class="w"> </span><span class="n">other_schema</span><span class="p">.</span><span class="n">other_table</span><span class="p">;</span>
</span></code></pre></div></td></tr></tbody></table></div>
<h4 id="order-by">ORDER BY<a class="headerlink" href="#order-by" title="Link to this section">¶</a></h4>
<p><code>MergeTree</code> family engines require that a table's <code>CREATE</code> statement include the <code>ORDER BY</code> clause.</p>
<p>Vulcan will automatically inject an empty <code>ORDER BY ()</code> when creating a table with an engine in the <code>MergeTree</code> family. This creates the table without any ordering.</p>
<p>You may specify columns/expressions to <code>ORDER BY</code> by passing them to the model <code>physical_properties</code> dictionary's <code>order_by</code> key.</p>
<p>For example, you could order by columns <code>col1</code> and <code>col2</code> like this:</p>
<div class="language-sql highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="n">my_schema</span><span class="p">.</span><span class="n">my_log_table</span><span class="p">,</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="k">full</span><span class="p">,</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="hll"><span class="w">    </span><span class="n">physical_properties</span><span class="w"> </span><span class="p">(</span>
</span></span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="hll"><span class="w">        </span><span class="n">order_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">col2</span><span class="p">)</span>
</span></span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="hll"><span class="w">    </span><span class="p">)</span>
</span></span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="p">);</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="k">select</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="o">*</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="k">from</span><span class="w"> </span><span class="n">other_schema</span><span class="p">.</span><span class="n">other_table</span><span class="p">;</span>
</span></code></pre></div></td></tr></tbody></table></div>
<p>Note that there is an <code>=</code> between the <code>order_by</code> key name and value <code>(col1, col2)</code>.</p>
<p>Complex <code>ORDER BY</code> expressions may need to be passed in single quotes, with interior single quotes escaped by the <code>\</code> character.</p>
<h4 id="primary-key">PRIMARY KEY<a class="headerlink" href="#primary-key" title="Link to this section">¶</a></h4>
<p>Table engines may also accept a <code>PRIMARY KEY</code> specification. Similar to <code>ORDER BY</code>, specify a primary key in the model DDL's <code>physical_properties</code> dictionary. For example:</p>
<div class="language-sql highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="n">my_schema</span><span class="p">.</span><span class="n">my_log_table</span><span class="p">,</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="k">full</span><span class="p">,</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="n">physical_properties</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">        </span><span class="n">order_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">col2</span><span class="p">),</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="hll"><span class="w">        </span><span class="n">primary_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">col1</span>
</span></span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="p">);</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9"></a>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="k">select</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">    </span><span class="o">*</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="k">from</span><span class="w"> </span><span class="n">other_schema</span><span class="p">.</span><span class="n">other_table</span><span class="p">;</span>
</span></code></pre></div></td></tr></tbody></table></div>
<p>Note that there is an <code>=</code> between the <code>primary_key</code> key name and value <code>col1</code>.</p>
<h3 id="ttl">TTL<a class="headerlink" href="#ttl" title="Link to this section">¶</a></h3>
<p>ClickHouse tables accept a <a href="https://clickhouse.com/docs/en/guides/developer/ttl">TTL expression that triggers actions</a> like deleting rows after a certain amount of time has passed.</p>
<p>Similar to <code>ORDER_BY</code> and <code>PRIMARY_KEY</code>, specify a TTL key in the model DDL's <code>physical_properties</code> dictionary. For example:</p>
<div class="language-sql highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="n">my_schema</span><span class="p">.</span><span class="n">my_log_table</span><span class="p">,</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="k">full</span><span class="p">,</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">    </span><span class="n">physical_properties</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">        </span><span class="n">order_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">col2</span><span class="p">),</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="hll"><span class="w">        </span><span class="n">primary_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">col1</span><span class="p">,</span>
</span></span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">        </span><span class="n">ttl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">timestamp</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">WEEK</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="p">);</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10"></a>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="k">select</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">    </span><span class="o">*</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="k">from</span><span class="w"> </span><span class="n">other_schema</span><span class="p">.</span><span class="n">other_table</span><span class="p">;</span>
</span></code></pre></div></td></tr></tbody></table></div>
<p>Note that there is an <code>=</code> between the <code>ttl</code> key name and value <code>timestamp + INTERVAL 1 WEEK</code>.</p>
<h3 id="partitioning">Partitioning<a class="headerlink" href="#partitioning" title="Link to this section">¶</a></h3>
<p>Some ClickHouse table engines support partitioning. Specify the partitioning columns/expressions in the model DDL's <code>partitioned_by</code> key.</p>
<p>For example, you could partition by columns <code>col1</code> and <code>col2</code> like this:</p>
<div class="language-sql highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span>
<span class="normal"><a href="#__codelineno-7-7">7</a></span>
<span class="normal"><a href="#__codelineno-7-8">8</a></span>
<span class="normal"><a href="#__codelineno-7-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="n">my_schema</span><span class="p">.</span><span class="n">my_log_table</span><span class="p">,</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="k">full</span><span class="p">,</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="hll"><span class="w">    </span><span class="n">partitioned_by</span><span class="w"> </span><span class="p">(</span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">col2</span><span class="p">),</span>
</span></span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="p">);</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6"></a>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="k">select</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">    </span><span class="o">*</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="k">from</span><span class="w"> </span><span class="n">other_schema</span><span class="p">.</span><span class="n">other_table</span><span class="p">;</span>
</span></code></pre></div></td></tr></tbody></table></div>
<p>Learn more below about how Vulcan uses <a href="#performance-considerations">partitioned tables to improve performance</a>.</p>
<h2 id="settings">Settings<a class="headerlink" href="#settings" title="Link to this section">¶</a></h2>
<p>ClickHouse supports an <a href="https://clickhouse.com/docs/en/operations/settings">immense number of settings</a>, many of which can be altered in multiple places: ClickHouse configuration files, Python client connection arguments, DDL statements, SQL queries, and others.</p>
<p>This section discusses how to control ClickHouse settings in Vulcan.</p>
<h3 id="connection-settings">Connection settings<a class="headerlink" href="#connection-settings" title="Link to this section">¶</a></h3>
<p>Vulcan connects to Python with the <a href="https://clickhouse.com/docs/en/integrations/python"><code>clickhouse-connect</code> library</a>. Its connection method accepts a dictionary of arbitrary settings that are passed to ClickHouse.</p>
<p>Specify these settings in the <code>connection_settings</code> key. This example demonstrates how to set the <code>distributed_ddl_task_timeout</code> setting to <code>300</code>:</p>
<div class="language-yaml highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nt">clickhouse_gateway</span><span class="p">:</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">clickhouse</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8123</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pw</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="hll"><span class="w">    </span><span class="nt">connection_settings</span><span class="p">:</span>
</span></span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="hll"><span class="w">      </span><span class="nt">distributed_ddl_task_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
</span></span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">  </span><span class="nt">state_connection</span><span class="p">:</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">duckdb</span>
</span></code></pre></div></td></tr></tbody></table></div>
<h3 id="ddl-settings">DDL settings<a class="headerlink" href="#ddl-settings" title="Link to this section">¶</a></h3>
<p>ClickHouse settings may also be specified in DDL commands like <code>CREATE</code>.</p>
<p>Specify these settings in a model DDL's <a href="https://vulcan.readthedocs.io/en/stable/concepts/models/overview/?h=physical#physical_properties"><code>physical_properties</code> key</a> (where the <a href="#order-by"><code>order_by</code></a> and <a href="#primary-key"><code>primary_key</code></a> values are specified, if present).</p>
<p>This example demonstrates how to set the <code>index_granularity</code> setting to <code>128</code>:</p>
<div class="language-sql highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="n">my_schema</span><span class="p">.</span><span class="n">my_log_table</span><span class="p">,</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="k">full</span><span class="p">,</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="hll"><span class="w">    </span><span class="n">physical_properties</span><span class="w"> </span><span class="p">(</span>
</span></span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="hll"><span class="w">        </span><span class="n">index_granularity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span>
</span></span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="hll"><span class="w">    </span><span class="p">)</span>
</span></span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="p">);</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8"></a>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="k">select</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">    </span><span class="o">*</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="k">from</span><span class="w"> </span><span class="n">other_schema</span><span class="p">.</span><span class="n">other_table</span><span class="p">;</span>
</span></code></pre></div></td></tr></tbody></table></div>
<p>Note that there is an <code>=</code> between the <code>index_granularity</code> key name and value <code>128</code>.</p>
<h3 id="query-settings">Query settings<a class="headerlink" href="#query-settings" title="Link to this section">¶</a></h3>
<p>ClickHouse settings may be specified directly in a model's query with the <code>SETTINGS</code> keyword.</p>
<p>This example demonstrates setting the <code>join_use_nulls</code> setting to <code>1</code>:</p>
<div class="language-sql highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span>
<span class="normal"><a href="#__codelineno-10-5">5</a></span>
<span class="normal"><a href="#__codelineno-10-6">6</a></span>
<span class="normal"><a href="#__codelineno-10-7">7</a></span>
<span class="normal"><a href="#__codelineno-10-8">8</a></span>
<span class="normal"><a href="#__codelineno-10-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="n">my_schema</span><span class="p">.</span><span class="n">my_log_table</span><span class="p">,</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="k">full</span><span class="p">,</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="p">);</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5"></a>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="k">select</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">    </span><span class="o">*</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="k">from</span><span class="w"> </span><span class="n">other_schema</span><span class="p">.</span><span class="n">other_table</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="hll"><span class="n">SETTINGS</span><span class="w"> </span><span class="n">join_use_nulls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span></span></code></pre></div></td></tr></tbody></table></div>
<p>Multiple settings may be specified in a query with repeated use of the <code>SETTINGS</code> keyword: <code>SELECT * FROM other_table SETTINGS first_setting = 1 SETTINGS second_setting = 2;</code>.</p>
<h4 id="usage-by-vulcan">Usage by Vulcan<a class="headerlink" href="#usage-by-vulcan" title="Link to this section">¶</a></h4>
<p>The ClickHouse setting <code>join_use_nulls</code> affects the behavior of Vulcan SCD models and table diffs. This section describes how Vulcan uses query settings to control that behavior.</p>
<p><ins>Background</ins></p>
<p>In general, table <code>JOIN</code>s can return empty cells for rows not present in both tables.</p>
<p>For example, consider <code>LEFT JOIN</code>ing two tables <code>left</code> and <code>right</code>, where the column <code>right_column</code> is only present in the <code>right</code> table. Any rows only present in the <code>left</code> table will have no value for <code>right_column</code> in the joined table.</p>
<p>In other SQL engines, those empty cells are filled with <code>NULL</code>s.</p>
<p>In contrast, ClickHouse fills the empty cells with data type-specific default values (e.g., 0 for integer column types). It will instead fill the cells with <code>NULL</code>s if you set the <code>join_use_nulls</code> setting to <code>1</code>.</p>
<p><ins>Vulcan</ins></p>
<p>Vulcan automatically generates SQL queries for both SCD Type 2 models and table diff comparisons. These queries include table <code>JOIN</code>s and calculations based on the presence of <code>NULL</code> values.</p>
<p>Because those queries expect <code>NULL</code> values in empty cells, Vulcan automatically adds <code>SETTINGS join_use_nulls = 1</code> to the generated SCD and table diff SQL code.</p>
<p>The SCD model definition query is embedded as a CTE in the full Vulcan-generated query. If run alone, the model definition query would use the ClickHouse server's current <code>join_use_nulls</code> value.</p>
<p>If that value is not <code>1</code>, the Vulcan setting on the outer query would override the server value and produce incorrect results.</p>
<p>Therefore, Vulcan uses the following procedure to ensure the model definition query runs with the correct <code>join_use_nulls</code> value:</p>
<ul>
<li>If the model query sets <code>join_use_nulls</code> itself, do nothing</li>
<li>If the model query does not set <code>join_use_nulls</code> and the current server <code>join_use_nulls</code> value is <code>1</code>, do nothing</li>
<li>If the model query does not set <code>join_use_nulls</code> and the current server <code>join_use_nulls</code> value is <code>0</code>, add <code>SETTINGS join_use_nulls = 0</code> to the CTE model query<ul>
<li>All other CTEs and the outer query will still execute with a <code>join_use_nulls</code> value of <code>1</code></li>
</ul>
</li>
</ul>
<h2 id="performance-considerations">Performance considerations<a class="headerlink" href="#performance-considerations" title="Link to this section">¶</a></h2>
<p>ClickHouse is optimized for writing/reading records, so deleting/replacing records can be extremely slow.</p>
<p>This section describes why Vulcan needs to delete/replace records and how the ClickHouse engine adapter works around the limitations.</p>
<h3 id="why-delete-or-replace">Why delete or replace?<a class="headerlink" href="#why-delete-or-replace" title="Link to this section">¶</a></h3>
<p>Vulcan "materializes" model kinds in a number of ways, such as:</p>
<ul>
<li>Replacing an entire table (<a href="../../concepts/models/model_kinds.md#full"><code>FULL</code> models</a>)</li>
<li>Replacing records in a specific time range (<a href="../../concepts/models/model_kinds.md#incremental_by_time_range"><code>INCREMENTAL_BY_TIME_RANGE</code> models</a>)</li>
<li>Replacing records with specific key values (<a href="../../concepts/models/model_kinds.md#incremental_by_unique_key"><code>INCREMENTAL_BY_UNIQUE_KEY</code> models</a>)</li>
<li>Replacing records in specific partitions (<a href="../../concepts/models/model_kinds.md#incremental_by_partition"><code>INCREMENTAL_BY_PARTITION</code> models</a>)</li>
</ul>
<p>Different SQL engines provide different methods for performing record replacement.</p>
<p>Some engines natively support updating or inserting ("upserting") records. For example, in some engines you can <code>merge</code> a new table into an existing table based on a key. Records in the new table whose keys are already in the existing table will update/replace the existing records. Records in the new table without keys in the existing table will be inserted into the existing table.</p>
<p>Other engines do not natively support upserts, so Vulcan replaces records in two steps: delete the records to update/replace from the existing table, then insert the new records.</p>
<p>ClickHouse does not support upserts, and it performs the two step delete/insert operation so slowly as to be unusable. Therefore, Vulcan uses a different method for replacing records.</p>
<h3 id="temp-table-swap">Temp table swap<a class="headerlink" href="#temp-table-swap" title="Link to this section">¶</a></h3>
<p>Vulcan uses what we call the "temp table swap" method of replacing records in ClickHouse.</p>
<p>Because ClickHouse is optimized for writing and reading records, it is often faster to copy most of a table than to delete a small portion of its records. That is the approach used by the temp table swap method (with optional performance improvements <a href="#partition-swap">for partitioned tables</a>).</p>
<p>The temp table swap has four steps:</p>
<ol>
<li>Make an empty temp copy of the existing table that has the same structure (columns, data types, table engine, etc.)</li>
<li>Insert new records into the temp table</li>
<li>Insert the existing records that should be <strong>kept</strong> into the temp table</li>
<li>Swap the table names, such that the temp table now has the existing table's name</li>
</ol>
<p>Figure 1 illustrates these four steps:
<br/><br/></p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="clickhouse_table-swap-steps.png"><img alt="ClickHouse table swap steps" loading="lazy" src="clickhouse_table-swap-steps.png"/></a>
<em>Figure 1: steps to execute a temp table swap</em>
<br/><br/></p>
<p>The weakness of this method is that it requires copying all existing rows to keep (step three), which can be problematic for large tables.</p>
<p>To address this weakness, Vulcan instead uses <em>partition</em> swapping if a table is partitioned.</p>
<h3 id="partition-swap">Partition swap<a class="headerlink" href="#partition-swap" title="Link to this section">¶</a></h3>
<p>ClickHouse supports <em>partitioned</em> tables, which store groups of records in separate files, or "partitions."</p>
<p>A table is partitioned based on a table column or SQL expression - the "partitioning key." All records with the same value for the partitioning key are stored together in a partition.</p>
<p>For example, consider a table containing each record's creation date in a datetime column. If we partition the table by month, all the records whose timestamp was in January will be stored in one partition, records from February in another partition, and so on.</p>
<p>Table partitioning provides a major benefit for improving swap performance: records can be inserted, updated, or deleted in individual partitions.</p>
<p>Vulcan leverages this to avoid copying large numbers of existing records into a temp table. Instead, it only copies the records that are in partitions affected by a load's newly ingested records.</p>
<p>Vulcan automatically uses partition swapping for any incremental model that specifies the <a href="../../concepts/models/overview.md#partitioned_by"><code>partitioned_by</code></a> key.</p>
<h4 id="choosing-a-partitioning-key">Choosing a partitioning key<a class="headerlink" href="#choosing-a-partitioning-key" title="Link to this section">¶</a></h4>
<p>The first step of partitioning a table is choosing its partitioning key (columns or expression). The primary consideration for a key is the total number of partitions it will generate, which affects table performance.</p>
<p>Too many partitions can drastically decrease performance because the overhead of handling partition files swamps the benefits of copying fewer records. Too few partitions decreases swap performance because many existing records must still be copied in each incremental load.</p>
<div class="admonition question">
<p class="admonition-title">How many partitions is too many?</p>
<p>ClickHouse's documentation <a href="https://clickhouse.com/docs/en/engines/table-engines/mergetree-family/custom-partitioning-key">specifically warns against tables having too many partitions</a>, suggesting a maximum of 1000.</p>
</div>
<p>The total number of partitions in a table is determined by the actual data in the table, not by the partition column/expression alone.</p>
<p>For example, consider a table partitioned by date. If we insert records created on <code>2024-10-23</code>, the table will have one partition. If we then insert records from <code>2024-10-24</code>, the table will have two partitions. One partition is created for each unique value of the key.</p>
<p>For each partitioned table in your project, carefully consider the number of partitions created by the combination of your partitioning expression and the characteristics of your data.</p>
<h4 id="incremental-by-time-models">Incremental by time models<a class="headerlink" href="#incremental-by-time-models" title="Link to this section">¶</a></h4>
<p><code>INCREMENTAL_BY_TIME_RANGE</code> kind models must be partitioned by time. If the model's <code>time_column</code> is not present in any <code>partitioned_by</code> expression, Vulcan will automatically add it as the first partitioning expression.</p>
<p>By default, <code>INCREMENTAL_BY_TIME_RANGE</code> models partition by week, so the maximum recommended 1000 partitions corresponds to about 19 years of data. Vulcan projects have widely varying time ranges and data sizes, so you should choose a model's partitioning key based on the data your system will process.</p>
<p>If a model has many records in each partition, you may see additional performance benefits by including the time column in the model's <a href="#order-by"><code>ORDER_BY</code> expression</a>.</p>
<div class="admonition info">
<p class="admonition-title">Partitioning by time</p>
<p><code>INCREMENTAL_BY_TIME_RANGE</code> models must be partitioned by time.</p>
<p>Vulcan will automatically partition them by <strong>week</strong> unless the <code>partitioned_by</code> configuration key includes the time column or an expression based on it.</p>
<p>Choose a model's time partitioning granularity based on the characteristics of the data it will process, making sure the total number of partitions is 1000 or fewer.</p>
</div>
<h2 id="localbuilt-in-scheduler">Local/Built-in Scheduler<a class="headerlink" href="#localbuilt-in-scheduler" title="Link to this section">¶</a></h2>
<p><strong>Engine Adapter Type</strong>: <code>clickhouse</code></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th style="text-align: center;">Type</th>
<th style="text-align: center;">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td>Engine type name - must be <code>clickhouse</code></td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">Y</td>
</tr>
<tr>
<td><code>host</code></td>
<td>ClickHouse server hostname or IP address</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">Y</td>
</tr>
<tr>
<td><code>username</code></td>
<td>ClickHouse user name</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">Y</td>
</tr>
<tr>
<td><code>password</code></td>
<td>ClickHouse user password</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>port</code></td>
<td>The ClickHouse HTTP or HTTPS port (Default: <code>8123</code>)</td>
<td style="text-align: center;">int</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>cluster</code></td>
<td>ClickHouse cluster name</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>connect_timeout</code></td>
<td>Connection timeout in seconds (Default: <code>10</code>)</td>
<td style="text-align: center;">int</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>send_receive_timeout</code></td>
<td>Send/receive timeout in seconds (Default: <code>300</code>)</td>
<td style="text-align: center;">int</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>query_limit</code></td>
<td>Query result limit (Default: <code>0</code> - no limit)</td>
<td style="text-align: center;">int</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>use_compression</code></td>
<td>Whether to use compression (Default: <code>True</code>)</td>
<td style="text-align: center;">bool</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>compression_method</code></td>
<td>Compression method to use</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>http_proxy</code></td>
<td>HTTP proxy address (equivalent to setting the HTTP_PROXY environment variable)</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>verify</code></td>
<td>Verify server TLS/SSL certificate (Default: <code>True</code>)</td>
<td style="text-align: center;">bool</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>ca_cert</code></td>
<td>Ignored if verify is <code>False</code>. If verify is <code>True</code>, the file path to Certificate Authority root to validate ClickHouse server certificate, in .pem format. Not necessary if the ClickHouse server certificate is a globally trusted root as verified by the operating system.</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>client_cert</code></td>
<td>File path to a TLS Client certificate in .pem format (for mutual TLS authentication). The file should contain a full certificate chain, including any intermediate certificates.</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>client_cert_key</code></td>
<td>File path to the private key for the Client Certificate. Required if the private key is not included the Client Certificate key file.</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>https_proxy</code></td>
<td>HTTPS proxy address (equivalent to setting the HTTPS_PROXY environment variable)</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>server_host_name</code></td>
<td>The ClickHouse server hostname as identified by the CN or SNI of its TLS certificate. Set this to avoid SSL errors when connecting through a proxy or tunnel with a different hostname.</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>tls_mode</code></td>
<td>Controls advanced TLS behavior. proxy and strict do not invoke ClickHouse mutual TLS connection, but do send client cert and key. mutual assumes ClickHouse mutual TLS auth with a client certificate.</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>connection_settings</code></td>
<td>Additional <a href="https://clickhouse.com/docs/integrations/python#settings-argument">connection settings</a></td>
<td style="text-align: center;">dict</td>
<td style="text-align: center;">N</td>
</tr>
<tr>
<td><code>connection_pool_options</code></td>
<td>Additional <a href="https://clickhouse.com/docs/integrations/python#customizing-the-http-connection-pool">options</a>                                                                                                                                         for the HTTP connection pool</td>
<td style="text-align: center;">dict</td>
<td style="text-align: center;">N</td>
</tr>
</tbody>
</table>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2024 DataOS Vulcan Team<br/>
<small>Complete stack for building data products</small>
</div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/tmdc-io/vulcan-book" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-progress" data-md-component="progress" role="progressbar"></div>
<script id="__config" type="application/json">{"annotate": null, "base": "../../../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tracking", "navigation.indexes", "navigation.path", "navigation.top", "navigation.footer", "toc.follow", "search.highlight", "search.suggest", "search.share", "content.tabs.link", "content.code.copy", "content.code.annotate", "content.tooltips"], "search": "../../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
<script src="../../../../assets/javascripts/mermaid-zoom.js"></script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>