<!DOCTYPE html>
<html class="no-js" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Complete documentation for Vulcan - complete stack for building data products" name="description"/>
<meta content="DataOS Vulcan Team" name="author"/>
<link href="https://tmdc-io.github.io/vulcan-docs/concepts-old/plans/" rel="canonical"/>
<link href="../../assets/images/vulcan.svg" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.0" name="generator"/>
<title>Plans - DataOS Vulcan</title>
<link href="../../assets/stylesheets/main.618322db.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
<link href="../../assets/stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
<body data-md-color-accent="blue-grey" data-md-color-primary="blue-grey" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#plans">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="DataOS Vulcan" class="md-header__button md-logo" data-md-component="logo" href="../.." title="DataOS Vulcan">
<img alt="logo" src="../../assets/images/vulcan-white.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DataOS Vulcan
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Plans
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="blue-grey" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="blue-grey" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="blue-grey" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="blue-grey" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/tmdc-io/vulcan-book" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    tmdc-io/vulcan-book
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DataOS Vulcan" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="DataOS Vulcan">
<img alt="logo" src="../../assets/images/vulcan-white.svg"/>
</a>
    DataOS Vulcan
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/tmdc-io/vulcan-book" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    tmdc-io/vulcan-book
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    
  
    About
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Configurations
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Configurations
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Options
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Options
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/model_defaults/">
<span class="md-ellipsis">
    
  
    Model defaults
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/variables/">
<span class="md-ellipsis">
    
  
    Variables
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/execution_hooks/">
<span class="md-ellipsis">
    
  
    Execution Hooks
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/notifications/">
<span class="md-ellipsis">
    
  
    Notifications
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/linter/">
<span class="md-ellipsis">
    
  
    Linter
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Engines
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Engines
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/postgres/postgres/">
<span class="md-ellipsis">
    
  
    Postgres
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/snowflake/snowflake/">
<span class="md-ellipsis">
    
  
    Snowflake
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../configurations/ci_cd/">
<span class="md-ellipsis">
    
  
    CI/CD
  

    
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
            
  
    CI/CD
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Components
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Components
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Model
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Model
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/properties/">
<span class="md-ellipsis">
    
  
    Properties
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Types
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_1_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Types
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/types/sql_models/">
<span class="md-ellipsis">
    
  
    SQL
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/types/python_models/">
<span class="md-ellipsis">
    
  
    Python
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/types/external_models/">
<span class="md-ellipsis">
    
  
    External
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/types/managed_models/">
<span class="md-ellipsis">
    
  
    Managed
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/model_kinds/">
<span class="md-ellipsis">
    
  
    Kinds
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/statements/">
<span class="md-ellipsis">
    
  
    Statements
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/tests/tests/">
<span class="md-ellipsis">
    
  
    Tests
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/audits/audits/">
<span class="md-ellipsis">
    
  
    Audits
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/checks/checks/">
<span class="md-ellipsis">
    
  
    Checks
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Semantics
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Semantics
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/semantics/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/semantics/models/">
<span class="md-ellipsis">
    
  
    Semantic Models
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/semantics/business_metrics/">
<span class="md-ellipsis">
    
  
    Business Metrics
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Advance Features
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_6">
<span class="md-nav__icon md-icon"></span>
            
  
    Advance Features
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6_1" id="__nav_3_6_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Macros
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_6_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Macros
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/macros/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/macros/variables/">
<span class="md-ellipsis">
    
  
    Variables
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/macros/built_in/">
<span class="md-ellipsis">
    
  
    Built In
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/macros/jinja/">
<span class="md-ellipsis">
    
  
    Jinja
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/signals/">
<span class="md-ellipsis">
    
  
    Signals
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/custom_materializations/">
<span class="md-ellipsis">
    
  
    Custom materializations
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/get-started/docker/">
<span class="md-ellipsis">
    
  
    Get Started
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/plan/">
<span class="md-ellipsis">
    
  
    Plan
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/run_and_scheduling/">
<span class="md-ellipsis">
    
  
    Run and Scheduling
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/models/">
<span class="md-ellipsis">
    
  
    Models
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/incremental_by_time/">
<span class="md-ellipsis">
    
  
    Incremental by Time
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/data_quality/">
<span class="md-ellipsis">
    
  
    Data Quality
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/model_selection/">
<span class="md-ellipsis">
    
  
    Model Selection
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/transpiling_semantics/">
<span class="md-ellipsis">
    
  
    Transpiling Semantics
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli-command/cli/">
<span class="md-ellipsis">
    
  
    CLI Commands
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cookbook/">
<span class="md-ellipsis">
    
  
    Cookbook
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../faq/">
<span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="On this page" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      On this page
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#plan-architecture-overview">
<span class="md-ellipsis">
      
        Plan Architecture Overview
      
    </span>
</a>
<nav aria-label="Plan Architecture Overview" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#plan-components">
<span class="md-ellipsis">
      
        Plan Components
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#change-categories">
<span class="md-ellipsis">
      
        Change categories
      
    </span>
</a>
<nav aria-label="Change categories" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#change-propagation-flow">
<span class="md-ellipsis">
      
        Change Propagation Flow
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#breaking-change">
<span class="md-ellipsis">
      
        Breaking change
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#non-breaking-change">
<span class="md-ellipsis">
      
        Non-breaking change
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#summary">
<span class="md-ellipsis">
      
        Summary
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#forward-only-change">
<span class="md-ellipsis">
      
        Forward-only change
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#plan-application">
<span class="md-ellipsis">
      
        Plan application
      
    </span>
</a>
<nav aria-label="Plan application" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#model-versioning-architecture">
<span class="md-ellipsis">
      
        Model Versioning Architecture
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#backfilling">
<span class="md-ellipsis">
      
        Backfilling
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#virtual-update">
<span class="md-ellipsis">
      
        Virtual Update
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#start-and-end-dates">
<span class="md-ellipsis">
      
        Start and end dates
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-preview-for-forward-only-changes">
<span class="md-ellipsis">
      
        Data preview for forward-only changes
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#forward-only-plans">
<span class="md-ellipsis">
      
        Forward-only plans
      
    </span>
</a>
<nav aria-label="Forward-only plans" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#destructive-changes">
<span class="md-ellipsis">
      
        Destructive changes
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#effective-date">
<span class="md-ellipsis">
      
        Effective date
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#restatement-plans">
<span class="md-ellipsis">
      
        Restatement plans
      
    </span>
</a>
<nav aria-label="Restatement plans" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#restating-production-vs-development">
<span class="md-ellipsis">
      
        Restating production vs development
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="plans">Plans<a class="headerlink" href="#plans" title="Link to this section">Â¶</a></h1>
<p>A plan is a set of changes that summarizes the difference between the local state of a project and the state of a target <a href="../environments/">environment</a>. In order for any model changes to take effect in a target environment, a plan needs to be created and applied.</p>
<h2 id="plan-architecture-overview">Plan Architecture Overview<a class="headerlink" href="#plan-architecture-overview" title="Link to this section">Â¶</a></h2>
<p>The following diagram illustrates the complete plan lifecycle, from local changes to environment updates:</p>
<pre class="mermaid"><code>flowchart TD
    subgraph "1ï¸âƒ£ Local Development"
        A[ğŸ‘¨â€ğŸ’» Developer modifies model files&lt;br/&gt;ğŸ“ Edit SQL/Python models]
        B[ğŸ“ Local project state&lt;br/&gt;âœ¨ Your changes ready]
    end

    subgraph "2ï¸âƒ£ Plan Creation"
        C[âš¡ vulcan plan&lt;br/&gt;ğŸš€ Command execution]
        D[ğŸ” Compare local vs environment&lt;br/&gt;ğŸ“Š State comparison]
        E{ğŸ” Changes detected?}
        F[ğŸ“‹ Generate plan summary&lt;br/&gt;âœ¨ Plan ready for review]
        G[ğŸ·ï¸ Change categorization&lt;br/&gt;ğŸ”´ Breaking / ğŸŸ¢ Non-breaking / ğŸŸ¡ Forward-only]
    end

    subgraph "3ï¸âƒ£ Plan Review"
        H[ğŸ‘€ Review plan output&lt;br/&gt;ğŸ“Š Check changes &amp; impacts]
        I{âœ… Apply plan?}
        J[âŒ Cancel&lt;br/&gt;ğŸš« No changes applied]
    end

    subgraph "4ï¸âƒ£ Plan Application"
        K[ğŸ”· Create model variants&lt;br/&gt;ğŸ”‘ With unique fingerprints]
        L[ğŸ—„ï¸ Create physical tables&lt;br/&gt;ğŸ’¾ In data warehouse]
        M[ğŸ”„ Backfill data&lt;br/&gt;ğŸ“ˆ Process historical data]
        N[ğŸ‘ï¸ Update virtual layer&lt;br/&gt;ğŸ” Create/update views]
        O[ğŸŒ Update environment references&lt;br/&gt;ğŸ”— Point to new variants]
    end

    subgraph "5ï¸âƒ£ Result"
        P[âœ… Environment updated&lt;br/&gt;ğŸ‰ Changes deployed]
        Q[ğŸ” Models accessible via views&lt;br/&gt;ğŸ“Š Ready for queries]
    end

    A --&gt;|"ğŸ“¤"| B
    B --&gt;|"â¡ï¸"| C
    C --&gt;|"ğŸ”"| D
    D --&gt;|"ğŸ”"| E
    E --&gt;|"âœ… Yes"| F
    E --&gt;|"âŒ No"| P
    F --&gt;|"ğŸ·ï¸"| G
    G --&gt;|"ğŸ“‹"| H
    H --&gt;|"ğŸ‘€"| I
    I --&gt;|"âœ… Yes"| K
    I --&gt;|"âŒ No"| J
    K --&gt;|"ğŸ”·"| L
    L --&gt;|"ğŸ’¾"| M
    M --&gt;|"ğŸ”„"| N
    N --&gt;|"ğŸ‘ï¸"| O
    O --&gt;|"ğŸ”—"| P
    P --&gt;|"âœ¨"| Q

    style A fill:#e3f2fd,stroke:#1976d2,stroke-width:3px,color:#000
    style C fill:#fff3e0,stroke:#f57c00,stroke-width:3px,color:#000
    style F fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px,color:#000
    style K fill:#e8f5e9,stroke:#388e3c,stroke-width:3px,color:#000
    style P fill:#c8e6c9,stroke:#2e7d32,stroke-width:3px,color:#000
    style E fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,color:#000
    style I fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,color:#000
    style J fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000</code></pre>
<h3 id="plan-components">Plan Components<a class="headerlink" href="#plan-components" title="Link to this section">Â¶</a></h3>
<pre class="mermaid"><code>graph LR
    subgraph "ğŸ“‹ Plan Contents"
        PC1[â• Added Models&lt;br/&gt;âœ¨ New models to create]
        PC2[â– Removed Models&lt;br/&gt;ğŸ—‘ï¸ Models to delete]
        PC3[âœï¸ Modified Models&lt;br/&gt;ğŸ“ With diffs]
        PC4[ğŸ”— Indirectly Affected&lt;br/&gt;ğŸ“Š Downstream models]
        PC5[ğŸ“… Backfill Requirements&lt;br/&gt;ğŸ“† Date ranges]
    end

    subgraph "ğŸ·ï¸ Change Types"
        CT1[ğŸ”´ Breaking Change&lt;br/&gt;âš ï¸ Requires downstream backfill&lt;br/&gt;ğŸ’¥ Cascading impact]
        CT2[ğŸŸ¢ Non-Breaking Change&lt;br/&gt;âœ… Only direct model backfill&lt;br/&gt;ğŸ¯ Isolated impact]
        CT3[ğŸŸ¡ Forward-Only&lt;br/&gt;â™»ï¸ Reuses existing tables&lt;br/&gt;ğŸ’° Cost-effective]
    end

    PC3 --&gt;|"ğŸ”´"| CT1
    PC3 --&gt;|"ğŸŸ¢"| CT2
    PC3 --&gt;|"ğŸŸ¡"| CT3
    PC4 --&gt;|"ğŸ”´"| CT1

    style PC1 fill:#e8f5e9,stroke:#388e3c,stroke-width:2px,color:#000
    style PC2 fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
    style PC3 fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    style PC4 fill:#e1f5fe,stroke:#0277bd,stroke-width:2px,color:#000
    style PC5 fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    style CT1 fill:#ffebee,stroke:#d32f2f,stroke-width:3px,color:#000
    style CT2 fill:#e8f5e9,stroke:#388e3c,stroke-width:3px,color:#000
    style CT3 fill:#fff9c4,stroke:#fbc02d,stroke-width:3px,color:#000</code></pre>
<p>During plan creation:</p>
<ul>
<li>The local state of the Vulcan project is compared to the state of a target environment. The difference between the two and the actions needed to synchronize the environment with the local state are what constitutes a plan.</li>
<li>Users may be prompted to <a href="#change-categories">categorize changes</a> to existing models so Vulcan can determine what actions to take for indirectly affected models (the downstream models that depend on the updated models). By default, Vulcan attempts to categorize changes automatically, but this behavior can be changed through <a href="../configurations-old/configuration.md#plan">configuration</a>.</li>
<li>Each plan requires a date range to which it will be applied. If not specified, the date range is derived automatically based on model definitions and the target environment.</li>
</ul>
<p>The benefit of plans is that all changes can be reviewed and verified before they are applied to the data warehouse and any computations are performed. A typical plan contains a combination of the following:</p>
<ul>
<li>A list of added models</li>
<li>A list of removed models</li>
<li>A list of directly modified models and a text diff of changes that have been made</li>
<li>A list of indirectly modified models</li>
<li>Missing data intervals for affected models</li>
<li>A date range that will be affected by the plan application</li>
</ul>
<p>To create a new plan, run the following command:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span><span class="o">[</span>environment<span class="w"> </span>name<span class="o">]</span>
</span></code></pre></div><p></p>
<p>If no environment name is specified, the plan is generated for the <code>prod</code> environment.</p>
<h2 id="change-categories">Change categories<a class="headerlink" href="#change-categories" title="Link to this section">Â¶</a></h2>
<p>Categories only need to be provided for models that have been modified directly. The categorization of indirectly modified downstream models is inferred based on the types of changes to the directly modified models.</p>
<p>If more than one upstream dependency of an indirectly modified model has been modified and they have conflicting categories, the most conservative category (breaking) is assigned to this model.</p>
<h3 id="change-propagation-flow">Change Propagation Flow<a class="headerlink" href="#change-propagation-flow" title="Link to this section">Â¶</a></h3>
<p>The following diagram illustrates how changes propagate through the dependency graph:</p>
<pre class="mermaid"><code>graph TD
    subgraph "ğŸ“Š Model Dependencies"
        A[ğŸ“¥ raw.raw_orders&lt;br/&gt;â¬†ï¸ Upstream]
        B[ğŸ“Š sales.daily_sales&lt;br/&gt;ğŸ”„ Midstream]
        C[ğŸ“ˆ sales.weekly_sales&lt;br/&gt;â¬‡ï¸ Downstream]
        D[ğŸ“‰ analytics.revenue_report&lt;br/&gt;â¬‡ï¸ Downstream]
    end

    subgraph "ğŸŸ¢ Scenario 1: Non-Breaking Change"
        NB1[â• Add column to daily_sales&lt;br/&gt;âœ¨ New column added]
        NB2[âœ… Only daily_sales backfilled&lt;br/&gt;ğŸ”„ Single model update]
        NB3[â­ï¸ weekly_sales NOT affected&lt;br/&gt;âœ… No cascade]
        NB4[â­ï¸ revenue_report NOT affected&lt;br/&gt;âœ… No cascade]
    end

    subgraph "ğŸ”´ Scenario 2: Breaking Change"
        BC1[ğŸ” Add WHERE clause to daily_sales&lt;br/&gt;âš ï¸ Filter logic changed]
        BC2[ğŸ”„ daily_sales backfilled&lt;br/&gt;ğŸ“Š Data reprocessed]
        BC3[ğŸ”„ weekly_sales backfilled&lt;br/&gt;ğŸ”´ Indirect Breaking&lt;br/&gt;ğŸ’¥ Cascading impact]
        BC4[ğŸ”„ revenue_report backfilled&lt;br/&gt;ğŸ”´ Indirect Breaking&lt;br/&gt;ğŸ’¥ Cascading impact]
    end

    A --&gt;|"ğŸ“¤"| B
    B --&gt;|"ğŸ“¤"| C
    B --&gt;|"ğŸ“¤"| D

    NB1 --&gt;|"âœï¸"| B
    B --&gt;|"âœ…"| NB2
    NB2 -.-&gt;|"â­ï¸ No cascade"| C
    NB2 -.-&gt;|"â­ï¸ No cascade"| D

    BC1 --&gt;|"âš ï¸"| B
    B --&gt;|"ğŸ”„"| BC2
    BC2 --&gt;|"ğŸ’¥ Cascade"| BC3
    BC2 --&gt;|"ğŸ’¥ Cascade"| BC4
    BC3 --&gt;|"ğŸ”„"| C
    BC4 --&gt;|"ğŸ”„"| D

    style A fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style B fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    style C fill:#e1f5fe,stroke:#0277bd,stroke-width:2px,color:#000
    style D fill:#e1f5fe,stroke:#0277bd,stroke-width:2px,color:#000
    style NB1 fill:#e8f5e9,stroke:#388e3c,stroke-width:3px,color:#000
    style NB2 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style NB3 fill:#f1f8e9,stroke:#558b2f,stroke-width:2px,color:#000
    style NB4 fill:#f1f8e9,stroke:#558b2f,stroke-width:2px,color:#000
    style BC1 fill:#ffebee,stroke:#d32f2f,stroke-width:3px,color:#000
    style BC2 fill:#ffcdd2,stroke:#c62828,stroke-width:2px,color:#000
    style BC3 fill:#ffcdd2,stroke:#c62828,stroke-width:2px,color:#000
    style BC4 fill:#ffcdd2,stroke:#c62828,stroke-width:2px,color:#000</code></pre>
<h3 id="breaking-change">Breaking change<a class="headerlink" href="#breaking-change" title="Link to this section">Â¶</a></h3>
<p>If a directly modified model change is categorized as breaking, it and its downstream dependencies will be backfilled.</p>
<p>In general, this is the safest option because it guarantees all downstream dependencies will reflect the change. However, it is a more expensive option because it involves additional data reprocessing, which has a runtime cost associated with it (refer to <a href="#backfilling">backfilling</a>).</p>
<p>Choose this option when a change has been made to a model's logic that has a functional impact on its downstream dependencies. For example, adding or modifying a model's <code>WHERE</code> clause is a breaking change because downstream models contain rows that would now be filtered out.</p>
<h3 id="non-breaking-change">Non-breaking change<a class="headerlink" href="#non-breaking-change" title="Link to this section">Â¶</a></h3>
<p>A directly-modified model that is classified as non-breaking will be backfilled, but its downstream dependencies will not.</p>
<p>This is a common choice in scenarios such as an addition of a new column, an action which doesn't affect downstream models, as new columns can't be used by downstream models without modifying them directly to select the column.</p>
<p>If any downstream models contain a <code>select *</code> from the model, Vulcan attempts to infer breaking status on a best-effort basis. We recommend explicitly specifying a query's columns to avoid unnecessary recomputation.</p>
<h3 id="summary">Summary<a class="headerlink" href="#summary" title="Link to this section">Â¶</a></h3>
<table>
<thead>
<tr>
<th>Change Category</th>
<th>Change Type</th>
<th>Behaviour</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#breaking-change">Breaking</a></td>
<td><a href="../glossary/#direct-modification">Direct</a> or <a href="../glossary/#indirect-modification">Indirect</a></td>
<td><a href="../glossary/#backfill">Backfill</a></td>
</tr>
<tr>
<td><a href="#non-breaking-change">Non-breaking</a></td>
<td><a href="../glossary/#direct-modification">Direct</a></td>
<td><a href="../glossary/#backfill">Backfill</a></td>
</tr>
<tr>
<td><a href="#non-breaking-change">Non-breaking</a></td>
<td><a href="../glossary/#indirect-modification">Indirect</a></td>
<td><a href="../glossary/#backfill">No Backfill</a></td>
</tr>
</tbody>
</table>
<h2 id="forward-only-change">Forward-only change<a class="headerlink" href="#forward-only-change" title="Link to this section">Â¶</a></h2>
<p>In addition to categorizing a change as breaking or non-breaking, it can also be classified as forward-only.</p>
<p>A model change classified as forward-only will continue to use the existing physical table once the change is deployed to production (the <code>prod</code> environment). This means that no backfill will take place.</p>
<p>While iterating on forward-only changes in the development environment, the model's output will be stored in either a temporary table or a shallow clone of the production table if supported by the engine.</p>
<p>In either case the data produced this way in the development environment can only be used for preview and will <strong>not</strong> be reused once the change is deployed to production. See <a href="#forward-only-plans">Forward-only Plans</a> for more details.</p>
<p>This category is assigned by Vulcan automatically either when a user opts into using a <a href="#forward-only-plans">forward-only plan</a> or when a model is explicitly configured to be forward-only.</p>
<h2 id="plan-application">Plan application<a class="headerlink" href="#plan-application" title="Link to this section">Â¶</a></h2>
<p>Once a plan has been created and reviewed, it is then applied to the target <a href="../environments/">environment</a> in order for its changes to take effect.</p>
<p>Every time a model is changed as part of a plan, a new variant of this model gets created behind the scenes (a <a href="../architecture/snapshots/">snapshot</a> with a unique <a href="../architecture/snapshots/#fingerprinting">fingerprint</a> is assigned to it). In turn, each model variant's data is stored in a separate physical table. Data between different variants of the same model is never shared, except for <a href="#forward-only-plans">forward-only</a> plans.</p>
<p>When a plan is applied to an environment, the environment gets associated with the set of model variants that are part of that plan. In other words, each environment is a collection of references to model variants and the physical tables associated with them.</p>
<h3 id="model-versioning-architecture">Model Versioning Architecture<a class="headerlink" href="#model-versioning-architecture" title="Link to this section">Â¶</a></h3>
<p>The following diagram shows how model variants, physical tables, and environments relate:</p>
<pre class="mermaid"><code>graph TB
    subgraph "ğŸ“ Model Definitions"
        M1[ğŸ“Š Model: sales.daily_sales&lt;br/&gt;ğŸ”¢ Version 1&lt;br/&gt;âœ¨ Original]
        M2[ğŸ“Š Model: sales.daily_sales&lt;br/&gt;ğŸ”¢ Version 2 - Modified&lt;br/&gt;âœï¸ Updated]
    end

    subgraph "ğŸ”· Model Variants &amp; Snapshots"
        V1[ğŸ”· Variant 1&lt;br/&gt;ğŸ”‘ Fingerprint: abc123&lt;br/&gt;ğŸ“¸ Unique snapshot]
        V2[ğŸ”· Variant 2&lt;br/&gt;ğŸ”‘ Fingerprint: def456&lt;br/&gt;ğŸ“¸ Unique snapshot]
        S1[ğŸ“¸ Snapshot 1&lt;br/&gt;ğŸ” Immutable state]
        S2[ğŸ“¸ Snapshot 2&lt;br/&gt;ğŸ” Immutable state]
    end

    subgraph "ğŸ’¾ Physical Tables"
        T1[ğŸ—„ï¸ Physical Table 1&lt;br/&gt;ğŸ“¦ db.vulcan__sales.daily_sales__abc123&lt;br/&gt;ğŸ’¾ Actual data storage]
        T2[ğŸ—„ï¸ Physical Table 2&lt;br/&gt;ğŸ“¦ db.vulcan__sales.daily_sales__def456&lt;br/&gt;ğŸ’¾ Actual data storage]
    end

    subgraph "ğŸ‘ï¸ Virtual Layer Views"
        VL1[ğŸ” View: sales.daily_sales&lt;br/&gt;ğŸ‘ï¸ Points to Variant 1&lt;br/&gt;ğŸ”— Reference mapping]
        VL2[ğŸ” View: sales.daily_sales&lt;br/&gt;ğŸ‘ï¸ Points to Variant 2&lt;br/&gt;ğŸ”— Reference mapping]
    end

    subgraph "ğŸŒ Environments"
        PROD[ğŸš€ Production Environment&lt;br/&gt;âœ… References Variant 1&lt;br/&gt;ğŸŒ Live production data]
        DEV[ğŸ§ª Dev Environment&lt;br/&gt;ğŸ”¬ References Variant 2&lt;br/&gt;ğŸ§ª Testing environment]
    end

    M1 --&gt;|"âœ¨"| V1
    M2 --&gt;|"âœï¸"| V2
    V1 --&gt;|"ğŸ“¸"| S1
    V2 --&gt;|"ğŸ“¸"| S2
    S1 --&gt;|"ğŸ’¾"| T1
    S2 --&gt;|"ğŸ’¾"| T2
    T1 --&gt;|"ğŸ‘ï¸"| VL1
    T2 --&gt;|"ğŸ‘ï¸"| VL2
    PROD --&gt;|"ğŸ”—"| V1
    DEV --&gt;|"ğŸ”—"| V2

    style M1 fill:#e3f2fd,stroke:#1976d2,stroke-width:3px,color:#000
    style M2 fill:#fff3e0,stroke:#f57c00,stroke-width:3px,color:#000
    style V1 fill:#e8f5e9,stroke:#388e3c,stroke-width:2px,color:#000
    style V2 fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,color:#000
    style S1 fill:#f1f8e9,stroke:#558b2f,stroke-width:2px,color:#000
    style S2 fill:#f1f8e9,stroke:#558b2f,stroke-width:2px,color:#000
    style T1 fill:#e0f2f1,stroke:#00695c,stroke-width:2px,color:#000
    style T2 fill:#e0f2f1,stroke:#00695c,stroke-width:2px,color:#000
    style VL1 fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    style VL2 fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    style PROD fill:#c8e6c9,stroke:#2e7d32,stroke-width:3px,color:#000
    style DEV fill:#ffe082,stroke:#f9a825,stroke-width:3px,color:#000</code></pre>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="plans/model_versioning.png"><img alt="Each model variant gets its own physical table, while environments only contain references to these tables" src="plans/model_versioning.png"/></a></p>
<p><em>Each model variant gets its own physical table while environments only contain references to these tables.</em></p>
<p>This unique approach to understanding and applying changes is what enables Vulcan's Virtual Environments. It allows Vulcan to ensure complete isolation between environments while allowing it to share physical data assets between environments when appropriate and safe to do so.</p>
<p>Additionally, since each model change is captured in a separate physical table, reverting to a previous version becomes a simple and quick operation (refer to <a href="#virtual-update">Virtual Update</a>) as long as its physical table hasn't been garbage collected by the janitor process.</p>
<p>Vulcan makes it easy to be correct and really hard to accidentally and irreversibly break things.</p>
<h3 id="backfilling">Backfilling<a class="headerlink" href="#backfilling" title="Link to this section">Â¶</a></h3>
<p>Despite all the benefits, the approach described above is not without trade-offs.</p>
<p>When a new model version is just created, a physical table assigned to it is empty. Therefore, Vulcan needs to re-apply the logic of the new model version to the entire date range of this model in order to populate the new version's physical table. This process is called backfilling.</p>
<p>We use the term backfilling broadly to describe any situation in which a model is updated. That includes these operations:</p>
<ul>
<li>When a VIEW model is created</li>
<li>When a FULL model is built</li>
<li>When an INCREMENTAL model is built for the first time</li>
<li>When an INCREMENTAL model has recent data appended to it</li>
<li>When an INCREMENTAL model has older data inserted (i.e., resolving a data gap or prepending historical data)</li>
</ul>
<p>Note for incremental models: despite the fact that backfilling can happen incrementally (see <code>batch_size</code> parameter on models), there is an extra cost associated with this operation due to additional runtime involved. If the runtime cost is a concern, use a <a href="#forward-only-plans">forward-only plan</a> instead.</p>
<h3 id="virtual-update">Virtual Update<a class="headerlink" href="#virtual-update" title="Link to this section">Â¶</a></h3>
<p>A benefit of Vulcan's approach is that data for a new model version can be fully pre-built while still in a development environment. That way all changes and their downstream dependencies can be fully previewed before they are promoted to the production environment.</p>
<p>With this approach, the process of promoting a change to production is reduced to reference swapping.</p>
<p>If during plan creation no data gaps have been detected and only references to new model versions need to be updated, then the update is referred to as a Virtual Update. Virtual Updates impose no additional runtime overhead or cost.</p>
<h3 id="start-and-end-dates">Start and end dates<a class="headerlink" href="#start-and-end-dates" title="Link to this section">Â¶</a></h3>
<p>The <code>plan</code> command provides two temporal options: <code>--start</code> and <code>--end</code>. These options are only applicable to plans for non-prod environments.</p>
<p>For context, every model has a start date. The start can be specified in <a href="../../components/model/overview/#start">the model definition</a>, in the <a href="guides-old/configuration.md#model-defaults">project configuration's <code>model_defaults</code></a>, or by Vulcan's default value of yesterday.</p>
<p>Because the prod environment supports business operations, prod plans ensure every model is backfilled from its start date until the most recent completed time interval. Due to that restriction, the <code>plan</code> command's <code>--start</code> and <code>--end</code> options are not supported for regular plans against prod. The options are supported for <a href="#restatement-plans">restatement plans</a> against prod to allow re-processing a subset of existing data.</p>
<p>Non-prod plans are typically used for development, so their models can optionally be backfilled for any date range with the <code>--start</code> and <code>--end</code> options. Limiting the date range makes backfills faster and development more efficient, especially for incremental models using large tables.</p>
<h4 id="model-kind-limitations">Model kind limitations<a class="headerlink" href="#model-kind-limitations" title="Link to this section">Â¶</a></h4>
<p>Some model kinds do not support backfilling a limited date range.</p>
<p>For context, Vulcan strives to make models <em>idempotent</em>, meaning that if we ran them multiple times we would get the same correct result every time.</p>
<p>However, some model kinds are inherently non-idempotent:</p>
<ul>
<li><a href="components/model/model_kinds.md#incremental_by_unique_key">INCREMENTAL_BY_UNIQUE_KEY</a></li>
<li><a href="components/model/model_kinds.md#incremental_by_partition">INCREMENTAL_BY_PARTITION</a></li>
<li><a href="components/model/model_kinds.md#scd-type-2-by-time-recommended">SCD_TYPE_2_BY_TIME</a></li>
<li><a href="components/model/model_kinds.md#scd-type-2-by-column">SCD_TYPE_2_BY_COLUMN</a></li>
<li>Any model whose query is self-referential (i.e., the contents of new data rows are affected by the data rows already present in the table)</li>
</ul>
<p>Those model kinds will behave as follows in a non-prod plan that specifies a limited date range:</p>
<ul>
<li>If the <code>--start</code> option date is the same as or before the model's start date, the model is fully refreshed for all of time</li>
<li>If the <code>--start</code> option date is after the model's start date, only a preview is computed for this model which can't be reused when deploying to production</li>
</ul>
<h4 id="example">Example<a class="headerlink" href="#example" title="Link to this section">Â¶</a></h4>
<p>Consider a Vulcan project with a default start date of 2024-09-20.</p>
<p>It contains the following <code>INCREMENTAL_BY_UNIQUE_KEY</code> model that specifies an explicit start date of 2024-09-23:</p>
<div class="language-sql highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">vulcan_example</span><span class="p">.</span><span class="n">start_end_model</span><span class="p">,</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">  </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_UNIQUE_KEY</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="n">unique_key</span><span class="w"> </span><span class="n">item_id</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">  </span><span class="p">),</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="hll"><span class="w">  </span><span class="k">start</span><span class="w"> </span><span class="s1">'2024-09-23'</span>
</span></span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="p">);</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="k">SELECT</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">  </span><span class="n">item_id</span><span class="p">,</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">  </span><span class="n">num_orders</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="k">FROM</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">  </span><span class="n">vulcan_example</span><span class="p">.</span><span class="n">full_model</span>
</span></code></pre></div></td></tr></tbody></table></div>
<p>When we run the project's first plan, we see that Vulcan correctly detected a different start date for our <code>start_end_model</code> than the other models (which have the project default start of 2024-09-20):</p>
<div class="language-bash highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a>â¯<span class="w"> </span>vulcan<span class="w"> </span><span class="nv">plan</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="o">======================================================================</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a>Successfully<span class="w"> </span>Ran<span class="w"> </span><span class="m">1</span><span class="w"> </span>tests<span class="w"> </span>against<span class="w"> </span>duckdb
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a>----------------------------------------------------------------------
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="sb">`</span>prod<span class="sb">`</span><span class="w"> </span>environment<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>initialized
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a>Models:
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8"></a>â””â”€â”€<span class="w"> </span>Added:
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">    </span>â”œâ”€â”€<span class="w"> </span>vulcan_example.full_model
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">    </span>â”œâ”€â”€<span class="w"> </span>vulcan_example.incremental_model
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">    </span>â”œâ”€â”€<span class="w"> </span>vulcan_example.seed_model
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">    </span>â””â”€â”€<span class="w"> </span>vulcan_example.start_end_model
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13"></a>Models<span class="w"> </span>needing<span class="w"> </span>backfill<span class="w"> </span><span class="o">(</span>missing<span class="w"> </span>dates<span class="o">)</span>:
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14"></a>â”œâ”€â”€<span class="w"> </span>vulcan_example.full_model:<span class="w"> </span><span class="m">2024</span>-09-20<span class="w"> </span>-<span class="w"> </span><span class="m">2024</span>-09-26
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15"></a>â”œâ”€â”€<span class="w"> </span>vulcan_example.incremental_model:<span class="w"> </span><span class="m">2024</span>-09-20<span class="w"> </span>-<span class="w"> </span><span class="m">2024</span>-09-26
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16"></a>â”œâ”€â”€<span class="w"> </span>vulcan_example.seed_model:<span class="w"> </span><span class="m">2024</span>-09-20<span class="w"> </span>-<span class="w"> </span><span class="m">2024</span>-09-26
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="hll">â””â”€â”€<span class="w"> </span>vulcan_example.start_end_model:<span class="w"> </span><span class="m">2024</span>-09-23<span class="w"> </span>-<span class="w"> </span><span class="m">2024</span>-09-26
</span></span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18"></a>Apply<span class="w"> </span>-<span class="w"> </span>Backfill<span class="w"> </span>Tables<span class="w"> </span><span class="o">[</span>y/n<span class="o">]</span>:
</span></code></pre></div></td></tr></tbody></table></div>
<p>After executing that plan, we add columns to both the <code>incremental_model</code> and <code>start_end_model</code> queries.</p>
<p>We then execute <code>vulcan plan dev</code> to create the new <code>dev</code> environment:</p>
<div class="language-bash highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span>
<span class="normal"><a href="#__codelineno-3-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a>â¯<span class="w"> </span>vulcan<span class="w"> </span>plan<span class="w"> </span><span class="nv">dev</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="o">======================================================================</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a>Successfully<span class="w"> </span>Ran<span class="w"> </span><span class="m">1</span><span class="w"> </span>tests<span class="w"> </span>against<span class="w"> </span>duckdb
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a>----------------------------------------------------------------------
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a>New<span class="w"> </span>environment<span class="w"> </span><span class="sb">`</span>dev<span class="sb">`</span><span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>created<span class="w"> </span>from<span class="w"> </span><span class="sb">`</span>prod<span class="sb">`</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7"></a>Differences<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span><span class="sb">`</span>prod<span class="sb">`</span><span class="w"> </span>environment:
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8"></a>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9"></a>Models:
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10"></a>â”œâ”€â”€<span class="w"> </span>Directly<span class="w"> </span>Modified:
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11"></a>â”‚<span class="w">   </span>â”œâ”€â”€<span class="w"> </span>vulcan_example__dev.start_end_model
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12"></a>â”‚<span class="w">   </span>â””â”€â”€<span class="w"> </span>vulcan_example__dev.incremental_model
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13"></a>â””â”€â”€<span class="w"> </span>Indirectly<span class="w"> </span>Modified:
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="w">    </span>â””â”€â”€<span class="w"> </span>vulcan_example__dev.full_model
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15"></a>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="o">[</span>...model<span class="w"> </span>diff<span class="w"> </span>omitted...<span class="o">]</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17"></a>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18"></a>Directly<span class="w"> </span>Modified:<span class="w"> </span>vulcan_example__dev.incremental_model<span class="w"> </span><span class="o">(</span>Non-breaking<span class="o">)</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19"></a>â””â”€â”€<span class="w"> </span>Indirectly<span class="w"> </span>Modified<span class="w"> </span>Children:
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20"></a><span class="w">    </span>â””â”€â”€<span class="w"> </span>vulcan_example__dev.full_model<span class="w"> </span><span class="o">(</span>Indirect<span class="w"> </span>Non-breaking<span class="o">)</span>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21"></a>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="o">[</span>...model<span class="w"> </span>diff<span class="w"> </span>omitted...<span class="o">]</span>
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23"></a><span class="hll">
</span></span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24"></a><span class="hll">Directly<span class="w"> </span>Modified:<span class="w"> </span>vulcan_example__dev.start_end_model<span class="w"> </span><span class="o">(</span>Non-breaking<span class="o">)</span>
</span></span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25"></a><span class="hll">Models<span class="w"> </span>needing<span class="w"> </span>backfill<span class="w"> </span><span class="o">(</span>missing<span class="w"> </span>dates<span class="o">)</span>:
</span></span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26"></a><span class="hll">â”œâ”€â”€<span class="w"> </span>vulcan_example__dev.incremental_model:<span class="w"> </span><span class="m">2024</span>-09-20<span class="w"> </span>-<span class="w"> </span><span class="m">2024</span>-09-26
</span></span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27"></a>â””â”€â”€<span class="w"> </span>vulcan_example__dev.start_end_model:<span class="w"> </span><span class="m">2024</span>-09-23<span class="w"> </span>-<span class="w"> </span><span class="m">2024</span>-09-26
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28"></a>Enter<span class="w"> </span>the<span class="w"> </span>backfill<span class="w"> </span>start<span class="w"> </span>date<span class="w"> </span><span class="o">(</span>eg.<span class="w"> </span><span class="s1">'1 year'</span>,<span class="w"> </span><span class="s1">'2020-01-01'</span><span class="o">)</span><span class="w"> </span>or<span class="w"> </span>blank<span class="w"> </span>to<span class="w"> </span>backfill<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>beginning<span class="w"> </span>of<span class="w"> </span>history:
</span></code></pre></div></td></tr></tbody></table></div>
<p>Note two things about the output:</p>
<ol>
<li>As before, Vulcan displays the complete backfill time range for each model, using the project default start of 2024-09-20 for <code>incremental_model</code> and 2024-09-23 for <code>start_end_model</code></li>
<li>Vulcan prompted us for a backfill start date because we didn't pass the <code>--start</code> option to the <code>vulcan plan dev</code> command</li>
</ol>
<p>Let's cancel that plan and start a new one, passing a start date of 2024-09-24.</p>
<p>The <code>start_end_model</code> is of kind <code>INCREMENTAL_BY_UNIQUE_KEY</code>, which is non-idempotent and cannot be backfilled for a limited time range.</p>
<p>Because the command's <code>--start</code> of 2024-09-24 is after <code>start_end_model</code>'s start date 2024-09-23, <code>start_end_model</code> is marked as preview:</p>
<div class="language-bash highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a>â¯<span class="w"> </span>vulcan<span class="w"> </span>plan<span class="w"> </span>dev<span class="w"> </span>--start<span class="w"> </span><span class="m">2024</span>-09-24
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="o">======================================================================</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a>Successfully<span class="w"> </span>Ran<span class="w"> </span><span class="m">1</span><span class="w"> </span>tests<span class="w"> </span>against<span class="w"> </span>duckdb
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a>----------------------------------------------------------------------
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a>New<span class="w"> </span>environment<span class="w"> </span><span class="sb">`</span>dev<span class="sb">`</span><span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>created<span class="w"> </span>from<span class="w"> </span><span class="sb">`</span>prod<span class="sb">`</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a>Differences<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span><span class="sb">`</span>prod<span class="sb">`</span><span class="w"> </span>environment:
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9"></a>Models:
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10"></a>â”œâ”€â”€<span class="w"> </span>Directly<span class="w"> </span>Modified:
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11"></a>â”‚<span class="w">   </span>â”œâ”€â”€<span class="w"> </span>vulcan_example__dev.start_end_model
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="hll">â”‚<span class="w">   </span>â””â”€â”€<span class="w"> </span>vulcan_example__dev.incremental_model
</span></span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="hll">â””â”€â”€<span class="w"> </span>Indirectly<span class="w"> </span>Modified:
</span></span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">    </span>â””â”€â”€<span class="w"> </span>vulcan_example__dev.full_model
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15"></a>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="o">[</span>...model<span class="w"> </span>diff<span class="w"> </span>omitted...<span class="o">]</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17"></a>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18"></a>Directly<span class="w"> </span>Modified:<span class="w"> </span>vulcan_example__dev.start_end_model<span class="w"> </span><span class="o">(</span>Non-breaking<span class="o">)</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19"></a>Models<span class="w"> </span>needing<span class="w"> </span>backfill<span class="w"> </span><span class="o">(</span>missing<span class="w"> </span>dates<span class="o">)</span>:
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="hll">â”œâ”€â”€<span class="w"> </span>vulcan_example__dev.incremental_model:<span class="w"> </span><span class="m">2024</span>-09-24<span class="w"> </span>-<span class="w"> </span><span class="m">2024</span>-09-26
</span></span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="hll">â””â”€â”€<span class="w"> </span>vulcan_example__dev.start_end_model:<span class="w"> </span><span class="m">2024</span>-09-24<span class="w"> </span>-<span class="w"> </span><span class="m">2024</span>-09-26<span class="w"> </span><span class="o">(</span>preview<span class="o">)</span>
</span></span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22"></a>Enter<span class="w"> </span>the<span class="w"> </span>backfill<span class="w"> </span>end<span class="w"> </span>date<span class="w"> </span><span class="o">(</span>eg.<span class="w"> </span><span class="s1">'1 month ago'</span>,<span class="w"> </span><span class="s1">'2020-01-01'</span><span class="o">)</span><span class="w"> </span>or<span class="w"> </span>blank<span class="w"> </span>to<span class="w"> </span>backfill<span class="w"> </span>up<span class="w"> </span><span class="k">until</span><span class="w"> </span><span class="s1">'2024-09-27 00:00:00'</span>:
</span></code></pre></div></td></tr></tbody></table></div>
<h4 id="minimum-intervals">Minimum intervals<a class="headerlink" href="#minimum-intervals" title="Link to this section">Â¶</a></h4>
<p>When you run a plan with a fixed <code>--start</code> or <code>--end</code> date, you create a virtual data environment with a limited subset of data. However, if the time range specified is less than the size of an interval on one of your models, that model will be skipped by default.</p>
<p>For example, if you have a model like so:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="n">MODEL</span><span class="p">(</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="n">vulcan_example</span><span class="p">.</span><span class="n">monthly_model</span><span class="p">,</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">        </span><span class="n">time_column</span><span class="w"> </span><span class="k">month</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="p">),</span>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">    </span><span class="n">cron</span><span class="w"> </span><span class="s1">'@monthly'</span>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="p">);</span>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a>
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="k">SELECT</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">sum_a</span><span class="p">,</span><span class="w"> </span><span class="k">MONTH</span><span class="p">(</span><span class="k">day</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">month</span>
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="k">FROM</span><span class="w"> </span><span class="n">vulcan_example</span><span class="p">.</span><span class="n">upstream_model</span>
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="k">WHERE</span><span class="w"> </span><span class="k">day</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="o">@</span><span class="n">start_ds</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="o">@</span><span class="n">end_ds</span>
</span></code></pre></div>
<p>make a change to it and run the following:</p>
<div class="language-bash highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span>
<span class="normal"><a href="#__codelineno-6-5">5</a></span>
<span class="normal"><a href="#__codelineno-6-6">6</a></span>
<span class="normal"><a href="#__codelineno-6-7">7</a></span>
<span class="normal"><a href="#__codelineno-6-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a>$<span class="w"> </span>vulcan<span class="w"> </span>plan<span class="w"> </span>dev<span class="w"> </span>--start<span class="w"> </span><span class="s1">'1 day ago'</span><span class="w"> </span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a>Models:
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4"></a>â””â”€â”€<span class="w"> </span>Added:
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">    </span>â””â”€â”€<span class="w"> </span>vulcan_example__dev.monthly_model
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6"></a>Apply<span class="w"> </span>-<span class="w"> </span>Virtual<span class="w"> </span>Update<span class="w"> </span><span class="o">[</span>y/n<span class="o">]</span>:<span class="w"> </span>y
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7"></a>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="hll">SKIP:<span class="w"> </span>No<span class="w"> </span>model<span class="w"> </span>batches<span class="w"> </span>to<span class="w"> </span>execute
</span></span></code></pre></div></td></tr></tbody></table></div>
<p>No data will be backfilled because <code>1 day ago</code> does not contain a complete month. However, you can use the <code>--min-intervals</code> option to override this behaviour like so:</p>
<div class="language-bash highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a>$<span class="w"> </span>vulcan<span class="w"> </span>plan<span class="w"> </span>dev<span class="w"> </span>--start<span class="w"> </span><span class="s1">'1 day ago'</span><span class="w"> </span>--min-intervals<span class="w"> </span><span class="m">1</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a>Models:
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4"></a>â””â”€â”€<span class="w"> </span>Added:
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">    </span>â””â”€â”€<span class="w"> </span>vulcan_example__dev.monthly_model
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6"></a>Apply<span class="w"> </span>-<span class="w"> </span>Virtual<span class="w"> </span>Update<span class="w"> </span><span class="o">[</span>y/n<span class="o">]</span>:<span class="w"> </span>y
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7"></a>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="o">[</span><span class="m">1</span>/1<span class="o">]</span><span class="w"> </span>vulcan_example__dev.monthly_model<span class="w">   </span><span class="o">[</span>insert<span class="w"> </span><span class="m">2025</span>-06-01<span class="w"> </span>-<span class="w"> </span><span class="m">2025</span>-06-30<span class="o">]</span><span class="w">   </span><span class="m">0</span>.08s<span class="w">   </span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9"></a>Executing<span class="w"> </span>model<span class="w"> </span>batches<span class="w"> </span>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<span class="w"> </span><span class="m">100</span>.0%<span class="w"> </span>â€¢<span class="w"> </span><span class="m">1</span>/1<span class="w"> </span>â€¢<span class="w"> </span><span class="m">0</span>:00:00<span class="w">                                                             </span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10"></a>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="hll">âœ”<span class="w"> </span>Model<span class="w"> </span>batches<span class="w"> </span>executed
</span></span></code></pre></div></td></tr></tbody></table></div>
<p>This will ensure that regardless of the plan <code>--start</code> date, all added or modified models will have at least <code>--min-intervals</code> intervals considered for backfill.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If you are running plans manually you can just adjust the <code>--start</code> date to be wide enough to cover the models in question.</p>
<p>The <code>--min-intervals</code> option is primarily intended for automation scenarios where the plan is always run with a default relative start date and you always want (for example) "2 weeks worth of data" in the target environment.</p>
</div>
<h3 id="data-preview-for-forward-only-changes">Data preview for forward-only changes<a class="headerlink" href="#data-preview-for-forward-only-changes" title="Link to this section">Â¶</a></h3>
<p>As mentioned earlier, the data output produced by <a href="#forward-only-change">forward-only changes</a> in a development environment can only be used for preview and will not be reused in production.</p>
<p>The same holds true for any subsequent changes that depend on undeployed forward-only changes - data can be previewed but can't be reused in production.</p>
<p>Backfills that are exclusively for preview purposes and will not be reused upon deployment to production are explicitly labeled with <code>(preview)</code> in the plan summary:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a>Models<span class="w"> </span>needing<span class="w"> </span>backfill<span class="w"> </span><span class="o">(</span>missing<span class="w"> </span>dates<span class="o">)</span>:
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>â”œâ”€â”€<span class="w"> </span>sushi__dev.customers:<span class="w"> </span><span class="m">2023</span>-12-22<span class="w"> </span>-<span class="w"> </span><span class="m">2023</span>-12-28<span class="w"> </span><span class="o">(</span>preview<span class="o">)</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>â”œâ”€â”€<span class="w"> </span>sushi__dev.waiter_revenue_by_day:<span class="w"> </span><span class="m">2023</span>-12-22<span class="w"> </span>-<span class="w"> </span><span class="m">2023</span>-12-28
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a>â”œâ”€â”€<span class="w"> </span>sushi__dev.top_waiters:<span class="w"> </span><span class="m">2023</span>-12-22<span class="w"> </span>-<span class="w"> </span><span class="m">2023</span>-12-28
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a>â””â”€â”€<span class="w"> </span>sushi__dev.waiter_as_customer_by_day:<span class="w"> </span><span class="m">2023</span>-12-22<span class="w"> </span>-<span class="w"> </span><span class="m">2023</span>-12-28<span class="w"> </span><span class="o">(</span>preview<span class="o">)</span>
</span></code></pre></div><p></p>
<h2 id="forward-only-plans">Forward-only plans<a class="headerlink" href="#forward-only-plans" title="Link to this section">Â¶</a></h2>
<p>Sometimes the runtime cost associated with rebuilding an entire physical table is too high and outweighs the benefits a separate table provides. This is when a forward-only plan comes in handy.</p>
<p>When a forward-only plan is applied to the <code>prod</code> environment, none of the plan's changed models will have new physical tables created for them. Instead, physical tables from previous model versions are reused.</p>
<p>The benefit of this is that no backfilling is required, so there is no runtime overhead or cost. The drawback is that reverting to a previous version is no longer simple and requires a combination of additional forward-only changes and <a href="#restatement-plans">restatements</a>.</p>
<p>Note that once a forward-only change is applied to <code>prod</code>, all development environments that referred to the previous versions of the updated models will be impacted.</p>
<p>A core component of the development process is to execute code and verify its behavior. To enable this while preserving isolation between environments, <code>vulcan plan [environment name]</code> evaluates code in non-<code>prod</code> environments while targeting shallow (a.k.a. "zero-copy") clones of production tables for engines that support them or newly created temporary physical tables for engines that don't.</p>
<p>This means that only a limited preview of changes is available in the development environment before the change is promoted to <code>prod</code>. The date range of the preview is provided as part of plan creation command.</p>
<p>Engines for which table cloning is supported include:</p>
<ul>
<li><code>BigQuery</code></li>
<li><code>Databricks</code></li>
<li><code>Snowflake</code></li>
</ul>
<p>Note that all changes made as part of a forward-only plan automatically get a <strong>forward-only</strong> category assigned to them. These types of changes can't be mixed together with <a href="#change-categories">breaking and non-breaking changes</a> within the same plan.</p>
<p>To create a forward-only plan, add the <code>--forward-only</code> option to the <code>plan</code> command:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span><span class="o">[</span>environment<span class="w"> </span>name<span class="o">]</span><span class="w"> </span>--forward-only
</span></code></pre></div><p></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>--forward-only</code> flag is not required when applying changes to models that have been explicitly configured as <a href="components/model/overview.md#forward_only">forward-only</a>.</p>
<p>Use it only if you need to provide a time range for the preview window or the <a href="#effective-date">effective date</a>.</p>
</div>
<h3 id="destructive-changes">Destructive changes<a class="headerlink" href="#destructive-changes" title="Link to this section">Â¶</a></h3>
<p>Some model changes destroy existing data in a table. Vulcan automatically detects and optionally prevents destructive changes to <a href="guides/incremental_by_time.md#forward-only-models">forward-only models</a> - learn more <a href="guides/incremental_by_time.md#destructive-changes">here</a>.</p>
<p>Forward-only plans treats all of the plan's model changes as forward-only. In these plans, Vulcan will check all modified incremental models for destructive schema changes, not just forward-only models.</p>
<p>Vulcan determines what to do for each model based on this setting hierarchy: </p>
<ul>
<li><strong>For destructive changes</strong>: the <a href="guides/incremental_by_time.md#schema-changes">model's <code>on_destructive_change</code> value</a> (if present), the <code>on_destructive_change</code> <a href="../configurations-old/configuration.md#model-defaults">model defaults</a> value (if present), and the Vulcan global default of <code>error</code></li>
<li><strong>For additive changes</strong>: the <a href="guides/incremental_by_time.md#schema-changes">model's <code>on_additive_change</code> value</a> (if present), the <code>on_additive_change</code> <a href="../configurations-old/configuration.md#model-defaults">model defaults</a> value (if present), and the Vulcan global default of <code>allow</code></li>
</ul>
<p>If you want to temporarily allow destructive changes to models that don't allow them, use the <code>plan</code> command's <code>--allow-destructive-model</code> selector to specify which models. 
Similarly, if you want to temporarily allow additive changes to models configured with <code>on_additive_change=error</code>, use the <code>--allow-additive-model</code> selector. </p>
<p>For example, to allow destructive changes to all models in the <code>analytics</code> schema:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>--forward-only<span class="w"> </span>--allow-destructive-model<span class="w"> </span><span class="s2">"analytics.*"</span>
</span></code></pre></div><p></p>
<p>Or to allow destructive changes to multiple specific models:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>--forward-only<span class="w"> </span>--allow-destructive-model<span class="w"> </span><span class="s2">"sales.revenue_model"</span><span class="w"> </span>--allow-destructive-model<span class="w"> </span><span class="s2">"marketing.campaign_model"</span>
</span></code></pre></div><p></p>
<p>Learn more about model selectors <a href="../../guides/model_selection/">here</a>.</p>
<h3 id="effective-date">Effective date<a class="headerlink" href="#effective-date" title="Link to this section">Â¶</a></h3>
<p>Changes that are part of the forward-only plan can also be applied retroactively to the production environment by specifying the effective date:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>--forward-only<span class="w"> </span>--effective-from<span class="w"> </span><span class="m">2023</span>-01-01
</span></code></pre></div>
<p>This way Vulcan will know to recompute data intervals starting from the specified date once forward-only changes are deployed to production.</p>
<h2 id="restatement-plans">Restatement plans<a class="headerlink" href="#restatement-plans" title="Link to this section">Â¶</a></h2>
<p>Models sometimes need to be re-evaluated for a given time range, even though the model definition has not changed.</p>
<p>For example, these scenarios all require re-evaluating model data that already exists:</p>
<ul>
<li>Correcting an upstream data issue by reprocessing some of a model's existing data</li>
<li>Retroactively applying a <a href="#forward-only-plans">forward-only plan</a> change to some historical data</li>
<li>Fully refreshing a model</li>
</ul>
<p>In Vulcan, reprocessing existing data is called a "restatement."</p>
<p>Restate one or more models' data with the <code>plan</code> command's <code>--restate-model</code> selector. The <a href="../../guides/model_selection/">selector</a> lets you specify which models to restate by name, wildcard, or tag (syntax <a href="#restatement-examples">below</a>).</p>
<div class="admonition warning">
<p class="admonition-title">No changes allowed</p>
<p>Unlike regular plans, restatement plans ignore changes to local files. They can only restate the model versions already in the target environment.</p>
<p>You cannot restate a new model - it must already be present in the target environment. If it's not, add it first by running <code>vulcan plan</code> without the <code>--restate-model</code> option.</p>
</div>
<p>Applying a restatement plan will trigger a cascading backfill for all selected models, as well as all models downstream from them. Models with restatement disabled will be skipped and not backfilled.</p>
<p>You may restate external models. An <a href="../../components/model/types/external_models/">external model</a> is just metadata about an external table, so the model does not actually reprocess anything. Instead, it triggers a cascading backfill of all downstream models.</p>
<p>The plan's <code>--start</code> and <code>--end</code> date options determine which data intervals will be reprocessed. Some model kinds cannot be backfilled for limited date ranges, though - learn more <a href="#model-kind-limitations">below</a>.</p>
<div class="admonition info">
<p class="admonition-title">Just catching up</p>
<p>Restatement plans "catch models up" to the latest time interval already processed in the environment. They cannot process additional intervals because the required data has not yet been processed upstream.</p>
<p>If you pass an <code>--end</code> date later than the environment's most recent time interval, Vulcan will just catch up to the environment and will ignore any additional intervals.</p>
</div>
<p>To prevent models from ever being restated, set the <a href="components/model/overview.md#disable_restatement">disable_restatement</a> attribute to <code>true</code>.</p>
<p><a name="restatement-examples"></a>
These examples demonstrate how to select which models to restate based on model names or model tags.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:5"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"/><input id="__tabbed_1_2" name="__tabbed_1" type="radio"/><input id="__tabbed_1_3" name="__tabbed_1" type="radio"/><input id="__tabbed_1_4" name="__tabbed_1" type="radio"/><input id="__tabbed_1_5" name="__tabbed_1" type="radio"/><div class="tabbed-labels"><label for="__tabbed_1_1">Names Only</label><label for="__tabbed_1_2">Upstream</label><label for="__tabbed_1_3">Wildcards</label><label for="__tabbed_1_4">Upstream + Wildcards</label><label for="__tabbed_1_5">Specific Date Range</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>--restate-model<span class="w"> </span><span class="s2">"db.model_a"</span><span class="w"> </span>--restate-model<span class="w"> </span><span class="s2">"tag:expensive"</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="c1"># All selected models (including upstream models) will also include their downstream models</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>--restate-model<span class="w"> </span><span class="s2">"+db.model_a"</span><span class="w"> </span>--restate-model<span class="w"> </span><span class="s2">"+tag:expensive"</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>--restate-model<span class="w"> </span><span class="s2">"db*"</span><span class="w"> </span>--restate-model<span class="w"> </span><span class="s2">"tag:exp*"</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>--restate-model<span class="w"> </span><span class="s2">"+db*"</span><span class="w"> </span>--restate-model<span class="w"> </span><span class="s2">"+tag:exp*"</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>--restate-model<span class="w"> </span><span class="s2">"db.model_a"</span><span class="w"> </span>--start<span class="w"> </span><span class="s2">"2024-01-01"</span><span class="w"> </span>--end<span class="w"> </span><span class="s2">"2024-01-10"</span>
</span></code></pre></div>
</div>
</div>
</div>
<h3 id="restating-production-vs-development">Restating production vs development<a class="headerlink" href="#restating-production-vs-development" title="Link to this section">Â¶</a></h3>
<p>Restatement plans behave differently depending on if you're targeting the <code>prod</code> environment or a <a href="concepts-old/environments.md#how-to-use-environments">development environment</a>.</p>
<p>If you target a development environment by including an environment name like <code>dev</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>dev<span class="w"> </span>--restate-model<span class="w"> </span><span class="s2">"db.model_a"</span><span class="w"> </span>--start<span class="w"> </span><span class="s2">"2024-01-01"</span><span class="w"> </span>--end<span class="w"> </span><span class="s2">"2024-01-10"</span>
</span></code></pre></div>
<p>the restatement plan will restate the requested intervals for the specified model in the <code>dev</code> environment. In other environments, the model will be unaffected.</p>
<p>However, if you target the <code>prod</code> environment by omitting an environment name:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>--restate-model<span class="w"> </span><span class="s2">"db.model_a"</span><span class="w"> </span>--start<span class="w"> </span><span class="s2">"2024-01-01"</span><span class="w"> </span>--end<span class="w"> </span><span class="s2">"2024-01-10"</span>
</span></code></pre></div>
<p>the restatement plan will restate the intervals in the <code>prod</code> table <em>and clear the model's time intervals from state in every other environment</em>.</p>
<p>The next time you do a run in <code>dev</code>, the intervals already reprocessed in <code>prod</code> are reprocessed in <code>dev</code> as well. This is to prevent old data from getting promoted to <code>prod</code> in the future.</p>
<p>This behavior also clears the affected intervals for downstream tables that only exist in development environments. Consider the following example:</p>
<ul>
<li>Table <code>A</code> exists in <code>prod</code></li>
<li>A virtual environment <code>dev</code> is created with new tables <code>B</code> and <code>C</code> downstream of <code>A</code><ul>
<li>the DAG in <code>prod</code> looks like <code>A</code></li>
<li>the DAG in <code>dev</code> looks like <code>A &lt;- B &lt;- C</code></li>
</ul>
</li>
<li>A restatement plan is executed against table <code>A</code> in <code>prod</code></li>
<li>Vulcan will clear the affected intervals for <code>B</code> and <code>C</code> in <code>dev</code> even though those tables do not exist in <code>prod</code></li>
</ul>
<div class="admonition info">
<p class="admonition-title">Bringing development environments up to date</p>
<p>A restatement plan against <code>prod</code> clears time intervals from state for models in development environments, but it does not trigger a run to reprocess those intervals.</p>
<p>Execute <code>vulcan run &lt;environment name&gt;</code> to trigger reprocessing in the development environment.</p>
<p>This is necessary because a <code>prod</code> restatement plan only does work in the <code>prod</code> environment for speed and efficiency.</p>
</div>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright Â© 2024 DataOS Vulcan Team<br/>
<small>Complete stack for building data products</small>
</div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/tmdc-io/vulcan-book" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-progress" data-md-component="progress" role="progressbar"></div>
<script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tracking", "navigation.indexes", "navigation.path", "navigation.top", "navigation.footer", "toc.follow", "search.highlight", "search.suggest", "search.share", "content.tabs.link", "content.code.copy", "content.code.annotate", "content.tooltips"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
<script src="../../assets/javascripts/mermaid-zoom.js"></script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>