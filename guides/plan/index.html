<!DOCTYPE html>
<html class="no-js" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Complete documentation for Vulcan - complete stack for building data products" name="description"/>
<meta content="DataOS Vulcan Team" name="author"/>
<link href="https://tmdc-io.github.io/vulcan-docs/guides/plan/" rel="canonical"/>
<link href="../../assets/images/vulcan.svg" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name="generator"/>
<title>Plan - DataOS Vulcan</title>
<link href="../../assets/stylesheets/main.484c7ddc.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
<link href="../../assets/stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
<body data-md-color-accent="blue-grey" data-md-color-primary="blue-grey" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#plan">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="DataOS Vulcan" class="md-header__button md-logo" data-md-component="logo" href="../.." title="DataOS Vulcan">
<img alt="logo" src="../../assets/images/vulcan-white.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DataOS Vulcan
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Plan
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="blue-grey" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="blue-grey" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="blue-grey" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="blue-grey" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/tmdc-io/vulcan-book" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    tmdc-io/vulcan-book
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DataOS Vulcan" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="DataOS Vulcan">
<img alt="logo" src="../../assets/images/vulcan-white.svg"/>
</a>
    DataOS Vulcan
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/tmdc-io/vulcan-book" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    tmdc-io/vulcan-book
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    
  
    About
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Configurations
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Configurations
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Options
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Options
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/model_defaults/">
<span class="md-ellipsis">
    
  
    Model Defaults
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/variables/">
<span class="md-ellipsis">
    
  
    Variables
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/execution_hooks/">
<span class="md-ellipsis">
    
  
    Execution Hooks
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/notifications/">
<span class="md-ellipsis">
    
  
    Notifications
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/linter/">
<span class="md-ellipsis">
    
  
    Linter
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Engines
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Engines
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/bigquery/bigquery/">
<span class="md-ellipsis">
    
  
    BigQuery
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/databricks/databricks/">
<span class="md-ellipsis">
    
  
    Databricks
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/fabric/fabric/">
<span class="md-ellipsis">
    
  
    Microsoft Fabric
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/mssql/mssql/">
<span class="md-ellipsis">
    
  
    Microsoft SQL Server
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/mysql/mysql/">
<span class="md-ellipsis">
    
  
    MySQL
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/postgres/postgres/">
<span class="md-ellipsis">
    
  
    Postgres
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/redshift/redshift/">
<span class="md-ellipsis">
    
  
    Amazon Redshift
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/snowflake/snowflake/">
<span class="md-ellipsis">
    
  
    Snowflake
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/trino/trino/">
<span class="md-ellipsis">
    
  
    Trino
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ci-cd/ci-cd/">
<span class="md-ellipsis">
    
  
    CI/CD
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Components
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Components
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Model
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Model
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/properties/">
<span class="md-ellipsis">
    
  
    Properties
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Types
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_1_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Types
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/types/sql_models/">
<span class="md-ellipsis">
    
  
    SQL
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/types/python_models/">
<span class="md-ellipsis">
    
  
    Python
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/types/external_models/">
<span class="md-ellipsis">
    
  
    External
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/types/managed_models/">
<span class="md-ellipsis">
    
  
    Managed
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/model_kinds/">
<span class="md-ellipsis">
    
  
    Kinds
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/statements/">
<span class="md-ellipsis">
    
  
    Statements
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/tests/tests/">
<span class="md-ellipsis">
    
  
    Tests
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/audits/audits/">
<span class="md-ellipsis">
    
  
    Audits
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/checks/checks/">
<span class="md-ellipsis">
    
  
    Checks
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Semantics
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Semantics
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/semantics/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/semantics/models/">
<span class="md-ellipsis">
    
  
    Semantic Models
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/semantics/business_metrics/">
<span class="md-ellipsis">
    
  
    Business Metrics
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Advance Features
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_6">
<span class="md-nav__icon md-icon"></span>
            
  
    Advance Features
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6_1" id="__nav_3_6_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Macros
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_6_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Macros
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/macros/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/macros/variables/">
<span class="md-ellipsis">
    
  
    Variables
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/macros/built_in/">
<span class="md-ellipsis">
    
  
    Built In
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/macros/jinja/">
<span class="md-ellipsis">
    
  
    Jinja
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/signals/">
<span class="md-ellipsis">
    
  
    Signals
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/custom_materializations/">
<span class="md-ellipsis">
    
  
    Custom materializations
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../get-started/docker/">
<span class="md-ellipsis">
    
  
    Get Started
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../plan_guide/">
<span class="md-ellipsis">
    
  
    Plan
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../run_and_scheduling/">
<span class="md-ellipsis">
    
  
    Run and Scheduling
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../models/">
<span class="md-ellipsis">
    
  
    Models
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../incremental_by_time/">
<span class="md-ellipsis">
    
  
    Incremental by Time
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../data_quality/">
<span class="md-ellipsis">
    
  
    Data Quality
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../model_selection/">
<span class="md-ellipsis">
    
  
    Model Selection
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../transpiling_semantics/">
<span class="md-ellipsis">
    
  
    Transpiling Semantics
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli-command/cli/">
<span class="md-ellipsis">
    
  
    CLI Commands
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cookbook/">
<span class="md-ellipsis">
    
  
    Cookbook
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../faq/">
<span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="On this page" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      On this page
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#plan-architecture">
<span class="md-ellipsis">
      
        Plan Architecture
      
    </span>
</a>
<nav aria-label="Plan Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#key-concepts-illustrated">
<span class="md-ellipsis">
      
        Key Concepts Illustrated
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-a-plan">
<span class="md-ellipsis">
      
        What is a Plan?
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#prerequisites">
<span class="md-ellipsis">
      
        Prerequisites
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scenario-1-first-plan-initializing-production">
<span class="md-ellipsis">
      
        Scenario 1: First Plan - Initializing Production
      
    </span>
</a>
<nav aria-label="Scenario 1: First Plan - Initializing Production" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-check-project-status">
<span class="md-ellipsis">
      
        Step 1: Check Project Status
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-create-your-first-plan">
<span class="md-ellipsis">
      
        Step 2: Create Your First Plan
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-the-output">
<span class="md-ellipsis">
      
        Understanding the Output
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-apply-the-plan">
<span class="md-ellipsis">
      
        Step 3: Apply the Plan
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#what-happened">
<span class="md-ellipsis">
      
        What Happened?
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scenario-2-adding-a-new-model">
<span class="md-ellipsis">
      
        Scenario 2: Adding a New Model
      
    </span>
</a>
<nav aria-label="Scenario 2: Adding a New Model" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-add-a-new-model">
<span class="md-ellipsis">
      
        Step 1: Add a New Model
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-create-plan-for-new-model">
<span class="md-ellipsis">
      
        Step 2: Create Plan for New Model
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-review-dependencies">
<span class="md-ellipsis">
      
        Step 3: Review Dependencies
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-4-apply-the-plan">
<span class="md-ellipsis">
      
        Step 4: Apply the Plan
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scenario-3-modifying-a-model-non-breaking-change">
<span class="md-ellipsis">
      
        Scenario 3: Modifying a Model - Non-Breaking Change
      
    </span>
</a>
<nav aria-label="Scenario 3: Modifying a Model - Non-Breaking Change" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-modify-the-model">
<span class="md-ellipsis">
      
        Step 1: Modify the Model
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-create-plan">
<span class="md-ellipsis">
      
        Step 2: Create Plan
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-non-breaking-changes">
<span class="md-ellipsis">
      
        Understanding Non-Breaking Changes
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-check-downstream-models">
<span class="md-ellipsis">
      
        Step 3: Check Downstream Models
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-4-apply-the-plan_1">
<span class="md-ellipsis">
      
        Step 4: Apply the Plan
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scenario-4-modifying-a-model-breaking-change">
<span class="md-ellipsis">
      
        Scenario 4: Modifying a Model - Breaking Change
      
    </span>
</a>
<nav aria-label="Scenario 4: Modifying a Model - Breaking Change" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-modify-the-model-with-a-filter">
<span class="md-ellipsis">
      
        Step 1: Modify the Model with a Filter
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-create-plan_1">
<span class="md-ellipsis">
      
        Step 2: Create Plan
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-breaking-changes">
<span class="md-ellipsis">
      
        Understanding Breaking Changes
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-apply-the-plan_1">
<span class="md-ellipsis">
      
        Step 3: Apply the Plan
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#what-happened_1">
<span class="md-ellipsis">
      
        What Happened?
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scenario-5-creating-a-development-environment">
<span class="md-ellipsis">
      
        Scenario 5: Creating a Development Environment
      
    </span>
</a>
<nav aria-label="Scenario 5: Creating a Development Environment" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-revert-your-changes">
<span class="md-ellipsis">
      
        Step 1: Revert Your Changes
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-apply-reverted-plan-to-production">
<span class="md-ellipsis">
      
        Step 2: Apply Reverted Plan to Production
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-create-development-environment">
<span class="md-ellipsis">
      
        Step 3: Create Development Environment
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-4-specify-date-range">
<span class="md-ellipsis">
      
        Step 4: Specify Date Range
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-5-apply-dev-plan">
<span class="md-ellipsis">
      
        Step 5: Apply Dev Plan
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-dev-environments">
<span class="md-ellipsis">
      
        Understanding Dev Environments
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-6-query-dev-environment">
<span class="md-ellipsis">
      
        Step 6: Query Dev Environment
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scenario-6-forward-only-plans">
<span class="md-ellipsis">
      
        Scenario 6: Forward-Only Plans
      
    </span>
</a>
<nav aria-label="Scenario 6: Forward-Only Plans" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-modify-model-for-forward-only">
<span class="md-ellipsis">
      
        Step 1: Modify Model for Forward-Only
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-create-forward-only-plan">
<span class="md-ellipsis">
      
        Step 2: Create Forward-Only Plan
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-forward-only-plans">
<span class="md-ellipsis">
      
        Understanding Forward-Only Plans
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-apply-forward-only-plan">
<span class="md-ellipsis">
      
        Step 3: Apply Forward-Only Plan
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#benefits-of-forward-only">
<span class="md-ellipsis">
      
        Benefits of Forward-Only
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scenario-7-restatement-plans">
<span class="md-ellipsis">
      
        Scenario 7: Restatement Plans
      
    </span>
</a>
<nav aria-label="Scenario 7: Restatement Plans" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-check-current-state">
<span class="md-ellipsis">
      
        Step 1: Check Current State
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-create-restatement-plan">
<span class="md-ellipsis">
      
        Step 2: Create Restatement Plan
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-restatement">
<span class="md-ellipsis">
      
        Understanding Restatement
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-apply-restatement-plan">
<span class="md-ellipsis">
      
        Step 3: Apply Restatement Plan
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#use-cases-for-restatement">
<span class="md-ellipsis">
      
        Use Cases for Restatement
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scenario-8-plan-with-explain-flag">
<span class="md-ellipsis">
      
        Scenario 8: Plan with Explain Flag
      
    </span>
</a>
<nav aria-label="Scenario 8: Plan with Explain Flag" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-create-plan-with-explain">
<span class="md-ellipsis">
      
        Step 1: Create Plan with Explain
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-explained-plans">
<span class="md-ellipsis">
      
        Understanding Explained Plans
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#common-plan-scenarios-summary">
<span class="md-ellipsis">
      
        Common Plan Scenarios Summary
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#best-practices">
<span class="md-ellipsis">
      
        Best Practices
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#next-steps">
<span class="md-ellipsis">
      
        Next Steps
      
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="plan">Plan<a class="headerlink" href="#plan" title="Link to this section">¶</a></h1>
<p>This guide walks you through Vulcan's plan functionality with practical scenarios using the Orders360 example project. You'll learn how plans work, how to interpret them, and how to apply changes to your data warehouse.</p>
<h2 id="plan-architecture">Plan Architecture<a class="headerlink" href="#plan-architecture" title="Link to this section">¶</a></h2>
<p>The following diagram illustrates how Vulcan's plan system works, showing the relationship between local project state, plans, model variants, physical tables, and environments:</p>
<pre class="mermaid"><code>graph TB
    subgraph "Local Project"
        LP[Local Project Files&lt;br/&gt;Your SQL/Python Models]
        M1[Model: daily_sales v1]
        M2[Model: weekly_sales v1]
    end

    subgraph "Plan Creation"
        PC[vulcan plan]
        COMP[Compare Local vs Environment]
        CAT[Categorize Changes&lt;br/&gt;Breaking / Non-breaking]
        PLAN[Plan Generated&lt;br/&gt;Ready for Review]
    end

    subgraph "Model Variants &amp; Snapshots"
        MV1[Model Variant 1&lt;br/&gt;daily_sales__hash1]
        MV2[Model Variant 2&lt;br/&gt;daily_sales__hash2]
        MV3[Model Variant 3&lt;br/&gt;weekly_sales__hash1]
        SNAP1[Snapshot 1&lt;br/&gt;Fingerprint: hash1]
        SNAP2[Snapshot 2&lt;br/&gt;Fingerprint: hash2]
        SNAP3[Snapshot 3&lt;br/&gt;Fingerprint: hash3]
    end

    subgraph "Physical Layer"
        PT1[Physical Table 1&lt;br/&gt;db.vulcan__sales.daily_sales__hash1]
        PT2[Physical Table 2&lt;br/&gt;db.vulcan__sales.daily_sales__hash2]
        PT3[Physical Table 3&lt;br/&gt;db.vulcan__sales.weekly_sales__hash1]
    end

    subgraph "Virtual Layer"
        VL1[View: sales.daily_sales]
        VL2[View: sales.weekly_sales]
    end

    subgraph "Environments"
        PROD[Production Environment&lt;br/&gt;References Variant 1 &amp; 3]
        DEV[Dev Environment&lt;br/&gt;References Variant 2 &amp; 3]
    end

    subgraph "Backfill Process"
        BF[Backfill Execution]
        INC[Incremental Backfill]
        FULL[Full Refresh]
    end

    LP --&gt;|"to"| M1
    LP --&gt;|"to"| M2
    M1 --&gt;|"to"| PC
    M2 --&gt;|"to"| PC
    PC --&gt;|"to"| COMP
    COMP --&gt;|"to"| CAT
    CAT --&gt;|"to"| PLAN
    PLAN --&gt;|"to"| MV1
    PLAN --&gt;|"to"| MV2
    PLAN --&gt;|"to"| MV3

    MV1 --&gt;|"to"| SNAP1
    MV2 --&gt;|"to"| SNAP2
    MV3 --&gt;|"to"| SNAP3

    SNAP1 --&gt;|"to"| PT1
    SNAP2 --&gt;|"to"| PT2
    SNAP3 --&gt;|"to"| PT3

    PT1 --&gt;|"to"| VL1
    PT2 --&gt;|"to"| VL1
    PT3 --&gt;|"to"| VL2

    PROD --&gt;|"to"| MV1
    PROD --&gt;|"to"| MV3
    DEV --&gt;|"to"| MV2
    DEV --&gt;|"to"| MV3

    PLAN --&gt;|"to"| BF
    BF --&gt;|"to"| INC
    BF --&gt;|"to"| FULL
    INC --&gt;|"to"| PT1
    INC --&gt;|"to"| PT2
    FULL --&gt;|"to"| PT3

    style LP fill:#e3f2fd,stroke:#1976d2,stroke-width:3px,color:#000
    style PC fill:#fff3e0,stroke:#f57c00,stroke-width:3px,color:#000
    style PLAN fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px,color:#000
    style PROD fill:#e8f5e9,stroke:#388e3c,stroke-width:3px,color:#000
    style DEV fill:#fff9c4,stroke:#fbc02d,stroke-width:3px,color:#000
    style BF fill:#ffebee,stroke:#d32f2f,stroke-width:3px,color:#000
    style MV1 fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    style MV2 fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    style MV3 fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    style PT1 fill:#f1f8e9,stroke:#558b2f,stroke-width:2px
    style PT2 fill:#f1f8e9,stroke:#558b2f,stroke-width:2px
    style PT3 fill:#f1f8e9,stroke:#558b2f,stroke-width:2px</code></pre>
<h3 id="key-concepts-illustrated">Key Concepts Illustrated<a class="headerlink" href="#key-concepts-illustrated" title="Link to this section">¶</a></h3>
<ol>
<li><strong>Local Project</strong>: Your model files define the desired state</li>
<li><strong>Plan Creation</strong>: Vulcan compares local state to environment state and generates a plan</li>
<li><strong>Model Variants</strong>: Each model change creates a new variant with a unique fingerprint</li>
<li><strong>Physical Tables</strong>: Each variant gets its own physical table in the warehouse</li>
<li><strong>Virtual Layer</strong>: Views point to the appropriate physical tables based on environment</li>
<li><strong>Environments</strong>: Collections of references to model variants (not the data itself)</li>
<li><strong>Backfill</strong>: Process of populating physical tables with data</li>
</ol>
<h2 id="what-is-a-plan">What is a Plan?<a class="headerlink" href="#what-is-a-plan" title="Link to this section">¶</a></h2>
<p>A <strong>plan</strong> is Vulcan's way of comparing your local project state with a target environment and determining what changes need to be applied. Before any model changes take effect, Vulcan creates a plan that shows:</p>
<ul>
<li>
<p><strong>Added models</strong> - New models to be created</p>
</li>
<li>
<p><strong>Removed models</strong> - Models to be deleted</p>
</li>
<li>
<p><strong>Modified models</strong> - Changes to existing models (with diffs)</p>
</li>
<li>
<p><strong>Indirectly affected models</strong> - Downstream models that depend on changed models</p>
</li>
<li>
<p><strong>Backfill requirements</strong> - Date ranges that need data reprocessing</p>
</li>
</ul>
<p>Plans allow you to review and verify all changes before they're applied to your data warehouse.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this section">¶</a></h2>
<p>Before following this guide, ensure you have:</p>
<ol>
<li><strong>Orders360 example project</strong> set up (see <a href="../../examples/overview.md">Examples Overview</a>)</li>
<li><strong>Docker environment</strong> running (see <a href="../get-started/docker/">Docker Quickstart</a>)</li>
<li><strong>Vulcan CLI</strong> accessible via <code>vulcan</code> command or <code>vulcan.bat</code> (Windows)</li>
</ol>
<h2 id="scenario-1-first-plan-initializing-production">Scenario 1: First Plan - Initializing Production<a class="headerlink" href="#scenario-1-first-plan-initializing-production" title="Link to this section">¶</a></h2>
<p>When you first create a project, you need to initialize the production environment. This scenario shows how Vulcan detects all models and creates the initial plan.</p>
<h3 id="step-1-check-project-status">Step 1: Check Project Status<a class="headerlink" href="#step-1-check-project-status" title="Link to this section">¶</a></h3>
<p>First, verify your project setup:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>vulcan<span class="w"> </span>info
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>Connection: Connected
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>Models: 4
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>Macros: 0
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>Tests: 2
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>...
</span></code></pre></div><p></p>
<p><em>[Screenshot: <code>vulcan info</code> output showing project status]</em></p>
<h3 id="step-2-create-your-first-plan">Step 2: Create Your First Plan<a class="headerlink" href="#step-2-create-your-first-plan" title="Link to this section">¶</a></h3>
<p>Run the plan command to see what Vulcan will create:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>vulcan<span class="w"> </span>plan
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a>======================================================================
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>Successfully Ran 2 tests against postgres
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>----------------------------------------------------------------------
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>`prod` environment will be initialized
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>Models:
</span><span id="__span-3-8"><a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a>└── Added:
</span><span id="__span-3-9"><a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a>    ├── raw.raw_customers
</span><span id="__span-3-10"><a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a>    ├── raw.raw_orders
</span><span id="__span-3-11"><a href="#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a>    ├── raw.raw_products
</span><span id="__span-3-12"><a href="#__codelineno-3-12" id="__codelineno-3-12" name="__codelineno-3-12"></a>    └── sales.daily_sales
</span><span id="__span-3-13"><a href="#__codelineno-3-13" id="__codelineno-3-13" name="__codelineno-3-13"></a>
</span><span id="__span-3-14"><a href="#__codelineno-3-14" id="__codelineno-3-14" name="__codelineno-3-14"></a>Models needing backfill (missing dates):
</span><span id="__span-3-15"><a href="#__codelineno-3-15" id="__codelineno-3-15" name="__codelineno-3-15"></a>├── raw.raw_customers: 2025-01-01 - 2025-01-15
</span><span id="__span-3-16"><a href="#__codelineno-3-16" id="__codelineno-3-16" name="__codelineno-3-16"></a>├── raw.raw_orders: 2025-01-01 - 2025-01-15
</span><span id="__span-3-17"><a href="#__codelineno-3-17" id="__codelineno-3-17" name="__codelineno-3-17"></a>├── raw.raw_products: 2025-01-01 - 2025-01-15
</span><span id="__span-3-18"><a href="#__codelineno-3-18" id="__codelineno-3-18" name="__codelineno-3-18"></a>└── sales.daily_sales: 2025-01-01 - 2025-01-15
</span><span id="__span-3-19"><a href="#__codelineno-3-19" id="__codelineno-3-19" name="__codelineno-3-19"></a>
</span><span id="__span-3-20"><a href="#__codelineno-3-20" id="__codelineno-3-20" name="__codelineno-3-20"></a>Apply - Backfill Tables [y/n]:
</span></code></pre></div><p></p>
<p><em>[Screenshot: First plan output showing all models to be added]</em></p>
<h3 id="understanding-the-output">Understanding the Output<a class="headerlink" href="#understanding-the-output" title="Link to this section">¶</a></h3>
<ul>
<li>
<p><strong><code>prod</code> environment will be initialized</strong>: This is your first plan, so Vulcan is creating the production environment</p>
</li>
<li>
<p><strong>Added models</strong>: All 4 models are new and will be created</p>
</li>
<li>
<p><strong>Backfill dates</strong>: Each model needs data from its start date (2025-01-01) to the current date</p>
</li>
</ul>
<h3 id="step-3-apply-the-plan">Step 3: Apply the Plan<a class="headerlink" href="#step-3-apply-the-plan" title="Link to this section">¶</a></h3>
<p>Type <code>y</code> and press Enter to apply the plan:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>Apply - Backfill Tables [y/n]: y
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>[1/4] raw.raw_customers          [full refresh]                   2.3s
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>[2/4] raw.raw_orders             [full refresh]                   1.8s
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>[3/4] raw.raw_products           [full refresh]                   0.5s
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>[4/4] sales.daily_sales          [insert 2025-01-01 - 2025-01-15] 4.2s
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>Executing model batches ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 100.0% • 4/4 • 0:00:09
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a>✔ Model batches executed
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a>✔ Plan applied successfully
</span></code></pre></div><p></p>
<p><em>[Screenshot: Plan application progress showing all models being backfilled]</em></p>
<h3 id="what-happened">What Happened?<a class="headerlink" href="#what-happened" title="Link to this section">¶</a></h3>
<ol>
<li><strong>Seed models</strong> (<code>raw.*</code>) were fully refreshed - all data was reloaded</li>
<li><strong>Daily sales model</strong> was incrementally backfilled - data was inserted for each day from start date to today</li>
<li><strong>Physical tables</strong> were created in your warehouse</li>
<li><strong>Virtual layer</strong> was updated to point to the new tables</li>
</ol>
<hr/>
<h2 id="scenario-2-adding-a-new-model">Scenario 2: Adding a New Model<a class="headerlink" href="#scenario-2-adding-a-new-model" title="Link to this section">¶</a></h2>
<p>After your initial setup, you'll add new models. This scenario shows how Vulcan detects new models and determines their dependencies.</p>
<h3 id="step-1-add-a-new-model">Step 1: Add a New Model<a class="headerlink" href="#step-1-add-a-new-model" title="Link to this section">¶</a></h3>
<p>Create a new model file <code>models/sales/weekly_sales.sql</code>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">weekly_sales</span><span class="p">,</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">  </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">    </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">    </span><span class="n">batch_size</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">  </span><span class="p">),</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">  </span><span class="k">start</span><span class="w"> </span><span class="s1">'2025-01-01'</span><span class="p">,</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">  </span><span class="n">cron</span><span class="w"> </span><span class="s1">'@weekly'</span><span class="p">,</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w">  </span><span class="n">grain</span><span class="w"> </span><span class="p">[</span><span class="n">order_date</span><span class="p">]</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="p">);</span>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="k">SELECT</span>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">  </span><span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span><span class="w"> </span><span class="n">order_date</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">  </span><span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">order_id</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_orders</span><span class="p">,</span>
</span><span id="__span-6-15"><a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">  </span><span class="k">SUM</span><span class="p">(</span><span class="n">order_amount</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_revenue</span>
</span><span id="__span-6-16"><a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="k">FROM</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">daily_sales</span>
</span><span id="__span-6-17"><a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">order_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="o">@</span><span class="n">start_ds</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="o">@</span><span class="n">end_ds</span>
</span><span id="__span-6-18"><a href="#__codelineno-6-18" id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span><span class="w"> </span><span class="n">order_date</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="step-2-create-plan-for-new-model">Step 2: Create Plan for New Model<a class="headerlink" href="#step-2-create-plan-for-new-model" title="Link to this section">¶</a></h3>
<p>Run the plan command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a>vulcan<span class="w"> </span>plan
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a>======================================================================
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>Successfully Ran 2 tests against postgres
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>----------------------------------------------------------------------
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a>Differences from the `prod` environment:
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a>Models:
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a>└── Added:
</span><span id="__span-8-9"><a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a>    └── sales.weekly_sales
</span><span id="__span-8-10"><a href="#__codelineno-8-10" id="__codelineno-8-10" name="__codelineno-8-10"></a>
</span><span id="__span-8-11"><a href="#__codelineno-8-11" id="__codelineno-8-11" name="__codelineno-8-11"></a>Models needing backfill (missing dates):
</span><span id="__span-8-12"><a href="#__codelineno-8-12" id="__codelineno-8-12" name="__codelineno-8-12"></a>└── sales.weekly_sales: 2025-01-01 - 2025-01-15
</span><span id="__span-8-13"><a href="#__codelineno-8-13" id="__codelineno-8-13" name="__codelineno-8-13"></a>
</span><span id="__span-8-14"><a href="#__codelineno-8-14" id="__codelineno-8-14" name="__codelineno-8-14"></a>Apply - Backfill Tables [y/n]:
</span></code></pre></div><p></p>
<p><em>[Screenshot: Plan showing new weekly_sales model]</em></p>
<h3 id="step-3-review-dependencies">Step 3: Review Dependencies<a class="headerlink" href="#step-3-review-dependencies" title="Link to this section">¶</a></h3>
<p>Notice that:</p>
<ul>
<li>
<p>Only the new model appears in the plan</p>
</li>
<li>
<p>The upstream model (<code>sales.daily_sales</code>) is not affected because adding a downstream model doesn't change upstream data</p>
</li>
<li>
<p>Backfill is needed from the model's start date</p>
</li>
</ul>
<h3 id="step-4-apply-the-plan">Step 4: Apply the Plan<a class="headerlink" href="#step-4-apply-the-plan" title="Link to this section">¶</a></h3>
<p>Type <code>y</code> to apply:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a>Apply - Backfill Tables [y/n]: y
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a>[1/1] sales.weekly_sales         [insert 2025-01-06 - 2025-01-13] 3.1s
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a>Executing model batches ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 100.0% • 1/1 • 0:00:03
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a>✔ Model batches executed
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a>✔ Plan applied successfully
</span></code></pre></div><p></p>
<p><em>[Screenshot: Weekly sales model being backfilled]</em></p>
<hr/>
<h2 id="scenario-3-modifying-a-model-non-breaking-change">Scenario 3: Modifying a Model - Non-Breaking Change<a class="headerlink" href="#scenario-3-modifying-a-model-non-breaking-change" title="Link to this section">¶</a></h2>
<p>Non-breaking changes don't affect existing data validity. Adding a new column is a common non-breaking change.</p>
<h3 id="step-1-modify-the-model">Step 1: Modify the Model<a class="headerlink" href="#step-1-modify-the-model" title="Link to this section">¶</a></h3>
<p>Edit <code>models/sales/daily_sales.sql</code> to add a new column:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">daily_sales</span><span class="p">,</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">  </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">    </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">    </span><span class="n">batch_size</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-11-6"><a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">  </span><span class="p">),</span>
</span><span id="__span-11-7"><a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">  </span><span class="k">start</span><span class="w"> </span><span class="s1">'2025-01-01'</span><span class="p">,</span>
</span><span id="__span-11-8"><a href="#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">  </span><span class="n">cron</span><span class="w"> </span><span class="s1">'@daily'</span><span class="p">,</span>
</span><span id="__span-11-9"><a href="#__codelineno-11-9" id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">  </span><span class="n">grain</span><span class="w"> </span><span class="p">[</span><span class="n">order_date</span><span class="p">]</span>
</span><span id="__span-11-10"><a href="#__codelineno-11-10" id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="p">);</span>
</span><span id="__span-11-11"><a href="#__codelineno-11-11" id="__codelineno-11-11" name="__codelineno-11-11"></a>
</span><span id="__span-11-12"><a href="#__codelineno-11-12" id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="k">SELECT</span>
</span><span id="__span-11-13"><a href="#__codelineno-11-13" id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="w">  </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-11-14"><a href="#__codelineno-11-14" id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="w">  </span><span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">order_id</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_orders</span><span class="p">,</span>
</span><span id="__span-11-15"><a href="#__codelineno-11-15" id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="w">  </span><span class="k">SUM</span><span class="p">(</span><span class="n">order_amount</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_revenue</span><span class="p">,</span>
</span><span id="__span-11-16"><a href="#__codelineno-11-16" id="__codelineno-11-16" name="__codelineno-11-16"></a><span class="w">  </span><span class="k">AVG</span><span class="p">(</span><span class="n">order_amount</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">avg_order_value</span><span class="p">,</span><span class="w">  </span><span class="c1">-- NEW COLUMN</span>
</span><span id="__span-11-17"><a href="#__codelineno-11-17" id="__codelineno-11-17" name="__codelineno-11-17"></a><span class="w">  </span><span class="k">MAX</span><span class="p">(</span><span class="n">order_id</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">last_order_id</span>
</span><span id="__span-11-18"><a href="#__codelineno-11-18" id="__codelineno-11-18" name="__codelineno-11-18"></a><span class="k">FROM</span><span class="w"> </span><span class="n">raw</span><span class="p">.</span><span class="n">raw_orders</span>
</span><span id="__span-11-19"><a href="#__codelineno-11-19" id="__codelineno-11-19" name="__codelineno-11-19"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">order_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="o">@</span><span class="n">start_ds</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="o">@</span><span class="n">end_ds</span>
</span><span id="__span-11-20"><a href="#__codelineno-11-20" id="__codelineno-11-20" name="__codelineno-11-20"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">order_date</span>
</span></code></pre></div>
<h3 id="step-2-create-plan">Step 2: Create Plan<a class="headerlink" href="#step-2-create-plan" title="Link to this section">¶</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a>vulcan<span class="w"> </span>plan
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a>======================================================================
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a>Successfully Ran 2 tests against postgres
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a>----------------------------------------------------------------------
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a>Differences from the `prod` environment:
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a>Models:
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a>└── Directly Modified:
</span><span id="__span-13-9"><a href="#__codelineno-13-9" id="__codelineno-13-9" name="__codelineno-13-9"></a>    └── sales.daily_sales
</span><span id="__span-13-10"><a href="#__codelineno-13-10" id="__codelineno-13-10" name="__codelineno-13-10"></a>
</span><span id="__span-13-11"><a href="#__codelineno-13-11" id="__codelineno-13-11" name="__codelineno-13-11"></a>Directly Modified: sales.daily_sales (Non-breaking)
</span><span id="__span-13-12"><a href="#__codelineno-13-12" id="__codelineno-13-12" name="__codelineno-13-12"></a>└── Diff:
</span><span id="__span-13-13"><a href="#__codelineno-13-13" id="__codelineno-13-13" name="__codelineno-13-13"></a>    @@ -5,6 +5,7 @@
</span><span id="__span-13-14"><a href="#__codelineno-13-14" id="__codelineno-13-14" name="__codelineno-13-14"></a>      SELECT
</span><span id="__span-13-15"><a href="#__codelineno-13-15" id="__codelineno-13-15" name="__codelineno-13-15"></a>        order_date,
</span><span id="__span-13-16"><a href="#__codelineno-13-16" id="__codelineno-13-16" name="__codelineno-13-16"></a>        COUNT(DISTINCT order_id) AS total_orders,
</span><span id="__span-13-17"><a href="#__codelineno-13-17" id="__codelineno-13-17" name="__codelineno-13-17"></a>        SUM(order_amount) AS total_revenue,
</span><span id="__span-13-18"><a href="#__codelineno-13-18" id="__codelineno-13-18" name="__codelineno-13-18"></a>    +   AVG(order_amount) AS avg_order_value,
</span><span id="__span-13-19"><a href="#__codelineno-13-19" id="__codelineno-13-19" name="__codelineno-13-19"></a>        MAX(order_id) AS last_order_id
</span><span id="__span-13-20"><a href="#__codelineno-13-20" id="__codelineno-13-20" name="__codelineno-13-20"></a>      FROM raw.raw_orders
</span><span id="__span-13-21"><a href="#__codelineno-13-21" id="__codelineno-13-21" name="__codelineno-13-21"></a>      WHERE order_date BETWEEN @start_ds AND @end_ds
</span><span id="__span-13-22"><a href="#__codelineno-13-22" id="__codelineno-13-22" name="__codelineno-13-22"></a>
</span><span id="__span-13-23"><a href="#__codelineno-13-23" id="__codelineno-13-23" name="__codelineno-13-23"></a>Models needing backfill (missing dates):
</span><span id="__span-13-24"><a href="#__codelineno-13-24" id="__codelineno-13-24" name="__codelineno-13-24"></a>└── sales.daily_sales: 2025-01-01 - 2025-01-15
</span><span id="__span-13-25"><a href="#__codelineno-13-25" id="__codelineno-13-25" name="__codelineno-13-25"></a>
</span><span id="__span-13-26"><a href="#__codelineno-13-26" id="__codelineno-13-26" name="__codelineno-13-26"></a>Apply - Backfill Tables [y/n]:
</span></code></pre></div><p></p>
<p><em>[Screenshot: Plan showing non-breaking change with diff]</em></p>
<h3 id="understanding-non-breaking-changes">Understanding Non-Breaking Changes<a class="headerlink" href="#understanding-non-breaking-changes" title="Link to this section">¶</a></h3>
<ul>
<li>
<p><strong>Directly Modified</strong>: The model you changed</p>
</li>
<li>
<p><strong>Non-breaking</strong>: Vulcan automatically detected this as non-breaking because:</p>
</li>
<li>
<p>You added a new column</p>
</li>
<li>
<p>Existing columns weren't modified</p>
</li>
<li>
<p>Downstream models aren't affected (they don't use this column yet)</p>
</li>
<li>
<p><strong>Backfill required</strong>: The modified model needs to be backfilled to populate the new column</p>
</li>
</ul>
<h3 id="step-3-check-downstream-models">Step 3: Check Downstream Models<a class="headerlink" href="#step-3-check-downstream-models" title="Link to this section">¶</a></h3>
<p>Notice that <code>sales.weekly_sales</code> (which depends on <code>daily_sales</code>) is <strong>not</strong> listed. This is because:</p>
<ul>
<li>
<p>The change is non-breaking</p>
</li>
<li>
<p>Downstream models don't need to be reprocessed</p>
</li>
<li>
<p>They'll automatically see the new column once <code>daily_sales</code> is backfilled</p>
</li>
</ul>
<h3 id="step-4-apply-the-plan_1">Step 4: Apply the Plan<a class="headerlink" href="#step-4-apply-the-plan_1" title="Link to this section">¶</a></h3>
<p>Type <code>y</code> to apply:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a>Apply - Backfill Tables [y/n]: y
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a>[1/1] sales.daily_sales          [insert 2025-01-01 - 2025-01-15] 5.2s
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>Executing model batches ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 100.0% • 1/1 • 0:00:05
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a>✔ Model batches executed
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a>✔ Plan applied successfully
</span></code></pre></div><p></p>
<p><em>[Screenshot: Daily sales model being backfilled with new column]</em></p>
<hr/>
<h2 id="scenario-4-modifying-a-model-breaking-change">Scenario 4: Modifying a Model - Breaking Change<a class="headerlink" href="#scenario-4-modifying-a-model-breaking-change" title="Link to this section">¶</a></h2>
<p>Breaking changes invalidate existing data and require downstream models to be reprocessed. Adding a WHERE clause is a common breaking change.</p>
<h3 id="step-1-modify-the-model-with-a-filter">Step 1: Modify the Model with a Filter<a class="headerlink" href="#step-1-modify-the-model-with-a-filter" title="Link to this section">¶</a></h3>
<p>Edit <code>models/sales/daily_sales.sql</code> to add a WHERE clause:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">daily_sales</span><span class="p">,</span>
</span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-16-4"><a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-16-5"><a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">    </span><span class="n">batch_size</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-16-6"><a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">  </span><span class="p">),</span>
</span><span id="__span-16-7"><a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">  </span><span class="k">start</span><span class="w"> </span><span class="s1">'2025-01-01'</span><span class="p">,</span>
</span><span id="__span-16-8"><a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">  </span><span class="n">cron</span><span class="w"> </span><span class="s1">'@daily'</span><span class="p">,</span>
</span><span id="__span-16-9"><a href="#__codelineno-16-9" id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">  </span><span class="n">grain</span><span class="w"> </span><span class="p">[</span><span class="n">order_date</span><span class="p">]</span>
</span><span id="__span-16-10"><a href="#__codelineno-16-10" id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="p">);</span>
</span><span id="__span-16-11"><a href="#__codelineno-16-11" id="__codelineno-16-11" name="__codelineno-16-11"></a>
</span><span id="__span-16-12"><a href="#__codelineno-16-12" id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="k">SELECT</span>
</span><span id="__span-16-13"><a href="#__codelineno-16-13" id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">  </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-16-14"><a href="#__codelineno-16-14" id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">  </span><span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">order_id</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_orders</span><span class="p">,</span>
</span><span id="__span-16-15"><a href="#__codelineno-16-15" id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">  </span><span class="k">SUM</span><span class="p">(</span><span class="n">order_amount</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_revenue</span><span class="p">,</span>
</span><span id="__span-16-16"><a href="#__codelineno-16-16" id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">  </span><span class="k">AVG</span><span class="p">(</span><span class="n">order_amount</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">avg_order_value</span><span class="p">,</span>
</span><span id="__span-16-17"><a href="#__codelineno-16-17" id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="w">  </span><span class="k">MAX</span><span class="p">(</span><span class="n">order_id</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">last_order_id</span>
</span><span id="__span-16-18"><a href="#__codelineno-16-18" id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="k">FROM</span><span class="w"> </span><span class="n">raw</span><span class="p">.</span><span class="n">raw_orders</span>
</span><span id="__span-16-19"><a href="#__codelineno-16-19" id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">order_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="o">@</span><span class="n">start_ds</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="o">@</span><span class="n">end_ds</span>
</span><span id="__span-16-20"><a href="#__codelineno-16-20" id="__codelineno-16-20" name="__codelineno-16-20"></a><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">order_amount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">  </span><span class="c1">-- NEW FILTER: Only orders &gt; $10</span>
</span><span id="__span-16-21"><a href="#__codelineno-16-21" id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">order_date</span>
</span></code></pre></div>
<h3 id="step-2-create-plan_1">Step 2: Create Plan<a class="headerlink" href="#step-2-create-plan_1" title="Link to this section">¶</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a>vulcan<span class="w"> </span>plan
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a>======================================================================
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a>Successfully Ran 2 tests against postgres
</span><span id="__span-18-3"><a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a>----------------------------------------------------------------------
</span><span id="__span-18-4"><a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a>
</span><span id="__span-18-5"><a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a>Differences from the `prod` environment:
</span><span id="__span-18-6"><a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a>
</span><span id="__span-18-7"><a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a>Models:
</span><span id="__span-18-8"><a href="#__codelineno-18-8" id="__codelineno-18-8" name="__codelineno-18-8"></a>├── Directly Modified:
</span><span id="__span-18-9"><a href="#__codelineno-18-9" id="__codelineno-18-9" name="__codelineno-18-9"></a>│   └── sales.daily_sales
</span><span id="__span-18-10"><a href="#__codelineno-18-10" id="__codelineno-18-10" name="__codelineno-18-10"></a>└── Indirectly Modified:
</span><span id="__span-18-11"><a href="#__codelineno-18-11" id="__codelineno-18-11" name="__codelineno-18-11"></a>    └── sales.weekly_sales
</span><span id="__span-18-12"><a href="#__codelineno-18-12" id="__codelineno-18-12" name="__codelineno-18-12"></a>
</span><span id="__span-18-13"><a href="#__codelineno-18-13" id="__codelineno-18-13" name="__codelineno-18-13"></a>Directly Modified: sales.daily_sales (Breaking)
</span><span id="__span-18-14"><a href="#__codelineno-18-14" id="__codelineno-18-14" name="__codelineno-18-14"></a>└── Diff:
</span><span id="__span-18-15"><a href="#__codelineno-18-15" id="__codelineno-18-15" name="__codelineno-18-15"></a>    @@ -8,6 +8,7 @@
</span><span id="__span-18-16"><a href="#__codelineno-18-16" id="__codelineno-18-16" name="__codelineno-18-16"></a>      FROM raw.raw_orders
</span><span id="__span-18-17"><a href="#__codelineno-18-17" id="__codelineno-18-17" name="__codelineno-18-17"></a>      WHERE order_date BETWEEN @start_ds AND @end_ds
</span><span id="__span-18-18"><a href="#__codelineno-18-18" id="__codelineno-18-18" name="__codelineno-18-18"></a>    +   AND order_amount &gt; 10
</span><span id="__span-18-19"><a href="#__codelineno-18-19" id="__codelineno-18-19" name="__codelineno-18-19"></a>      GROUP BY order_date
</span><span id="__span-18-20"><a href="#__codelineno-18-20" id="__codelineno-18-20" name="__codelineno-18-20"></a>
</span><span id="__span-18-21"><a href="#__codelineno-18-21" id="__codelineno-18-21" name="__codelineno-18-21"></a>└── Indirectly Modified Children:
</span><span id="__span-18-22"><a href="#__codelineno-18-22" id="__codelineno-18-22" name="__codelineno-18-22"></a>    └── sales.weekly_sales (Indirect Breaking)
</span><span id="__span-18-23"><a href="#__codelineno-18-23" id="__codelineno-18-23" name="__codelineno-18-23"></a>
</span><span id="__span-18-24"><a href="#__codelineno-18-24" id="__codelineno-18-24" name="__codelineno-18-24"></a>Models needing backfill (missing dates):
</span><span id="__span-18-25"><a href="#__codelineno-18-25" id="__codelineno-18-25" name="__codelineno-18-25"></a>├── sales.daily_sales: 2025-01-01 - 2025-01-15
</span><span id="__span-18-26"><a href="#__codelineno-18-26" id="__codelineno-18-26" name="__codelineno-18-26"></a>└── sales.weekly_sales: 2025-01-01 - 2025-01-15
</span><span id="__span-18-27"><a href="#__codelineno-18-27" id="__codelineno-18-27" name="__codelineno-18-27"></a>
</span><span id="__span-18-28"><a href="#__codelineno-18-28" id="__codelineno-18-28" name="__codelineno-18-28"></a>Apply - Backfill Tables [y/n]:
</span></code></pre></div><p></p>
<p><em>[Screenshot: Plan showing breaking change with downstream impact]</em></p>
<h3 id="understanding-breaking-changes">Understanding Breaking Changes<a class="headerlink" href="#understanding-breaking-changes" title="Link to this section">¶</a></h3>
<ul>
<li>
<p><strong>Directly Modified</strong>: <code>sales.daily_sales</code> - the model you changed</p>
</li>
<li>
<p><strong>Breaking</strong>: Vulcan detected this as breaking because:</p>
</li>
<li>
<p>You added a WHERE clause that filters data</p>
</li>
<li>
<p>Existing data may now be invalid (rows that should be filtered out)</p>
</li>
<li>
<p><strong>Indirectly Modified</strong>: <code>sales.weekly_sales</code> - downstream model affected</p>
</li>
<li>
<p><strong>Cascading backfill</strong>: Both models need to be reprocessed</p>
</li>
</ul>
<h3 id="step-3-apply-the-plan_1">Step 3: Apply the Plan<a class="headerlink" href="#step-3-apply-the-plan_1" title="Link to this section">¶</a></h3>
<p>Type <code>y</code> to apply:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a>Apply - Backfill Tables [y/n]: y
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a>[1/2] sales.daily_sales          [insert 2025-01-01 - 2025-01-15] 5.1s
</span><span id="__span-20-2"><a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a>[2/2] sales.weekly_sales         [insert 2025-01-06 - 2025-01-13] 3.8s
</span><span id="__span-20-3"><a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a>
</span><span id="__span-20-4"><a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a>Executing model batches ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 100.0% • 2/2 • 0:00:09
</span><span id="__span-20-5"><a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a>
</span><span id="__span-20-6"><a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a>✔ Model batches executed
</span><span id="__span-20-7"><a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a>✔ Plan applied successfully
</span></code></pre></div><p></p>
<p><em>[Screenshot: Both models being backfilled due to breaking change]</em></p>
<h3 id="what-happened_1">What Happened?<a class="headerlink" href="#what-happened_1" title="Link to this section">¶</a></h3>
<ol>
<li><strong>Daily sales</strong> was backfilled first (upstream)</li>
<li><strong>Weekly sales</strong> was backfilled second (downstream), using the updated daily sales data</li>
<li>Both models now reflect the filtered data (only orders &gt; $10)</li>
</ol>
<hr/>
<h2 id="scenario-5-creating-a-development-environment">Scenario 5: Creating a Development Environment<a class="headerlink" href="#scenario-5-creating-a-development-environment" title="Link to this section">¶</a></h2>
<p>Development environments let you test changes without affecting production. This scenario shows how to create and use a dev environment.</p>
<h3 id="step-1-revert-your-changes">Step 1: Revert Your Changes<a class="headerlink" href="#step-1-revert-your-changes" title="Link to this section">¶</a></h3>
<p>First, revert the breaking change from Scenario 4 to restore production:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="c1"># Revert daily_sales.sql to remove the WHERE clause filter</span>
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="c1"># (Edit the file to remove: AND order_amount &gt; 10)</span>
</span></code></pre></div>
<h3 id="step-2-apply-reverted-plan-to-production">Step 2: Apply Reverted Plan to Production<a class="headerlink" href="#step-2-apply-reverted-plan-to-production" title="Link to this section">¶</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a>vulcan<span class="w"> </span>plan
</span><span id="__span-22-2"><a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="c1"># Type 'y' to apply</span>
</span></code></pre></div>
<h3 id="step-3-create-development-environment">Step 3: Create Development Environment<a class="headerlink" href="#step-3-create-development-environment" title="Link to this section">¶</a></h3>
<p>Now create a dev environment with your breaking change:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>dev
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a>======================================================================
</span><span id="__span-24-2"><a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a>Successfully Ran 2 tests against postgres
</span><span id="__span-24-3"><a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a>----------------------------------------------------------------------
</span><span id="__span-24-4"><a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a>
</span><span id="__span-24-5"><a href="#__codelineno-24-5" id="__codelineno-24-5" name="__codelineno-24-5"></a>New environment `dev` will be created from `prod`
</span><span id="__span-24-6"><a href="#__codelineno-24-6" id="__codelineno-24-6" name="__codelineno-24-6"></a>
</span><span id="__span-24-7"><a href="#__codelineno-24-7" id="__codelineno-24-7" name="__codelineno-24-7"></a>Differences from the `prod` environment:
</span><span id="__span-24-8"><a href="#__codelineno-24-8" id="__codelineno-24-8" name="__codelineno-24-8"></a>
</span><span id="__span-24-9"><a href="#__codelineno-24-9" id="__codelineno-24-9" name="__codelineno-24-9"></a>Models:
</span><span id="__span-24-10"><a href="#__codelineno-24-10" id="__codelineno-24-10" name="__codelineno-24-10"></a>├── Directly Modified:
</span><span id="__span-24-11"><a href="#__codelineno-24-11" id="__codelineno-24-11" name="__codelineno-24-11"></a>│   └── sales__dev.daily_sales
</span><span id="__span-24-12"><a href="#__codelineno-24-12" id="__codelineno-24-12" name="__codelineno-24-12"></a>└── Indirectly Modified:
</span><span id="__span-24-13"><a href="#__codelineno-24-13" id="__codelineno-24-13" name="__codelineno-24-13"></a>    └── sales__dev.weekly_sales
</span><span id="__span-24-14"><a href="#__codelineno-24-14" id="__codelineno-24-14" name="__codelineno-24-14"></a>
</span><span id="__span-24-15"><a href="#__codelineno-24-15" id="__codelineno-24-15" name="__codelineno-24-15"></a>Directly Modified: sales__dev.daily_sales (Breaking)
</span><span id="__span-24-16"><a href="#__codelineno-24-16" id="__codelineno-24-16" name="__codelineno-24-16"></a>└── Diff:
</span><span id="__span-24-17"><a href="#__codelineno-24-17" id="__codelineno-24-17" name="__codelineno-24-17"></a>    @@ -8,6 +8,7 @@
</span><span id="__span-24-18"><a href="#__codelineno-24-18" id="__codelineno-24-18" name="__codelineno-24-18"></a>      FROM raw.raw_orders
</span><span id="__span-24-19"><a href="#__codelineno-24-19" id="__codelineno-24-19" name="__codelineno-24-19"></a>      WHERE order_date BETWEEN @start_ds AND @end_ds
</span><span id="__span-24-20"><a href="#__codelineno-24-20" id="__codelineno-24-20" name="__codelineno-24-20"></a>    +   AND order_amount &gt; 10
</span><span id="__span-24-21"><a href="#__codelineno-24-21" id="__codelineno-24-21" name="__codelineno-24-21"></a>      GROUP BY order_date
</span><span id="__span-24-22"><a href="#__codelineno-24-22" id="__codelineno-24-22" name="__codelineno-24-22"></a>
</span><span id="__span-24-23"><a href="#__codelineno-24-23" id="__codelineno-24-23" name="__codelineno-24-23"></a>└── Indirectly Modified Children:
</span><span id="__span-24-24"><a href="#__codelineno-24-24" id="__codelineno-24-24" name="__codelineno-24-24"></a>    └── sales__dev.weekly_sales (Indirect Breaking)
</span><span id="__span-24-25"><a href="#__codelineno-24-25" id="__codelineno-24-25" name="__codelineno-24-25"></a>
</span><span id="__span-24-26"><a href="#__codelineno-24-26" id="__codelineno-24-26" name="__codelineno-24-26"></a>Enter the backfill start date (eg. '1 year', '2020-01-01') or blank to backfill from the beginning of history:
</span></code></pre></div><p></p>
<p><em>[Screenshot: Creating dev environment with date prompt]</em></p>
<h3 id="step-4-specify-date-range">Step 4: Specify Date Range<a class="headerlink" href="#step-4-specify-date-range" title="Link to this section">¶</a></h3>
<p>For faster development, backfill only recent data:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a>Enter the backfill start date: 2025-01-10
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-26-1"><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a>Enter the backfill end date (eg. '1 month ago', '2020-01-01') or blank to backfill up until '2025-01-15 00:00:00':
</span></code></pre></div><p></p>
<p>Press Enter to use the default end date (today).</p>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a>Models needing backfill (missing dates):
</span><span id="__span-27-2"><a href="#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a>├── sales__dev.daily_sales: 2025-01-10 - 2025-01-15
</span><span id="__span-27-3"><a href="#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a>└── sales__dev.weekly_sales: 2025-01-10 - 2025-01-15
</span><span id="__span-27-4"><a href="#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a>
</span><span id="__span-27-5"><a href="#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a>Apply - Backfill Tables [y/n]:
</span></code></pre></div><p></p>
<p><em>[Screenshot: Dev environment plan with limited date range]</em></p>
<h3 id="step-5-apply-dev-plan">Step 5: Apply Dev Plan<a class="headerlink" href="#step-5-apply-dev-plan" title="Link to this section">¶</a></h3>
<p>Type <code>y</code> to apply:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a>Apply - Backfill Tables [y/n]: y
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-29-1"><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a>[1/2] sales__dev.daily_sales     [insert 2025-01-10 - 2025-01-15] 2.1s
</span><span id="__span-29-2"><a href="#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a>[2/2] sales__dev.weekly_sales    [insert 2025-01-13 - 2025-01-13] 1.5s
</span><span id="__span-29-3"><a href="#__codelineno-29-3" id="__codelineno-29-3" name="__codelineno-29-3"></a>
</span><span id="__span-29-4"><a href="#__codelineno-29-4" id="__codelineno-29-4" name="__codelineno-29-4"></a>Executing model batches ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 100.0% • 2/2 • 0:00:04
</span><span id="__span-29-5"><a href="#__codelineno-29-5" id="__codelineno-29-5" name="__codelineno-29-5"></a>
</span><span id="__span-29-6"><a href="#__codelineno-29-6" id="__codelineno-29-6" name="__codelineno-29-6"></a>✔ Model batches executed
</span><span id="__span-29-7"><a href="#__codelineno-29-7" id="__codelineno-29-7" name="__codelineno-29-7"></a>✔ Plan applied successfully
</span></code></pre></div><p></p>
<p><em>[Screenshot: Dev environment models being backfilled]</em></p>
<h3 id="understanding-dev-environments">Understanding Dev Environments<a class="headerlink" href="#understanding-dev-environments" title="Link to this section">¶</a></h3>
<ul>
<li>
<p><strong>Isolated namespace</strong>: Models are prefixed with <code>__dev</code> (e.g., <code>sales__dev.daily_sales</code>)</p>
</li>
<li>
<p><strong>Separate tables</strong>: Dev environment has its own physical tables</p>
</li>
<li>
<p><strong>Limited backfill</strong>: Only recent data was processed (2025-01-10 to 2025-01-15)</p>
</li>
<li>
<p><strong>Production unaffected</strong>: Production data remains unchanged</p>
</li>
</ul>
<h3 id="step-6-query-dev-environment">Step 6: Query Dev Environment<a class="headerlink" href="#step-6-query-dev-environment" title="Link to this section">¶</a></h3>
<p>You can query the dev environment to verify changes:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-30-1"><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a>vulcan<span class="w"> </span>fetchdf<span class="w"> </span><span class="s2">"SELECT * FROM sales__dev.daily_sales LIMIT 5"</span>
</span></code></pre></div>
<p>Compare with production:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-31-1"><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a>vulcan<span class="w"> </span>fetchdf<span class="w"> </span><span class="s2">"SELECT * FROM sales.daily_sales LIMIT 5"</span>
</span></code></pre></div>
<p><em>[Screenshot: Comparing dev vs prod query results]</em></p>
<hr/>
<h2 id="scenario-6-forward-only-plans">Scenario 6: Forward-Only Plans<a class="headerlink" href="#scenario-6-forward-only-plans" title="Link to this section">¶</a></h2>
<p>Forward-only plans reuse existing tables instead of creating new ones, avoiding backfill costs. This is useful for expensive models.</p>
<h3 id="step-1-modify-model-for-forward-only">Step 1: Modify Model for Forward-Only<a class="headerlink" href="#step-1-modify-model-for-forward-only" title="Link to this section">¶</a></h3>
<p>Edit <code>models/sales/daily_sales.sql</code> to add a comment (minimal change):</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-32-1"><a href="#__codelineno-32-1" id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-32-2"><a href="#__codelineno-32-2" id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">daily_sales</span><span class="p">,</span>
</span><span id="__span-32-3"><a href="#__codelineno-32-3" id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="w">  </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-32-4"><a href="#__codelineno-32-4" id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">    </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-32-5"><a href="#__codelineno-32-5" id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="w">    </span><span class="n">batch_size</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-32-6"><a href="#__codelineno-32-6" id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="w">  </span><span class="p">),</span>
</span><span id="__span-32-7"><a href="#__codelineno-32-7" id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">  </span><span class="k">start</span><span class="w"> </span><span class="s1">'2025-01-01'</span><span class="p">,</span>
</span><span id="__span-32-8"><a href="#__codelineno-32-8" id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">  </span><span class="n">cron</span><span class="w"> </span><span class="s1">'@daily'</span><span class="p">,</span>
</span><span id="__span-32-9"><a href="#__codelineno-32-9" id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">  </span><span class="n">grain</span><span class="w"> </span><span class="p">[</span><span class="n">order_date</span><span class="p">]</span>
</span><span id="__span-32-10"><a href="#__codelineno-32-10" id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="p">);</span>
</span><span id="__span-32-11"><a href="#__codelineno-32-11" id="__codelineno-32-11" name="__codelineno-32-11"></a>
</span><span id="__span-32-12"><a href="#__codelineno-32-12" id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="c1">-- Updated: Added comment for documentation</span>
</span><span id="__span-32-13"><a href="#__codelineno-32-13" id="__codelineno-32-13" name="__codelineno-32-13"></a><span class="k">SELECT</span>
</span><span id="__span-32-14"><a href="#__codelineno-32-14" id="__codelineno-32-14" name="__codelineno-32-14"></a><span class="w">  </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-32-15"><a href="#__codelineno-32-15" id="__codelineno-32-15" name="__codelineno-32-15"></a><span class="w">  </span><span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">order_id</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_orders</span><span class="p">,</span>
</span><span id="__span-32-16"><a href="#__codelineno-32-16" id="__codelineno-32-16" name="__codelineno-32-16"></a><span class="w">  </span><span class="k">SUM</span><span class="p">(</span><span class="n">order_amount</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_revenue</span><span class="p">,</span>
</span><span id="__span-32-17"><a href="#__codelineno-32-17" id="__codelineno-32-17" name="__codelineno-32-17"></a><span class="w">  </span><span class="k">AVG</span><span class="p">(</span><span class="n">order_amount</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">avg_order_value</span><span class="p">,</span>
</span><span id="__span-32-18"><a href="#__codelineno-32-18" id="__codelineno-32-18" name="__codelineno-32-18"></a><span class="w">  </span><span class="k">MAX</span><span class="p">(</span><span class="n">order_id</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">last_order_id</span>
</span><span id="__span-32-19"><a href="#__codelineno-32-19" id="__codelineno-32-19" name="__codelineno-32-19"></a><span class="k">FROM</span><span class="w"> </span><span class="n">raw</span><span class="p">.</span><span class="n">raw_orders</span>
</span><span id="__span-32-20"><a href="#__codelineno-32-20" id="__codelineno-32-20" name="__codelineno-32-20"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">order_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="o">@</span><span class="n">start_ds</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="o">@</span><span class="n">end_ds</span>
</span><span id="__span-32-21"><a href="#__codelineno-32-21" id="__codelineno-32-21" name="__codelineno-32-21"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">order_date</span>
</span></code></pre></div>
<h3 id="step-2-create-forward-only-plan">Step 2: Create Forward-Only Plan<a class="headerlink" href="#step-2-create-forward-only-plan" title="Link to this section">¶</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-33-1"><a href="#__codelineno-33-1" id="__codelineno-33-1" name="__codelineno-33-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>--forward-only
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-34-1"><a href="#__codelineno-34-1" id="__codelineno-34-1" name="__codelineno-34-1"></a>======================================================================
</span><span id="__span-34-2"><a href="#__codelineno-34-2" id="__codelineno-34-2" name="__codelineno-34-2"></a>Successfully Ran 2 tests against postgres
</span><span id="__span-34-3"><a href="#__codelineno-34-3" id="__codelineno-34-3" name="__codelineno-34-3"></a>----------------------------------------------------------------------
</span><span id="__span-34-4"><a href="#__codelineno-34-4" id="__codelineno-34-4" name="__codelineno-34-4"></a>
</span><span id="__span-34-5"><a href="#__codelineno-34-5" id="__codelineno-34-5" name="__codelineno-34-5"></a>Differences from the `prod` environment:
</span><span id="__span-34-6"><a href="#__codelineno-34-6" id="__codelineno-34-6" name="__codelineno-34-6"></a>
</span><span id="__span-34-7"><a href="#__codelineno-34-7" id="__codelineno-34-7" name="__codelineno-34-7"></a>Models:
</span><span id="__span-34-8"><a href="#__codelineno-34-8" id="__codelineno-34-8" name="__codelineno-34-8"></a>└── Directly Modified:
</span><span id="__span-34-9"><a href="#__codelineno-34-9" id="__codelineno-34-9" name="__codelineno-34-9"></a>    └── sales.daily_sales
</span><span id="__span-34-10"><a href="#__codelineno-34-10" id="__codelineno-34-10" name="__codelineno-34-10"></a>
</span><span id="__span-34-11"><a href="#__codelineno-34-11" id="__codelineno-34-11" name="__codelineno-34-11"></a>Directly Modified: sales.daily_sales (Forward-only)
</span><span id="__span-34-12"><a href="#__codelineno-34-12" id="__codelineno-34-12" name="__codelineno-34-12"></a>└── Diff:
</span><span id="__span-34-13"><a href="#__codelineno-34-13" id="__codelineno-34-13" name="__codelineno-34-13"></a>    @@ -1,6 +1,7 @@
</span><span id="__span-34-14"><a href="#__codelineno-34-14" id="__codelineno-34-14" name="__codelineno-34-14"></a>    MODEL (
</span><span id="__span-34-15"><a href="#__codelineno-34-15" id="__codelineno-34-15" name="__codelineno-34-15"></a>      name sales.daily_sales,
</span><span id="__span-34-16"><a href="#__codelineno-34-16" id="__codelineno-34-16" name="__codelineno-34-16"></a>    ...
</span><span id="__span-34-17"><a href="#__codelineno-34-17" id="__codelineno-34-17" name="__codelineno-34-17"></a>    +-- Updated: Added comment for documentation
</span><span id="__span-34-18"><a href="#__codelineno-34-18" id="__codelineno-34-18" name="__codelineno-34-18"></a>      SELECT
</span><span id="__span-34-19"><a href="#__codelineno-34-19" id="__codelineno-34-19" name="__codelineno-34-19"></a>        order_date,
</span><span id="__span-34-20"><a href="#__codelineno-34-20" id="__codelineno-34-20" name="__codelineno-34-20"></a>
</span><span id="__span-34-21"><a href="#__codelineno-34-21" id="__codelineno-34-21" name="__codelineno-34-21"></a>Models needing backfill (missing dates):
</span><span id="__span-34-22"><a href="#__codelineno-34-22" id="__codelineno-34-22" name="__codelineno-34-22"></a>└── sales.daily_sales: 2025-01-15 - 2025-01-15 (preview)
</span><span id="__span-34-23"><a href="#__codelineno-34-23" id="__codelineno-34-23" name="__codelineno-34-23"></a>
</span><span id="__span-34-24"><a href="#__codelineno-34-24" id="__codelineno-34-24" name="__codelineno-34-24"></a>Apply - Virtual Update [y/n]:
</span></code></pre></div><p></p>
<p><em>[Screenshot: Forward-only plan showing preview backfill]</em></p>
<h3 id="understanding-forward-only-plans">Understanding Forward-Only Plans<a class="headerlink" href="#understanding-forward-only-plans" title="Link to this section">¶</a></h3>
<ul>
<li>
<p><strong>Forward-only category</strong>: Automatically assigned</p>
</li>
<li>
<p><strong>Preview backfill</strong>: Only processes the latest interval for preview</p>
</li>
<li>
<p><strong>Virtual Update</strong>: No new physical table created</p>
</li>
<li>
<p><strong>Reuses existing table</strong>: Production will use the same physical table</p>
</li>
</ul>
<h3 id="step-3-apply-forward-only-plan">Step 3: Apply Forward-Only Plan<a class="headerlink" href="#step-3-apply-forward-only-plan" title="Link to this section">¶</a></h3>
<p>Type <code>y</code> to apply:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a href="#__codelineno-35-1" id="__codelineno-35-1" name="__codelineno-35-1"></a>Apply - Virtual Update [y/n]: y
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-36-1"><a href="#__codelineno-36-1" id="__codelineno-36-1" name="__codelineno-36-1"></a>[1/1] sales.daily_sales          [insert 2025-01-15 - 2025-01-15] 0.8s
</span><span id="__span-36-2"><a href="#__codelineno-36-2" id="__codelineno-36-2" name="__codelineno-36-2"></a>
</span><span id="__span-36-3"><a href="#__codelineno-36-3" id="__codelineno-36-3" name="__codelineno-36-3"></a>Executing model batches ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 100.0% • 1/1 • 0:00:01
</span><span id="__span-36-4"><a href="#__codelineno-36-4" id="__codelineno-36-4" name="__codelineno-36-4"></a>
</span><span id="__span-36-5"><a href="#__codelineno-36-5" id="__codelineno-36-5" name="__codelineno-36-5"></a>✔ Model batches executed
</span><span id="__span-36-6"><a href="#__codelineno-36-6" id="__codelineno-36-6" name="__codelineno-36-6"></a>✔ Plan applied successfully
</span></code></pre></div><p></p>
<p><em>[Screenshot: Forward-only plan applied with minimal backfill]</em></p>
<h3 id="benefits-of-forward-only">Benefits of Forward-Only<a class="headerlink" href="#benefits-of-forward-only" title="Link to this section">¶</a></h3>
<ul>
<li>
<p><strong>Fast</strong>: Only processes latest interval</p>
</li>
<li>
<p><strong>Cost-effective</strong>: No full backfill required</p>
</li>
<li>
<p><strong>Safe for production</strong>: Reuses existing tables</p>
</li>
</ul>
<hr/>
<h2 id="scenario-7-restatement-plans">Scenario 7: Restatement Plans<a class="headerlink" href="#scenario-7-restatement-plans" title="Link to this section">¶</a></h2>
<p>Restatement plans reprocess existing data without changing model definitions. Useful for fixing data issues or reprocessing after upstream corrections.</p>
<h3 id="step-1-check-current-state">Step 1: Check Current State<a class="headerlink" href="#step-1-check-current-state" title="Link to this section">¶</a></h3>
<p>First, verify what data exists:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-37-1"><a href="#__codelineno-37-1" id="__codelineno-37-1" name="__codelineno-37-1"></a>vulcan<span class="w"> </span>fetchdf<span class="w"> </span><span class="s2">"SELECT MIN(order_date), MAX(order_date), COUNT(*) FROM sales.daily_sales"</span>
</span></code></pre></div>
<p><em>[Screenshot: Current data range in daily_sales]</em></p>
<h3 id="step-2-create-restatement-plan">Step 2: Create Restatement Plan<a class="headerlink" href="#step-2-create-restatement-plan" title="Link to this section">¶</a></h3>
<p>Restate the <code>daily_sales</code> model for a specific date range:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-38-1"><a href="#__codelineno-38-1" id="__codelineno-38-1" name="__codelineno-38-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>--restate-model<span class="w"> </span><span class="s2">"sales.daily_sales"</span><span class="w"> </span>--start<span class="w"> </span><span class="s2">"2025-01-10"</span><span class="w"> </span>--end<span class="w"> </span><span class="s2">"2025-01-12"</span>
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-39-1"><a href="#__codelineno-39-1" id="__codelineno-39-1" name="__codelineno-39-1"></a>======================================================================
</span><span id="__span-39-2"><a href="#__codelineno-39-2" id="__codelineno-39-2" name="__codelineno-39-2"></a>Successfully Ran 2 tests against postgres
</span><span id="__span-39-3"><a href="#__codelineno-39-3" id="__codelineno-39-3" name="__codelineno-39-3"></a>----------------------------------------------------------------------
</span><span id="__span-39-4"><a href="#__codelineno-39-4" id="__codelineno-39-4" name="__codelineno-39-4"></a>
</span><span id="__span-39-5"><a href="#__codelineno-39-5" id="__codelineno-39-5" name="__codelineno-39-5"></a>Restatement plan for `prod` environment
</span><span id="__span-39-6"><a href="#__codelineno-39-6" id="__codelineno-39-6" name="__codelineno-39-6"></a>
</span><span id="__span-39-7"><a href="#__codelineno-39-7" id="__codelineno-39-7" name="__codelineno-39-7"></a>Models to restate:
</span><span id="__span-39-8"><a href="#__codelineno-39-8" id="__codelineno-39-8" name="__codelineno-39-8"></a>└── sales.daily_sales
</span><span id="__span-39-9"><a href="#__codelineno-39-9" id="__codelineno-39-9" name="__codelineno-39-9"></a>
</span><span id="__span-39-10"><a href="#__codelineno-39-10" id="__codelineno-39-10" name="__codelineno-39-10"></a>Models needing backfill (missing dates):
</span><span id="__span-39-11"><a href="#__codelineno-39-11" id="__codelineno-39-11" name="__codelineno-39-11"></a>├── sales.daily_sales: 2025-01-10 - 2025-01-12
</span><span id="__span-39-12"><a href="#__codelineno-39-12" id="__codelineno-39-12" name="__codelineno-39-12"></a>└── sales.weekly_sales: 2025-01-06 - 2025-01-13
</span><span id="__span-39-13"><a href="#__codelineno-39-13" id="__codelineno-39-13" name="__codelineno-39-13"></a>
</span><span id="__span-39-14"><a href="#__codelineno-39-14" id="__codelineno-39-14" name="__codelineno-39-14"></a>Apply - Backfill Tables [y/n]:
</span></code></pre></div><p></p>
<p><em>[Screenshot: Restatement plan showing date range]</em></p>
<h3 id="understanding-restatement">Understanding Restatement<a class="headerlink" href="#understanding-restatement" title="Link to this section">¶</a></h3>
<ul>
<li>
<p><strong>No model changes</strong>: Model definition unchanged</p>
</li>
<li>
<p><strong>Cascading restatement</strong>: Downstream models (<code>weekly_sales</code>) also need restatement</p>
</li>
<li>
<p><strong>Date range</strong>: Only specified dates will be reprocessed</p>
</li>
</ul>
<h3 id="step-3-apply-restatement-plan">Step 3: Apply Restatement Plan<a class="headerlink" href="#step-3-apply-restatement-plan" title="Link to this section">¶</a></h3>
<p>Type <code>y</code> to apply:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-40-1"><a href="#__codelineno-40-1" id="__codelineno-40-1" name="__codelineno-40-1"></a>Apply - Backfill Tables [y/n]: y
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-41-1"><a href="#__codelineno-41-1" id="__codelineno-41-1" name="__codelineno-41-1"></a>[1/2] sales.daily_sales          [insert 2025-01-10 - 2025-01-12] 1.2s
</span><span id="__span-41-2"><a href="#__codelineno-41-2" id="__codelineno-41-2" name="__codelineno-41-2"></a>[2/2] sales.weekly_sales         [insert 2025-01-06 - 2025-01-13] 2.3s
</span><span id="__span-41-3"><a href="#__codelineno-41-3" id="__codelineno-41-3" name="__codelineno-41-3"></a>
</span><span id="__span-41-4"><a href="#__codelineno-41-4" id="__codelineno-41-4" name="__codelineno-41-4"></a>Executing model batches ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 100.0% • 2/2 • 0:00:04
</span><span id="__span-41-5"><a href="#__codelineno-41-5" id="__codelineno-41-5" name="__codelineno-41-5"></a>
</span><span id="__span-41-6"><a href="#__codelineno-41-6" id="__codelineno-41-6" name="__codelineno-41-6"></a>✔ Model batches executed
</span><span id="__span-41-7"><a href="#__codelineno-41-7" id="__codelineno-41-7" name="__codelineno-41-7"></a>✔ Plan applied successfully
</span></code></pre></div><p></p>
<p><em>[Screenshot: Restatement plan execution]</em></p>
<h3 id="use-cases-for-restatement">Use Cases for Restatement<a class="headerlink" href="#use-cases-for-restatement" title="Link to this section">¶</a></h3>
<ul>
<li>
<p><strong>Upstream data correction</strong>: Raw data was fixed, need to reprocess</p>
</li>
<li>
<p><strong>Bug fixes</strong>: Found an issue in data processing logic (after fixing the model)</p>
</li>
<li>
<p><strong>Data refresh</strong>: Need to refresh specific date ranges</p>
</li>
</ul>
<hr/>
<h2 id="scenario-8-plan-with-explain-flag">Scenario 8: Plan with Explain Flag<a class="headerlink" href="#scenario-8-plan-with-explain-flag" title="Link to this section">¶</a></h2>
<p>The <code>--explain</code> flag provides detailed information about what a plan will do.</p>
<h3 id="step-1-create-plan-with-explain">Step 1: Create Plan with Explain<a class="headerlink" href="#step-1-create-plan-with-explain" title="Link to this section">¶</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-42-1"><a href="#__codelineno-42-1" id="__codelineno-42-1" name="__codelineno-42-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>--explain
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-43-1"><a href="#__codelineno-43-1" id="__codelineno-43-1" name="__codelineno-43-1"></a>======================================================================
</span><span id="__span-43-2"><a href="#__codelineno-43-2" id="__codelineno-43-2" name="__codelineno-43-2"></a>Successfully Ran 2 tests against postgres
</span><span id="__span-43-3"><a href="#__codelineno-43-3" id="__codelineno-43-3" name="__codelineno-43-3"></a>----------------------------------------------------------------------
</span><span id="__span-43-4"><a href="#__codelineno-43-4" id="__codelineno-43-4" name="__codelineno-43-4"></a>
</span><span id="__span-43-5"><a href="#__codelineno-43-5" id="__codelineno-43-5" name="__codelineno-43-5"></a>Explained plan
</span><span id="__span-43-6"><a href="#__codelineno-43-6" id="__codelineno-43-6" name="__codelineno-43-6"></a>├── Validate SQL and create physical layer tables and views if they do not exist
</span><span id="__span-43-7"><a href="#__codelineno-43-7" id="__codelineno-43-7" name="__codelineno-43-7"></a>│   ├── raw.raw_customers -&gt; db.vulcan__raw.vulcan__raw_customers__1234567890
</span><span id="__span-43-8"><a href="#__codelineno-43-8" id="__codelineno-43-8" name="__codelineno-43-8"></a>│   │   ├── Dry run model query without inserting results
</span><span id="__span-43-9"><a href="#__codelineno-43-9" id="__codelineno-43-9" name="__codelineno-43-9"></a>│   │   └── Create table if it doesn't exist
</span><span id="__span-43-10"><a href="#__codelineno-43-10" id="__codelineno-43-10" name="__codelineno-43-10"></a>│   └── sales.daily_sales -&gt; db.vulcan__sales.vulcan__sales__daily_sales__9876543210
</span><span id="__span-43-11"><a href="#__codelineno-43-11" id="__codelineno-43-11" name="__codelineno-43-11"></a>│       ├── Dry run model query without inserting results
</span><span id="__span-43-12"><a href="#__codelineno-43-12" id="__codelineno-43-12" name="__codelineno-43-12"></a>│       └── Create table if it doesn't exist
</span><span id="__span-43-13"><a href="#__codelineno-43-13" id="__codelineno-43-13" name="__codelineno-43-13"></a>├── Backfill models by running their queries and run standalone audits
</span><span id="__span-43-14"><a href="#__codelineno-43-14" id="__codelineno-43-14" name="__codelineno-43-14"></a>│   ├── raw.raw_customers -&gt; db.vulcan__raw.vulcan__raw_customers__1234567890
</span><span id="__span-43-15"><a href="#__codelineno-43-15" id="__codelineno-43-15" name="__codelineno-43-15"></a>│   │   └── Fully refresh table
</span><span id="__span-43-16"><a href="#__codelineno-43-16" id="__codelineno-43-16" name="__codelineno-43-16"></a>│   └── sales.daily_sales -&gt; db.vulcan__sales.vulcan__sales__daily_sales__9876543210
</span><span id="__span-43-17"><a href="#__codelineno-43-17" id="__codelineno-43-17" name="__codelineno-43-17"></a>│       ├── Insert 2025-01-01 - 2025-01-15
</span><span id="__span-43-18"><a href="#__codelineno-43-18" id="__codelineno-43-18" name="__codelineno-43-18"></a>│       └── Run 'assert_positive_order_ids' audit
</span><span id="__span-43-19"><a href="#__codelineno-43-19" id="__codelineno-43-19" name="__codelineno-43-19"></a>└── Update the virtual layer for environment 'prod'
</span><span id="__span-43-20"><a href="#__codelineno-43-20" id="__codelineno-43-20" name="__codelineno-43-20"></a>    └── Create or update views in the virtual layer to point at new physical tables
</span><span id="__span-43-21"><a href="#__codelineno-43-21" id="__codelineno-43-21" name="__codelineno-43-21"></a>        ├── raw.raw_customers -&gt; db.vulcan__raw.vulcan__raw_customers__1234567890
</span><span id="__span-43-22"><a href="#__codelineno-43-22" id="__codelineno-43-22" name="__codelineno-43-22"></a>        └── sales.daily_sales -&gt; db.vulcan__sales.vulcan__sales__daily_sales__9876543210
</span></code></pre></div><p></p>
<p><em>[Screenshot: Explained plan output showing detailed actions]</em></p>
<h3 id="understanding-explained-plans">Understanding Explained Plans<a class="headerlink" href="#understanding-explained-plans" title="Link to this section">¶</a></h3>
<p>The explain output shows three main phases:</p>
<ol>
<li><strong>Validation &amp; Table Creation</strong>: 
   - Dry runs each model query</li>
</ol>
<ul>
<li>
<p>Creates physical tables if needed</p>
</li>
<li>
<p>Shows mapping: <code>model_name -&gt; physical_table_name</code></p>
</li>
</ul>
<ol start="2">
<li><strong>Backfill</strong>:
   - Shows which models will be backfilled</li>
</ol>
<ul>
<li>
<p>Indicates backfill type (full refresh vs incremental)</p>
</li>
<li>
<p>Lists audits that will run</p>
</li>
</ul>
<ol start="3">
<li><strong>Virtual Layer Update</strong>:
   - Shows how views will be created/updated</li>
</ol>
<ul>
<li>Maps virtual layer names to physical tables</li>
</ul>
<hr/>
<h2 id="common-plan-scenarios-summary">Common Plan Scenarios Summary<a class="headerlink" href="#common-plan-scenarios-summary" title="Link to this section">¶</a></h2>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Command</th>
<th>When to Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>First Plan</strong></td>
<td><code>vulcan plan</code></td>
<td>Initializing production environment</td>
</tr>
<tr>
<td><strong>Add Model</strong></td>
<td><code>vulcan plan</code></td>
<td>Adding new models to existing project</td>
</tr>
<tr>
<td><strong>Non-Breaking Change</strong></td>
<td><code>vulcan plan</code></td>
<td>Adding columns, comments, or non-functional changes</td>
</tr>
<tr>
<td><strong>Breaking Change</strong></td>
<td><code>vulcan plan</code></td>
<td>Modifying logic that affects downstream models</td>
</tr>
<tr>
<td><strong>Dev Environment</strong></td>
<td><code>vulcan plan dev</code></td>
<td>Testing changes without affecting production</td>
</tr>
<tr>
<td><strong>Forward-Only</strong></td>
<td><code>vulcan plan --forward-only</code></td>
<td>Expensive models, avoiding backfill costs</td>
</tr>
<tr>
<td><strong>Restatement</strong></td>
<td><code>vulcan plan --restate-model "model"</code></td>
<td>Reprocessing existing data</td>
</tr>
<tr>
<td><strong>Explain</strong></td>
<td><code>vulcan plan --explain</code></td>
<td>Understanding detailed plan actions</td>
</tr>
</tbody>
</table>
<hr/>
<h2 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Link to this section">¶</a></h2>
<ol>
<li><strong>Always review plans</strong> before applying them</li>
<li><strong>Use dev environments</strong> for testing breaking changes</li>
<li><strong>Use forward-only</strong> for expensive models when appropriate</li>
<li><strong>Check downstream impact</strong> - breaking changes cascade</li>
<li><strong>Use <code>--explain</code></strong> when unsure about plan actions</li>
<li><strong>Restate carefully</strong> - it reprocesses existing data</li>
</ol>
<hr/>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Link to this section">¶</a></h2>
<ul>
<li>
<p>Learn about <a href="../../references/plans/">Plans Concepts</a> for deeper understanding</p>
</li>
<li>
<p>Explore <a href="../../references/environments/">Environments</a> for managing multiple environments</p>
</li>
<li>
<p>Read about <a href="../../components/model/model_kinds/">Model Kinds</a> to understand different model types</p>
</li>
<li>
<p>Set up <a href="../../configurations/options/notifications/">Notifications</a> to monitor plan execution</p>
</li>
</ul>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2025 DataOS Vulcan Team<br/>
<small>Complete stack for building data products</small>
</div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/tmdc-io/vulcan-book" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-progress" data-md-component="progress" role="progressbar"></div>
<script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tracking", "navigation.indexes", "navigation.path", "navigation.top", "navigation.footer", "toc.follow", "search.highlight", "search.suggest", "search.share", "content.tabs.link", "content.code.copy", "content.code.annotate", "content.tooltips"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
<script src="../../assets/javascripts/mermaid-zoom.js"></script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>