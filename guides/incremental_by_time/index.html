<!DOCTYPE html>
<html class="no-js" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Complete documentation for Vulcan - complete stack for building data products" name="description"/>
<meta content="DataOS Vulcan Team" name="author"/>
<link href="https://tmdc-io.github.io/vulcan-docs/guides/incremental_by_time/" rel="canonical"/>
<link href="../models/" rel="prev"/>
<link href="../data_quality/" rel="next"/>
<link href="../../assets/images/vulcan.svg" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.0" name="generator"/>
<title>Incremental by Time - DataOS Vulcan</title>
<link href="../../assets/stylesheets/main.618322db.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
<link href="../../assets/stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
<body data-md-color-accent="blue-grey" data-md-color-primary="blue-grey" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#incremental-by-time">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="DataOS Vulcan" class="md-header__button md-logo" data-md-component="logo" href="../.." title="DataOS Vulcan">
<img alt="logo" src="../../assets/images/vulcan-white.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DataOS Vulcan
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Incremental by Time
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="blue-grey" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="blue-grey" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="blue-grey" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="blue-grey" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/tmdc-io/vulcan-book" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    tmdc-io/vulcan-book
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DataOS Vulcan" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="DataOS Vulcan">
<img alt="logo" src="../../assets/images/vulcan-white.svg"/>
</a>
    DataOS Vulcan
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/tmdc-io/vulcan-book" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    tmdc-io/vulcan-book
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    
  
    About
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Configurations
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Configurations
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Options
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Options
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/model_defaults/">
<span class="md-ellipsis">
    
  
    Model Defaults
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/variables/">
<span class="md-ellipsis">
    
  
    Variables
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/execution_hooks/">
<span class="md-ellipsis">
    
  
    Execution Hooks
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/notifications/">
<span class="md-ellipsis">
    
  
    Notifications
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/options/linter/">
<span class="md-ellipsis">
    
  
    Linter
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Engines
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Engines
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/bigquery/bigquery/">
<span class="md-ellipsis">
    
  
    BigQuery
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/databricks/databricks/">
<span class="md-ellipsis">
    
  
    Databricks
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/fabric/fabric/">
<span class="md-ellipsis">
    
  
    Microsoft Fabric
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/mssql/mssql/">
<span class="md-ellipsis">
    
  
    Microsoft SQL Server
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/mysql/mysql/">
<span class="md-ellipsis">
    
  
    MySQL
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/postgres/postgres/">
<span class="md-ellipsis">
    
  
    Postgres
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/redshift/redshift/">
<span class="md-ellipsis">
    
  
    Amazon Redshift
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/snowflake/snowflake/">
<span class="md-ellipsis">
    
  
    Snowflake
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configurations/engines/trino/trino/">
<span class="md-ellipsis">
    
  
    Trino
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ci-cd/ci-cd/">
<span class="md-ellipsis">
    
  
    CI/CD
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Components
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Components
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Model
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Model
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/properties/">
<span class="md-ellipsis">
    
  
    Properties
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Types
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_1_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Types
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/types/sql_models/">
<span class="md-ellipsis">
    
  
    SQL
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/types/python_models/">
<span class="md-ellipsis">
    
  
    Python
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/types/external_models/">
<span class="md-ellipsis">
    
  
    External
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/types/managed_models/">
<span class="md-ellipsis">
    
  
    Managed
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/model_kinds/">
<span class="md-ellipsis">
    
  
    Kinds
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model/statements/">
<span class="md-ellipsis">
    
  
    Statements
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/tests/tests/">
<span class="md-ellipsis">
    
  
    Tests
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/audits/audits/">
<span class="md-ellipsis">
    
  
    Audits
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/checks/checks/">
<span class="md-ellipsis">
    
  
    Checks
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Semantics
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Semantics
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/semantics/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/semantics/models/">
<span class="md-ellipsis">
    
  
    Semantic Models
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/semantics/business_metrics/">
<span class="md-ellipsis">
    
  
    Business Metrics
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Advance Features
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_6">
<span class="md-nav__icon md-icon"></span>
            
  
    Advance Features
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6_1" id="__nav_3_6_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Macros
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_6_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Macros
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/macros/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/macros/variables/">
<span class="md-ellipsis">
    
  
    Variables
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/macros/built_in/">
<span class="md-ellipsis">
    
  
    Built In
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/macros/jinja/">
<span class="md-ellipsis">
    
  
    Jinja
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/signals/">
<span class="md-ellipsis">
    
  
    Signals
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/advanced-features/custom_materializations/">
<span class="md-ellipsis">
    
  
    Custom materializations
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../get-started/docker/">
<span class="md-ellipsis">
    
  
    Get Started
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../plan_guide/">
<span class="md-ellipsis">
    
  
    Plan
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../run_and_scheduling/">
<span class="md-ellipsis">
    
  
    Run and Scheduling
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../models/">
<span class="md-ellipsis">
    
  
    Models
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    
  
    Incremental by Time
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    
  
    Incremental by Time
  

    
  </span>
</a>
<nav aria-label="On this page" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      On this page
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#why-use-incremental-models">
<span class="md-ellipsis">
      
        Why Use Incremental Models?
      
    </span>
</a>
<nav aria-label="Why Use Incremental Models?" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-problem-full-refreshes-are-expensive">
<span class="md-ellipsis">
      
        The Problem: Full Refreshes Are Expensive
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-solution-only-process-whats-new">
<span class="md-ellipsis">
      
        The Solution: Only Process What's New
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-incremental-models-work">
<span class="md-ellipsis">
      
        How Incremental Models Work
      
    </span>
</a>
<nav aria-label="How Incremental Models Work" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-vulcan-checks-whats-already-done">
<span class="md-ellipsis">
      
        Step 1: Vulcan Checks What's Already Done
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-vulcan-processes-only-missing-intervals">
<span class="md-ellipsis">
      
        Step 2: Vulcan Processes Only Missing Intervals
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-results-are-inserted">
<span class="md-ellipsis">
      
        Step 3: Results Are Inserted
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-time-intervals">
<span class="md-ellipsis">
      
        Understanding Time Intervals
      
    </span>
</a>
<nav aria-label="Understanding Time Intervals" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#daily-intervals-example">
<span class="md-ellipsis">
      
        Daily Intervals Example
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#weekly-intervals-example">
<span class="md-ellipsis">
      
        Weekly Intervals Example
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-vulcan-tracks-intervals">
<span class="md-ellipsis">
      
        How Vulcan Tracks Intervals
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#creating-an-incremental-model">
<span class="md-ellipsis">
      
        Creating an Incremental Model
      
    </span>
</a>
<nav aria-label="Creating an Incremental Model" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-create-the-model-file">
<span class="md-ellipsis">
      
        Step 1: Create the Model File
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-define-the-model">
<span class="md-ellipsis">
      
        Step 2: Define the Model
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#key-components-explained">
<span class="md-ellipsis">
      
        Key Components Explained
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-apply-the-model">
<span class="md-ellipsis">
      
        Step 3: Apply the Model
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#real-example-daily-sales-from-orders360">
<span class="md-ellipsis">
      
        Real Example: Daily Sales from Orders360
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-the-where-clause">
<span class="md-ellipsis">
      
        Understanding the WHERE Clause
      
    </span>
</a>
<nav aria-label="Understanding the WHERE Clause" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#two-where-clauses-two-purposes">
<span class="md-ellipsis">
      
        Two WHERE Clauses, Two Purposes
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#why-both-are-needed">
<span class="md-ellipsis">
      
        Why Both Are Needed
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#running-incremental-models">
<span class="md-ellipsis">
      
        Running Incremental Models
      
    </span>
</a>
<nav aria-label="Running Incremental Models" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#vulcan-plan-for-model-changes">
<span class="md-ellipsis">
      
        vulcan plan - For Model Changes
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vulcan-run-for-scheduled-execution">
<span class="md-ellipsis">
      
        vulcan run - For Scheduled Execution
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-cron-schedules-work">
<span class="md-ellipsis">
      
        How Cron Schedules Work
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#batch-processing">
<span class="md-ellipsis">
      
        Batch Processing
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#forward-only-models">
<span class="md-ellipsis">
      
        Forward-Only Models
      
    </span>
</a>
<nav aria-label="Forward-Only Models" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-are-forward-only-models">
<span class="md-ellipsis">
      
        What Are Forward-Only Models?
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#when-to-use-forward-only">
<span class="md-ellipsis">
      
        When to Use Forward-Only
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#making-a-model-forward-only">
<span class="md-ellipsis">
      
        Making a Model Forward-Only
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#forward-only-plans">
<span class="md-ellipsis">
      
        Forward-Only Plans
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#schema-changes-in-forward-only-models">
<span class="md-ellipsis">
      
        Schema Changes in Forward-Only Models
      
    </span>
</a>
<nav aria-label="Schema Changes in Forward-Only Models" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#types-of-schema-changes">
<span class="md-ellipsis">
      
        Types of Schema Changes
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#controlling-schema-change-behavior">
<span class="md-ellipsis">
      
        Controlling Schema Change Behavior
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#common-patterns">
<span class="md-ellipsis">
      
        Common Patterns
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#important-notes">
<span class="md-ellipsis">
      
        Important Notes
      
    </span>
</a>
<nav aria-label="Important Notes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#time-column-must-be-utc">
<span class="md-ellipsis">
      
        Time Column Must Be UTC
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#always-include-where-clause">
<span class="md-ellipsis">
      
        Always Include WHERE Clause
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#set-a-start-date">
<span class="md-ellipsis">
      
        Set a Start Date
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#choose-appropriate-batch_size">
<span class="md-ellipsis">
      
        Choose Appropriate batch_size
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#summary">
<span class="md-ellipsis">
      
        Summary
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#next-steps">
<span class="md-ellipsis">
      
        Next Steps
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../data_quality/">
<span class="md-ellipsis">
    
  
    Data Quality
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../model_selection/">
<span class="md-ellipsis">
    
  
    Model Selection
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../transpiling_semantics/">
<span class="md-ellipsis">
    
  
    Transpiling Semantics
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli-command/cli/">
<span class="md-ellipsis">
    
  
    CLI Commands
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cookbook/">
<span class="md-ellipsis">
    
  
    Cookbook
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../faq/">
<span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="On this page" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      On this page
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#why-use-incremental-models">
<span class="md-ellipsis">
      
        Why Use Incremental Models?
      
    </span>
</a>
<nav aria-label="Why Use Incremental Models?" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-problem-full-refreshes-are-expensive">
<span class="md-ellipsis">
      
        The Problem: Full Refreshes Are Expensive
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-solution-only-process-whats-new">
<span class="md-ellipsis">
      
        The Solution: Only Process What's New
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-incremental-models-work">
<span class="md-ellipsis">
      
        How Incremental Models Work
      
    </span>
</a>
<nav aria-label="How Incremental Models Work" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-vulcan-checks-whats-already-done">
<span class="md-ellipsis">
      
        Step 1: Vulcan Checks What's Already Done
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-vulcan-processes-only-missing-intervals">
<span class="md-ellipsis">
      
        Step 2: Vulcan Processes Only Missing Intervals
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-results-are-inserted">
<span class="md-ellipsis">
      
        Step 3: Results Are Inserted
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-time-intervals">
<span class="md-ellipsis">
      
        Understanding Time Intervals
      
    </span>
</a>
<nav aria-label="Understanding Time Intervals" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#daily-intervals-example">
<span class="md-ellipsis">
      
        Daily Intervals Example
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#weekly-intervals-example">
<span class="md-ellipsis">
      
        Weekly Intervals Example
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-vulcan-tracks-intervals">
<span class="md-ellipsis">
      
        How Vulcan Tracks Intervals
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#creating-an-incremental-model">
<span class="md-ellipsis">
      
        Creating an Incremental Model
      
    </span>
</a>
<nav aria-label="Creating an Incremental Model" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-create-the-model-file">
<span class="md-ellipsis">
      
        Step 1: Create the Model File
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-define-the-model">
<span class="md-ellipsis">
      
        Step 2: Define the Model
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#key-components-explained">
<span class="md-ellipsis">
      
        Key Components Explained
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-apply-the-model">
<span class="md-ellipsis">
      
        Step 3: Apply the Model
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#real-example-daily-sales-from-orders360">
<span class="md-ellipsis">
      
        Real Example: Daily Sales from Orders360
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-the-where-clause">
<span class="md-ellipsis">
      
        Understanding the WHERE Clause
      
    </span>
</a>
<nav aria-label="Understanding the WHERE Clause" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#two-where-clauses-two-purposes">
<span class="md-ellipsis">
      
        Two WHERE Clauses, Two Purposes
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#why-both-are-needed">
<span class="md-ellipsis">
      
        Why Both Are Needed
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#running-incremental-models">
<span class="md-ellipsis">
      
        Running Incremental Models
      
    </span>
</a>
<nav aria-label="Running Incremental Models" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#vulcan-plan-for-model-changes">
<span class="md-ellipsis">
      
        vulcan plan - For Model Changes
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vulcan-run-for-scheduled-execution">
<span class="md-ellipsis">
      
        vulcan run - For Scheduled Execution
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-cron-schedules-work">
<span class="md-ellipsis">
      
        How Cron Schedules Work
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#batch-processing">
<span class="md-ellipsis">
      
        Batch Processing
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#forward-only-models">
<span class="md-ellipsis">
      
        Forward-Only Models
      
    </span>
</a>
<nav aria-label="Forward-Only Models" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-are-forward-only-models">
<span class="md-ellipsis">
      
        What Are Forward-Only Models?
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#when-to-use-forward-only">
<span class="md-ellipsis">
      
        When to Use Forward-Only
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#making-a-model-forward-only">
<span class="md-ellipsis">
      
        Making a Model Forward-Only
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#forward-only-plans">
<span class="md-ellipsis">
      
        Forward-Only Plans
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#schema-changes-in-forward-only-models">
<span class="md-ellipsis">
      
        Schema Changes in Forward-Only Models
      
    </span>
</a>
<nav aria-label="Schema Changes in Forward-Only Models" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#types-of-schema-changes">
<span class="md-ellipsis">
      
        Types of Schema Changes
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#controlling-schema-change-behavior">
<span class="md-ellipsis">
      
        Controlling Schema Change Behavior
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#common-patterns">
<span class="md-ellipsis">
      
        Common Patterns
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#important-notes">
<span class="md-ellipsis">
      
        Important Notes
      
    </span>
</a>
<nav aria-label="Important Notes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#time-column-must-be-utc">
<span class="md-ellipsis">
      
        Time Column Must Be UTC
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#always-include-where-clause">
<span class="md-ellipsis">
      
        Always Include WHERE Clause
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#set-a-start-date">
<span class="md-ellipsis">
      
        Set a Start Date
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#choose-appropriate-batch_size">
<span class="md-ellipsis">
      
        Choose Appropriate batch_size
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#summary">
<span class="md-ellipsis">
      
        Summary
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#next-steps">
<span class="md-ellipsis">
      
        Next Steps
      
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<nav aria-label="Navigation" class="md-path">
<ol class="md-path__list">
<li class="md-path__item">
<a class="md-path__link" href="../..">
<span class="md-ellipsis">
    About
  </span>
</a>
</li>
<li class="md-path__item">
<a class="md-path__link" href="../get-started/docker/">
<span class="md-ellipsis">
    Guides
  </span>
</a>
</li>
</ol>
</nav>
<article class="md-content__inner md-typeset">
<h1 id="incremental-by-time">Incremental by Time<a class="headerlink" href="#incremental-by-time" title="Link to this section">¶</a></h1>
<p>This guide explains how incremental by time models work in Vulcan using the Orders360 example project. You'll learn why they're efficient, how they process data, and how to create them.</p>
<p>See the <a href="../models/">models guide</a> for general model information or the <a href="../../components/model/model_kinds/">model kinds page</a> for all model types.</p>
<hr/>
<h2 id="why-use-incremental-models">Why Use Incremental Models?<a class="headerlink" href="#why-use-incremental-models" title="Link to this section">¶</a></h2>
<h3 id="the-problem-full-refreshes-are-expensive">The Problem: Full Refreshes Are Expensive<a class="headerlink" href="#the-problem-full-refreshes-are-expensive" title="Link to this section">¶</a></h3>
<p>If you have a table with sales data from the last year (365 days), every time you run a <code>FULL</code> model, it processes all 365 days. This is inefficient when you only need to process today's data.</p>
<pre class="mermaid"><code>flowchart LR
    subgraph "FULL Model - Every Run"
        FULL[FULL Model Run]
        PROCESS[Process ALL 365 Days]
        DAY1[Day 1]
        DAY2[Day 2]
        DAY3[Day 3]
        DOTS[...]
        DAY365[Day 365]
    end

    subgraph "Results"
        TIME1[Time: 10 minutes]
        COST1[Cost: $10]
        DATA1[All 365 days]
    end

    FULL --&gt; PROCESS
    PROCESS --&gt; DAY1
    PROCESS --&gt; DAY2
    PROCESS --&gt; DAY3
    PROCESS --&gt; DOTS
    PROCESS --&gt; DAY365

    DAY365 --&gt; TIME1
    DAY365 --&gt; COST1
    DAY365 --&gt; DATA1

    style FULL fill:#ffebee,stroke:#d32f2f,stroke-width:3px,color:#000
    style PROCESS fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    style TIME1 fill:#e8f5e9,stroke:#388e3c,stroke-width:2px,color:#000
    style COST1 fill:#e8f5e9,stroke:#388e3c,stroke-width:2px,color:#000
    style DATA1 fill:#e8f5e9,stroke:#388e3c,stroke-width:2px,color:#000</code></pre>
<p><em>[Screenshot: Visual showing FULL model processing all 365 days]</em></p>
<h3 id="the-solution-only-process-whats-new">The Solution: Only Process What's New<a class="headerlink" href="#the-solution-only-process-whats-new" title="Link to this section">¶</a></h3>
<p>With incremental models, Vulcan only processes <strong>new or missing</strong> days:</p>
<pre class="mermaid"><code>flowchart LR
    subgraph "INCREMENTAL Model - Every Run"
        INCR[INCREMENTAL Model Run]
        CHECK[Check State Database]
        SKIP[Skip Days 1-364]
        PROCESS_NEW[Process Day 365 Only]
    end

    subgraph "Results"
        TIME2[Time: 30 seconds]
        COST2[Cost: $0.20]
        DATA2[Only Day 365]
    end

    INCR --&gt; CHECK
    CHECK --&gt; SKIP
    CHECK --&gt; PROCESS_NEW

    PROCESS_NEW --&gt; TIME2
    PROCESS_NEW --&gt; COST2
    PROCESS_NEW --&gt; DATA2

    style INCR fill:#e8f5e9,stroke:#388e3c,stroke-width:3px,color:#000
    style CHECK fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style SKIP fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,color:#000
    style PROCESS_NEW fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style TIME2 fill:#e8f5e9,stroke:#388e3c,stroke-width:2px,color:#000
    style COST2 fill:#e8f5e9,stroke:#388e3c,stroke-width:2px,color:#000
    style DATA2 fill:#e8f5e9,stroke:#388e3c,stroke-width:2px,color:#000</code></pre>
<p><em>[Screenshot: Visual showing incremental model processing only Day 365]</em></p>
<p><strong>Result:</strong> 50x faster and 50x cheaper! </p>
<p>Incremental models process only what you need, when you need it.</p>
<hr/>
<h2 id="how-incremental-models-work">How Incremental Models Work<a class="headerlink" href="#how-incremental-models-work" title="Link to this section">¶</a></h2>
<p>Incremental models use <strong>time intervals</strong> to track what's been processed. Think of it like a calendar where Vulcan checks off each day. It knows what's done and what still needs work.</p>
<pre class="mermaid"><code>flowchart TB
    subgraph "Incremental Processing Flow"
        START[vulcan run]
        CHECK[Check State Database&lt;br/&gt;What's already processed?]

        subgraph "State Database"
            PROCESSED1[Jan 1-7: Processed]
            PROCESSED2[Jan 8-14: Processed]
            MISSING[Jan 15-21: Missing]
        end

        CALC[Calculate Missing Intervals&lt;br/&gt;Jan 15-21 needs processing]
        SET_MACROS[Set Macros&lt;br/&gt;@start_ds = '2025-01-15'&lt;br/&gt;@end_ds = '2025-01-21']
        QUERY[Run Query&lt;br/&gt;WHERE order_date BETWEEN @start_ds AND @end_ds]
        INSERT[Insert Results&lt;br/&gt;Into weekly_sales table]
        UPDATE[Update State&lt;br/&gt;Mark Jan 15-21 as processed]
    end

    START --&gt; CHECK
    CHECK --&gt; PROCESSED1
    CHECK --&gt; PROCESSED2
    CHECK --&gt; MISSING

    MISSING --&gt; CALC
    CALC --&gt; SET_MACROS
    SET_MACROS --&gt; QUERY
    QUERY --&gt; INSERT
    INSERT --&gt; UPDATE

    UPDATE --&gt; PROCESSED1
    UPDATE --&gt; PROCESSED2

    style START fill:#fff3e0,stroke:#f57c00,stroke-width:3px,color:#000
    style CHECK fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style PROCESSED1 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style PROCESSED2 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style MISSING fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
    style CALC fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,color:#000
    style SET_MACROS fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    style QUERY fill:#e1f5fe,stroke:#0277bd,stroke-width:2px,color:#000
    style INSERT fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style UPDATE fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000</code></pre>
<h3 id="step-1-vulcan-checks-whats-already-done">Step 1: Vulcan Checks What's Already Done<a class="headerlink" href="#step-1-vulcan-checks-whats-already-done" title="Link to this section">¶</a></h3>
<p>When you run <code>vulcan run</code>, Vulcan looks at your state database and asks:</p>
<ul>
<li>
<p>"What dates have I already processed?" - These are done, skip them</p>
</li>
<li>
<p>"What dates are missing?" - These need work, process them</p>
</li>
</ul>
<p>It's like checking your to-do list, you only work on what's not done yet.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>State Database Check:
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>Jan 1-7:   Already processed
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>Jan 8-14:  Already processed  
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>Jan 15-21: Missing - needs processing
</span></code></pre></div>
<p><em>[Screenshot: Visual diagram showing state database check with processed vs missing intervals]</em></p>
<h3 id="step-2-vulcan-processes-only-missing-intervals">Step 2: Vulcan Processes Only Missing Intervals<a class="headerlink" href="#step-2-vulcan-processes-only-missing-intervals" title="Link to this section">¶</a></h3>
<p>Vulcan then processes only the missing dates. It sets up the macros (<code>@start_ds</code> and <code>@end_ds</code>) and runs your query for just that time range:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>Processing Jan 15-21:
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>@start_ds = '2025-01-15'
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>@end_ds   = '2025-01-21'
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>Query runs:
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a>SELECT ... FROM daily_sales
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a>WHERE order_date BETWEEN '2025-01-15' AND '2025-01-21'
</span></code></pre></div>
<p><em>[Screenshot: Visual showing how <a class="magiclink magiclink-github magiclink-mention" href="https://github.com/start_ds" title="GitHub User: start_ds">@start_ds</a> and <a class="magiclink magiclink-github magiclink-mention" href="https://github.com/end_ds" title="GitHub User: end_ds">@end_ds</a> are used in the query]</em></p>
<h3 id="step-3-results-are-inserted">Step 3: Results Are Inserted<a class="headerlink" href="#step-3-results-are-inserted" title="Link to this section">¶</a></h3>
<p>The processed data is inserted into your table, and Vulcan records that these dates are now complete. Next time you run, it'll know these dates are done and skip them. Efficient!</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>Jan 15-21: Now processed and recorded
</span></code></pre></div>
<p><em>[Screenshot: Visual showing data insertion and state update]</em></p>
<hr/>
<h2 id="understanding-time-intervals">Understanding Time Intervals<a class="headerlink" href="#understanding-time-intervals" title="Link to this section">¶</a></h2>
<p>Vulcan divides time into <strong>intervals</strong> based on your model's schedule. Each interval is a chunk of time that gets processed together, like a day, a week, or an hour, depending on your model's <code>cron</code> schedule.</p>
<h3 id="daily-intervals-example">Daily Intervals Example<a class="headerlink" href="#daily-intervals-example" title="Link to this section">¶</a></h3>
<p>For a daily model (<code>cron '@daily'</code>), each day is one interval:</p>
<pre class="mermaid"><code>gantt
    title Daily Intervals
    dateFormat YYYY-MM-DD
    section Intervals
    Jan 1 Complete     :done, interval1, 2025-01-01, 1d
    Jan 2 Complete     :done, interval2, 2025-01-02, 1d
    Jan 3 In Progress :active, interval3, 2025-01-03, 1d</code></pre>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a>Model Start: Jan 1, 2025
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>Today: Jan 3, 2025 at 2pm
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a>Intervals:
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>- Jan 1: Complete (full day passed)
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>- Jan 2: Complete (full day passed)
</span><span id="__span-3-8"><a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a>
</span><span id="__span-3-9"><a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a>- Jan 3: In progress (day not finished yet)
</span></code></pre></div>
<p><em>[Screenshot: Calendar view showing daily intervals with Jan 1-2 complete, Jan 3 in progress]</em></p>
<h3 id="weekly-intervals-example">Weekly Intervals Example<a class="headerlink" href="#weekly-intervals-example" title="Link to this section">¶</a></h3>
<p>For a weekly model (<code>cron '@weekly'</code>), each week is one interval:</p>
<pre class="mermaid"><code>gantt
    title Weekly Intervals
    dateFormat YYYY-MM-DD
    section Intervals
    Week 1 Jan 1-7     :done, week1, 2025-01-01, 7d
    Week 2 Jan 8-14    :done, week2, 2025-01-08, 7d
    Week 3 Jan 15-21   :active, week3, 2025-01-15, 7d</code></pre>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>Model Start: Jan 1, 2025
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>Today: Jan 15, 2025
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>Intervals:
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>- Week 1 (Jan 1-7):   Complete
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a>
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a>- Week 2 (Jan 8-14):  Complete
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a>
</span><span id="__span-4-9"><a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a>- Week 3 (Jan 15-21): In progress
</span></code></pre></div>
<p><em>[Screenshot: Calendar view showing weekly intervals]</em></p>
<h3 id="how-vulcan-tracks-intervals">How Vulcan Tracks Intervals<a class="headerlink" href="#how-vulcan-tracks-intervals" title="Link to this section">¶</a></h3>
<p>When you first run <code>vulcan plan</code> on an incremental model, Vulcan:</p>
<pre class="mermaid"><code>flowchart TB
    subgraph "First Plan - Jan 15, 2025"
        PLAN1[vulcan plan dev]
        CALC1[Calculate Intervals&lt;br/&gt;From start to now&lt;br/&gt;3 weeks total]
        PROCESS1[Process All Intervals&lt;br/&gt;Backfill everything]
        RECORD1[Record in State DB&lt;br/&gt;Weeks 1-3 processed]

        subgraph "State Database After Plan"
            W1[Week 1: Jan 1-7]
            W2[Week 2: Jan 8-14]
            W3[Week 3: Jan 15-21]
        end
    end

    PLAN1 --&gt; CALC1
    CALC1 --&gt; PROCESS1
    PROCESS1 --&gt; RECORD1
    RECORD1 --&gt; W1
    RECORD1 --&gt; W2
    RECORD1 --&gt; W3

    style PLAN1 fill:#fff3e0,stroke:#f57c00,stroke-width:3px,color:#000
    style CALC1 fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style PROCESS1 fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,color:#000
    style RECORD1 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style W1 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style W2 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style W3 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000</code></pre>
<ol>
<li><strong>Calculates all intervals</strong> from the start date to now</li>
<li><strong>Processes all missing intervals</strong> (backfill)</li>
<li><strong>Records what was processed</strong> in the state database</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>First Plan (Jan 15, 2025):
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>- Calculates: 3 weeks of intervals
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>- Processes: All 3 weeks
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>- Records: "Weeks 1-3 processed"
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a>State Database:
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a>Week 1 (Jan 1-7)
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a>Week 2 (Jan 8-14)
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a>Week 3 (Jan 15-21)
</span></code></pre></div>
<p><em>[Screenshot: Visual showing first plan calculating and processing all intervals]</em></p>
<p>When you run <code>vulcan run</code> later, Vulcan:</p>
<pre class="mermaid"><code>flowchart TB
    subgraph "Second Run - Jan 22, 2025"
        RUN2[vulcan run]
        CALC2[Calculate Intervals&lt;br/&gt;From start to now&lt;br/&gt;4 weeks total]
        CHECK[Check State DB&lt;br/&gt;What's already processed?]

        subgraph "Current State"
            W1_EXIST[Week 1: Jan 1-7]
            W2_EXIST[Week 2: Jan 8-14]
            W3_EXIST[Week 3: Jan 15-21]
            W4_MISS[Week 4: Jan 22-28]
        end

        PROCESS2[Process Only Week 4&lt;br/&gt;Skip Weeks 1-3]
        RECORD2[Update State DB&lt;br/&gt;Week 4 now processed]

        subgraph "Updated State"
            W1_NEW[Week 1: Jan 1-7]
            W2_NEW[Week 2: Jan 8-14]
            W3_NEW[Week 3: Jan 15-21]
            W4_NEW[Week 4: Jan 22-28]
        end
    end

    RUN2 --&gt; CALC2
    CALC2 --&gt; CHECK
    CHECK --&gt; W1_EXIST
    CHECK --&gt; W2_EXIST
    CHECK --&gt; W3_EXIST
    CHECK --&gt; W4_MISS

    W4_MISS --&gt; PROCESS2
    PROCESS2 --&gt; RECORD2

    RECORD2 --&gt; W1_NEW
    RECORD2 --&gt; W2_NEW
    RECORD2 --&gt; W3_NEW
    RECORD2 --&gt; W4_NEW

    style RUN2 fill:#e8f5e9,stroke:#388e3c,stroke-width:3px,color:#000
    style CALC2 fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style CHECK fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,color:#000
    style W4_MISS fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
    style PROCESS2 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style RECORD2 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000</code></pre>
<ol>
<li><strong>Calculates intervals</strong> from start to now</li>
<li><strong>Compares</strong> with what's already processed</li>
<li><strong>Processes only new intervals</strong></li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>Second Run (Jan 22, 2025):
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>- Calculates: 4 weeks total
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>- Already processed: Weeks 1-3
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>- Missing: Week 4 (Jan 22-28)
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>- Processes: Only Week 4
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a>State Database:
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>Week 1 (Jan 1-7)
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a>Week 2 (Jan 8-14)
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a>Week 3 (Jan 15-21)
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a>Week 4 (Jan 22-28) ← NEW
</span></code></pre></div>
<p><em>[Screenshot: Visual showing second run processing only new Week 4]</em></p>
<hr/>
<h2 id="creating-an-incremental-model">Creating an Incremental Model<a class="headerlink" href="#creating-an-incremental-model" title="Link to this section">¶</a></h2>
<p>Let's create a weekly sales aggregation model for Orders360.</p>
<h3 id="step-1-create-the-model-file">Step 1: Create the Model File<a class="headerlink" href="#step-1-create-the-model-file" title="Link to this section">¶</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a>touch<span class="w"> </span>models/sales/weekly_sales.sql
</span></code></pre></div>
<p><em>[Screenshot: File explorer showing new weekly_sales.sql file]</em></p>
<h3 id="step-2-define-the-model">Step 2: Define the Model<a class="headerlink" href="#step-2-define-the-model" title="Link to this section">¶</a></h3>
<p>Edit <code>models/sales/weekly_sales.sql</code>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">weekly_sales</span><span class="p">,</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">  </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">    </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span><span class="w">  </span><span class="c1">-- ⏰ This column contains the date</span>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">    </span><span class="n">batch_size</span><span class="w"> </span><span class="mi">1</span><span class="w">             </span><span class="c1">-- Process 1 week at a time</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">  </span><span class="p">),</span>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">  </span><span class="k">start</span><span class="w"> </span><span class="s1">'2025-01-01'</span><span class="p">,</span><span class="w">       </span><span class="c1">-- Start processing from this date</span>
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">  </span><span class="n">cron</span><span class="w"> </span><span class="s1">'@weekly'</span><span class="p">,</span><span class="w">            </span><span class="c1">-- Run weekly</span>
</span><span id="__span-8-9"><a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">  </span><span class="n">grain</span><span class="w"> </span><span class="p">[</span><span class="n">order_date</span><span class="p">],</span><span class="w">        </span><span class="c1">-- One row per week</span>
</span><span id="__span-8-10"><a href="#__codelineno-8-10" id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">  </span><span class="n">description</span><span class="w"> </span><span class="s1">'Weekly aggregated sales metrics'</span>
</span><span id="__span-8-11"><a href="#__codelineno-8-11" id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="p">);</span>
</span><span id="__span-8-12"><a href="#__codelineno-8-12" id="__codelineno-8-12" name="__codelineno-8-12"></a>
</span><span id="__span-8-13"><a href="#__codelineno-8-13" id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="k">SELECT</span>
</span><span id="__span-8-14"><a href="#__codelineno-8-14" id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">  </span><span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span><span class="w"> </span><span class="n">order_date</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-8-15"><a href="#__codelineno-8-15" id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="w">  </span><span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">order_id</span><span class="p">)::</span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_orders</span><span class="p">,</span>
</span><span id="__span-8-16"><a href="#__codelineno-8-16" id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">  </span><span class="k">SUM</span><span class="p">(</span><span class="n">total_amount</span><span class="p">)::</span><span class="nb">FLOAT</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_revenue</span><span class="p">,</span>
</span><span id="__span-8-17"><a href="#__codelineno-8-17" id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="w">  </span><span class="k">AVG</span><span class="p">(</span><span class="n">total_amount</span><span class="p">)::</span><span class="nb">FLOAT</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">avg_order_value</span>
</span><span id="__span-8-18"><a href="#__codelineno-8-18" id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="k">FROM</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">daily_sales</span>
</span><span id="__span-8-19"><a href="#__codelineno-8-19" id="__codelineno-8-19" name="__codelineno-8-19"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">order_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="o">@</span><span class="n">start_ds</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="o">@</span><span class="n">end_ds</span><span class="w">  </span><span class="c1">-- Filter by time range</span>
</span><span id="__span-8-20"><a href="#__codelineno-8-20" id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span><span class="w"> </span><span class="n">order_date</span><span class="p">)</span>
</span><span id="__span-8-21"><a href="#__codelineno-8-21" id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">order_date</span>
</span></code></pre></div>
<p><em>[Screenshot: Code editor showing complete weekly_sales.sql model]</em></p>
<h3 id="key-components-explained">Key Components Explained<a class="headerlink" href="#key-components-explained" title="Link to this section">¶</a></h3>
<h4 id="1-time-column-declaration">1. Time Column Declaration<a class="headerlink" href="#1-time-column-declaration" title="Link to this section">¶</a></h4>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span><span class="w">  </span><span class="c1">-- Tell Vulcan which column has dates</span>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="p">)</span>
</span></code></pre></div>
<p><strong>What it does:</strong> Tells Vulcan which column contains the timestamp/date for each row. This is how Vulcan knows how to filter and group your data by time.</p>
<p><em>[Screenshot: Code highlighting time_column declaration]</em></p>
<h4 id="2-where-clause-with-macros">2. WHERE Clause with Macros<a class="headerlink" href="#2-where-clause-with-macros" title="Link to this section">¶</a></h4>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">order_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="o">@</span><span class="n">start_ds</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="o">@</span><span class="n">end_ds</span>
</span></code></pre></div>
<p><strong>What it does:</strong> Filters data to only the time range being processed. Without it, you'd process all your data every time.</p>
<ul>
<li>
<p><code>@start_ds</code> = Start date of the interval (e.g., '2025-01-15')</p>
</li>
<li>
<p><code>@end_ds</code> = End date of the interval (e.g., '2025-01-21')</p>
</li>
</ul>
<p>Vulcan automatically replaces these with the correct dates! You don't have to figure out what dates to process, Vulcan does that for you.</p>
<p><em>[Screenshot: Code highlighting WHERE clause with macros, showing how they're replaced]</em></p>
<h4 id="3-start-date">3. Start Date<a class="headerlink" href="#3-start-date" title="Link to this section">¶</a></h4>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">start</span><span class="w"> </span><span class="s1">'2025-01-01'</span>
</span></code></pre></div>
<p><strong>What it does:</strong> Tells Vulcan when your data begins. Vulcan will backfill from this date when you first create the model, processing all historical data up to today.</p>
<p><em>[Screenshot: Code highlighting start date]</em></p>
<h3 id="step-3-apply-the-model">Step 3: Apply the Model<a class="headerlink" href="#step-3-apply-the-model" title="Link to this section">¶</a></h3>
<p>Run <code>vulcan plan</code> to apply your new model:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>dev
</span></code></pre></div>
<p><strong>Expected Output:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a>======================================================================
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a>Successfully Ran 2 tests against postgres
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a>----------------------------------------------------------------------
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a>Differences from the `prod` environment:
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a>Models:
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a>└── Added:
</span><span id="__span-13-9"><a href="#__codelineno-13-9" id="__codelineno-13-9" name="__codelineno-13-9"></a>    └── sales.weekly_sales
</span><span id="__span-13-10"><a href="#__codelineno-13-10" id="__codelineno-13-10" name="__codelineno-13-10"></a>
</span><span id="__span-13-11"><a href="#__codelineno-13-11" id="__codelineno-13-11" name="__codelineno-13-11"></a>Models needing backfill (missing dates):
</span><span id="__span-13-12"><a href="#__codelineno-13-12" id="__codelineno-13-12" name="__codelineno-13-12"></a>└── sales.weekly_sales: 2025-01-01 - 2025-01-15
</span><span id="__span-13-13"><a href="#__codelineno-13-13" id="__codelineno-13-13" name="__codelineno-13-13"></a>
</span><span id="__span-13-14"><a href="#__codelineno-13-14" id="__codelineno-13-14" name="__codelineno-13-14"></a>Apply - Backfill Tables [y/n]: y
</span></code></pre></div><p></p>
<p><em>[Screenshot: Plan output showing weekly_sales model to be added]</em></p>
<p>Vulcan will process each week incrementally:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a>[1/3] sales.weekly_sales  [insert 2025-01-01 - 2025-01-07]  1.2s
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a>[2/3] sales.weekly_sales  [insert 2025-01-08 - 2025-01-14]  1.1s
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a>[3/3] sales.weekly_sales  [insert 2025-01-15 - 2025-01-21]  1.3s
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a>Executing model batches ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 100.0% • 3/3 • 0:00:03
</span><span id="__span-14-6"><a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a>
</span><span id="__span-14-7"><a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a>✔ Model batches executed
</span><span id="__span-14-8"><a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a>✔ Plan applied successfully
</span></code></pre></div>
<p><em>[Screenshot: Backfill progress showing each week being processed]</em></p>
<hr/>
<h2 id="real-example-daily-sales-from-orders360">Real Example: Daily Sales from Orders360<a class="headerlink" href="#real-example-daily-sales-from-orders360" title="Link to this section">¶</a></h2>
<p>Here's the actual <code>daily_sales</code> model from Orders360 (currently FULL, but could be incremental):</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">daily_sales</span><span class="p">,</span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">  </span><span class="n">kind</span><span class="w"> </span><span class="k">FULL</span><span class="p">,</span><span class="w">  </span><span class="c1">-- Could be INCREMENTAL_BY_TIME_RANGE</span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">  </span><span class="n">cron</span><span class="w"> </span><span class="s1">'@daily'</span><span class="p">,</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">  </span><span class="n">grain</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">  </span><span class="n">description</span><span class="w"> </span><span class="s1">'Daily sales summary with order counts and revenue'</span><span class="p">,</span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">  </span><span class="n">column_descriptions</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">    </span><span class="n">order_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Date of the sales'</span><span class="p">,</span>
</span><span id="__span-15-9"><a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">    </span><span class="n">total_orders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Total number of orders for the day'</span><span class="p">,</span>
</span><span id="__span-15-10"><a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">    </span><span class="n">total_revenue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Total revenue for the day'</span><span class="p">,</span>
</span><span id="__span-15-11"><a href="#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="w">    </span><span class="n">last_order_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Last order ID processed for the day'</span>
</span><span id="__span-15-12"><a href="#__codelineno-15-12" id="__codelineno-15-12" name="__codelineno-15-12"></a><span class="w">  </span><span class="p">),</span>
</span><span id="__span-15-13"><a href="#__codelineno-15-13" id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="w">  </span><span class="n">assertions</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-15-14"><a href="#__codelineno-15-14" id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="w">    </span><span class="n">unique_values</span><span class="p">(</span><span class="n">columns</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">order_date</span><span class="p">)),</span>
</span><span id="__span-15-15"><a href="#__codelineno-15-15" id="__codelineno-15-15" name="__codelineno-15-15"></a><span class="w">    </span><span class="n">not_null</span><span class="p">(</span><span class="n">columns</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">order_date</span><span class="p">,</span><span class="w"> </span><span class="n">total_orders</span><span class="p">,</span><span class="w"> </span><span class="n">total_revenue</span><span class="p">)),</span>
</span><span id="__span-15-16"><a href="#__codelineno-15-16" id="__codelineno-15-16" name="__codelineno-15-16"></a><span class="w">    </span><span class="n">positive_values</span><span class="p">(</span><span class="k">column</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="n">total_orders</span><span class="p">),</span>
</span><span id="__span-15-17"><a href="#__codelineno-15-17" id="__codelineno-15-17" name="__codelineno-15-17"></a><span class="w">    </span><span class="n">positive_values</span><span class="p">(</span><span class="k">column</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="n">total_revenue</span><span class="p">)</span>
</span><span id="__span-15-18"><a href="#__codelineno-15-18" id="__codelineno-15-18" name="__codelineno-15-18"></a><span class="w">  </span><span class="p">)</span>
</span><span id="__span-15-19"><a href="#__codelineno-15-19" id="__codelineno-15-19" name="__codelineno-15-19"></a><span class="p">);</span>
</span><span id="__span-15-20"><a href="#__codelineno-15-20" id="__codelineno-15-20" name="__codelineno-15-20"></a>
</span><span id="__span-15-21"><a href="#__codelineno-15-21" id="__codelineno-15-21" name="__codelineno-15-21"></a><span class="k">SELECT</span>
</span><span id="__span-15-22"><a href="#__codelineno-15-22" id="__codelineno-15-22" name="__codelineno-15-22"></a><span class="w">  </span><span class="k">CAST</span><span class="p">(</span><span class="n">order_date</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">)::</span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-15-23"><a href="#__codelineno-15-23" id="__codelineno-15-23" name="__codelineno-15-23"></a><span class="w">  </span><span class="k">COUNT</span><span class="p">(</span><span class="n">order_id</span><span class="p">)::</span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_orders</span><span class="p">,</span>
</span><span id="__span-15-24"><a href="#__codelineno-15-24" id="__codelineno-15-24" name="__codelineno-15-24"></a><span class="w">  </span><span class="k">SUM</span><span class="p">(</span><span class="n">total_amount</span><span class="p">)::</span><span class="nb">FLOAT</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_revenue</span><span class="p">,</span>
</span><span id="__span-15-25"><a href="#__codelineno-15-25" id="__codelineno-15-25" name="__codelineno-15-25"></a><span class="w">  </span><span class="k">MAX</span><span class="p">(</span><span class="n">order_id</span><span class="p">)::</span><span class="nb">VARCHAR</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">last_order_id</span>
</span><span id="__span-15-26"><a href="#__codelineno-15-26" id="__codelineno-15-26" name="__codelineno-15-26"></a><span class="k">FROM</span><span class="w"> </span><span class="n">raw</span><span class="p">.</span><span class="n">raw_orders</span>
</span><span id="__span-15-27"><a href="#__codelineno-15-27" id="__codelineno-15-27" name="__codelineno-15-27"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">order_date</span>
</span><span id="__span-15-28"><a href="#__codelineno-15-28" id="__codelineno-15-28" name="__codelineno-15-28"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">order_date</span>
</span></code></pre></div>
<p><em>[Screenshot: daily_sales.sql file showing complete model]</em></p>
<p><strong>To make this incremental</strong>, you would:</p>
<ol>
<li>Change <code>kind FULL</code> to <code>kind INCREMENTAL_BY_TIME_RANGE</code></li>
<li>Add <code>time_column order_date</code></li>
<li>Add <code>WHERE order_date BETWEEN @start_ds AND @end_ds</code></li>
</ol>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">daily_sales</span><span class="p">,</span>
</span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-16-4"><a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span>
</span><span id="__span-16-5"><a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">  </span><span class="p">),</span>
</span><span id="__span-16-6"><a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">  </span><span class="k">start</span><span class="w"> </span><span class="s1">'2025-01-01'</span><span class="p">,</span>
</span><span id="__span-16-7"><a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">  </span><span class="n">cron</span><span class="w"> </span><span class="s1">'@daily'</span><span class="p">,</span>
</span><span id="__span-16-8"><a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">  </span><span class="c1">-- ... rest stays the same</span>
</span><span id="__span-16-9"><a href="#__codelineno-16-9" id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="p">);</span>
</span><span id="__span-16-10"><a href="#__codelineno-16-10" id="__codelineno-16-10" name="__codelineno-16-10"></a>
</span><span id="__span-16-11"><a href="#__codelineno-16-11" id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="k">SELECT</span>
</span><span id="__span-16-12"><a href="#__codelineno-16-12" id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">  </span><span class="k">CAST</span><span class="p">(</span><span class="n">order_date</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">)::</span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-16-13"><a href="#__codelineno-16-13" id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">  </span><span class="k">COUNT</span><span class="p">(</span><span class="n">order_id</span><span class="p">)::</span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_orders</span><span class="p">,</span>
</span><span id="__span-16-14"><a href="#__codelineno-16-14" id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">  </span><span class="k">SUM</span><span class="p">(</span><span class="n">total_amount</span><span class="p">)::</span><span class="nb">FLOAT</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_revenue</span><span class="p">,</span>
</span><span id="__span-16-15"><a href="#__codelineno-16-15" id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">  </span><span class="k">MAX</span><span class="p">(</span><span class="n">order_id</span><span class="p">)::</span><span class="nb">VARCHAR</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">last_order_id</span>
</span><span id="__span-16-16"><a href="#__codelineno-16-16" id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="k">FROM</span><span class="w"> </span><span class="n">raw</span><span class="p">.</span><span class="n">raw_orders</span>
</span><span id="__span-16-17"><a href="#__codelineno-16-17" id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">order_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="o">@</span><span class="n">start_ds</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="o">@</span><span class="n">end_ds</span><span class="w">  </span><span class="c1">-- ADD THIS</span>
</span><span id="__span-16-18"><a href="#__codelineno-16-18" id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">order_date</span>
</span><span id="__span-16-19"><a href="#__codelineno-16-19" id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">order_date</span>
</span></code></pre></div>
<p><em>[Screenshot: Comparison showing FULL vs INCREMENTAL changes]</em></p>
<hr/>
<h2 id="understanding-the-where-clause">Understanding the WHERE Clause<a class="headerlink" href="#understanding-the-where-clause" title="Link to this section">¶</a></h2>
<p>You might wonder: "Why do I need a WHERE clause if Vulcan adds one automatically?" They serve different purposes.</p>
<h3 id="two-where-clauses-two-purposes">Two WHERE Clauses, Two Purposes<a class="headerlink" href="#two-where-clauses-two-purposes" title="Link to this section">¶</a></h3>
<p>Vulcan actually uses <strong>two</strong> WHERE clauses:</p>
<h4 id="1-your-models-where-clause">1. Your Model's WHERE Clause<a class="headerlink" href="#1-your-models-where-clause" title="Link to this section">¶</a></h4>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">order_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="o">@</span><span class="n">start_ds</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="o">@</span><span class="n">end_ds</span>
</span></code></pre></div>
<p><strong>Purpose:</strong> Filters data <strong>read into</strong> the model</p>
<ul>
<li>
<p>Only reads necessary data from upstream tables - this is a performance optimization</p>
</li>
<li>
<p>Saves processing time and resources - why read data you're not going to use?</p>
</li>
<li>
<p>You control this in your SQL - you write this WHERE clause</p>
</li>
</ul>
<p>This is your optimization. Without it, you'd read all the data from upstream tables, even though you only need a small date range.</p>
<p><em>[Screenshot: Visual showing model WHERE clause filtering input data]</em></p>
<h4 id="2-vulcans-automatic-where-clause">2. Vulcan's Automatic WHERE Clause<a class="headerlink" href="#2-vulcans-automatic-where-clause" title="Link to this section">¶</a></h4>
<p>Vulcan automatically adds another filter on the output:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="c1">-- Vulcan adds this automatically:</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">order_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="o">@</span><span class="n">start_ds</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="o">@</span><span class="n">end_ds</span>
</span></code></pre></div>
<p><strong>Purpose:</strong> Filters data <strong>output by</strong> the model</p>
<ul>
<li>
<p>Prevents data leakage (ensures no rows outside the time range) - this is a safety check</p>
</li>
<li>
<p>Safety mechanism - even if your SQL has a bug, Vulcan makes sure you don't output wrong dates</p>
</li>
<li>
<p>Vulcan controls this automatically - you don't write this one, Vulcan adds it</p>
</li>
</ul>
<p>This is Vulcan's safety net. It makes sure that even if your WHERE clause has a bug, you can't accidentally output data for the wrong time period.</p>
<p><em>[Screenshot: Visual showing Vulcan's automatic WHERE clause filtering output]</em></p>
<h3 id="why-both-are-needed">Why Both Are Needed<a class="headerlink" href="#why-both-are-needed" title="Link to this section">¶</a></h3>
<p>Here's why you need both:</p>
<ul>
<li>
<p><strong>Your WHERE clause:</strong> Optimizes performance by reading less data - makes your queries faster</p>
</li>
<li>
<p><strong>Vulcan's WHERE clause:</strong> Ensures correctness by preventing data leakage - makes sure your data is right</p>
</li>
</ul>
<p><strong>Always include the WHERE clause in your model SQL!</strong> It's not optional, Vulcan needs it to know what time range to process, and it makes your queries way more efficient.</p>
<p><em>[Screenshot: Side-by-side comparison showing both WHERE clauses and their purposes]</em></p>
<hr/>
<h2 id="running-incremental-models">Running Incremental Models<a class="headerlink" href="#running-incremental-models" title="Link to this section">¶</a></h2>
<p>Vulcan has two commands for processing models:</p>
<h3 id="vulcan-plan-for-model-changes"><code>vulcan plan</code> - For Model Changes<a class="headerlink" href="#vulcan-plan-for-model-changes" title="Link to this section">¶</a></h3>
<p>Use when you've <strong>changed a model</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>dev
</span></code></pre></div>
<p><strong>What it does:</strong></p>
<ul>
<li>
<p>Detects model changes</p>
</li>
<li>
<p>Shows what will be affected</p>
</li>
<li>
<p>Backfills missing intervals</p>
</li>
<li>
<p>Applies changes to the environment</p>
</li>
</ul>
<p><em>[Screenshot: Plan command output showing model changes]</em></p>
<h3 id="vulcan-run-for-scheduled-execution"><code>vulcan run</code> - For Scheduled Execution<a class="headerlink" href="#vulcan-run-for-scheduled-execution" title="Link to this section">¶</a></h3>
<p>Use when <strong>no models have changed</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a>vulcan<span class="w"> </span>run
</span></code></pre></div>
<p><strong>What it does:</strong></p>
<ul>
<li>
<p>Checks each model's <code>cron</code> schedule</p>
</li>
<li>
<p>Processes only models that are due</p>
</li>
<li>
<p>Processes only missing intervals</p>
</li>
<li>
<p>Fast and efficient</p>
</li>
</ul>
<p><em>[Screenshot: Run command output showing scheduled execution]</em></p>
<h3 id="how-cron-schedules-work">How Cron Schedules Work<a class="headerlink" href="#how-cron-schedules-work" title="Link to this section">¶</a></h3>
<p>Each model has a <code>cron</code> parameter that determines how often it should run:</p>
<pre class="mermaid"><code>flowchart LR
    subgraph "Cron Schedules"
        DAILY[@daily&lt;br/&gt;Every 24 hours]
        WEEKLY[@weekly&lt;br/&gt;Every 7 days]
        HOURLY[@hourly&lt;br/&gt;Every 1 hour]
    end

    subgraph "Example Models"
        M1[sales.daily_sales&lt;br/&gt;cron: @daily]
        M2[sales.weekly_sales&lt;br/&gt;cron: @weekly]
    end

    DAILY --&gt; M1
    WEEKLY --&gt; M2

    style DAILY fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style WEEKLY fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style HOURLY fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style M1 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style M2 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000</code></pre>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="n">cron</span><span class="w"> </span><span class="s1">'@daily'</span><span class="w">   </span><span class="c1">-- Run once per day</span>
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="n">cron</span><span class="w"> </span><span class="s1">'@weekly'</span><span class="w">  </span><span class="c1">-- Run once per week</span>
</span><span id="__span-21-3"><a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="n">cron</span><span class="w"> </span><span class="s1">'@hourly'</span><span class="w">  </span><span class="c1">-- Run once per hour</span>
</span></code></pre></div>
<p><strong>Example from Orders360:</strong></p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="c1">-- Daily model</span>
</span><span id="__span-22-2"><a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-22-3"><a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">daily_sales</span><span class="p">,</span>
</span><span id="__span-22-4"><a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">  </span><span class="n">cron</span><span class="w"> </span><span class="s1">'@daily'</span><span class="w">  </span><span class="c1">-- Runs every day</span>
</span><span id="__span-22-5"><a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="p">);</span>
</span><span id="__span-22-6"><a href="#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a>
</span><span id="__span-22-7"><a href="#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="c1">-- Weekly model</span>
</span><span id="__span-22-8"><a href="#__codelineno-22-8" id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-22-9"><a href="#__codelineno-22-9" id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">weekly_sales</span><span class="p">,</span>
</span><span id="__span-22-10"><a href="#__codelineno-22-10" id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">  </span><span class="n">cron</span><span class="w"> </span><span class="s1">'@weekly'</span><span class="w">  </span><span class="c1">-- Runs once per week</span>
</span><span id="__span-22-11"><a href="#__codelineno-22-11" id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="p">);</span>
</span></code></pre></div>
<p><em>[Screenshot: Visual showing cron schedules for daily vs weekly models]</em></p>
<p>When you run <code>vulcan run</code>:</p>
<pre class="mermaid"><code>flowchart TB
    subgraph "vulcan run Execution"
        RUN[vulcan run&lt;br/&gt;at 2pm on Jan 15]

        subgraph "Model Evaluation"
            CHECK1[Check daily_sales&lt;br/&gt;cron: @daily&lt;br/&gt;Last run: 24h ago]
            CHECK2[Check weekly_sales&lt;br/&gt;cron: @weekly&lt;br/&gt;Last run: 2 days ago]
        end

        subgraph "Decision"
            DUE1[Due!&lt;br/&gt;Process daily_sales]
            SKIP[Not due&lt;br/&gt;Skip weekly_sales]
        end

        EXEC1[Execute daily_sales&lt;br/&gt;Process missing intervals]
    end

    RUN --&gt; CHECK1
    RUN --&gt; CHECK2

    CHECK1 --&gt; DUE1
    CHECK2 --&gt; SKIP

    DUE1 --&gt; EXEC1

    style RUN fill:#fff3e0,stroke:#f57c00,stroke-width:3px,color:#000
    style CHECK1 fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style CHECK2 fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style DUE1 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style SKIP fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,color:#000
    style EXEC1 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000</code></pre>
<ol>
<li>Vulcan checks each model's <code>cron</code></li>
<li>Determines if enough time has passed since last run</li>
<li>Processes only models that are due</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a>vulcan run at 2pm on Jan 15:
</span><span id="__span-23-2"><a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a>
</span><span id="__span-23-3"><a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a>daily_sales (@daily):   Last run 24h ago → Due, process!
</span><span id="__span-23-4"><a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a>weekly_sales (@weekly): Last run 2 days ago → Not due, skip
</span></code></pre></div>
<p><em>[Screenshot: Visual showing cron evaluation logic]</em></p>
<hr/>
<h2 id="batch-processing">Batch Processing<a class="headerlink" href="#batch-processing" title="Link to this section">¶</a></h2>
<p>For large datasets, you can process intervals in batches using <code>batch_size</code>:</p>
<pre class="mermaid"><code>flowchart TB
    subgraph "Without batch_size Default"
        ALL[12 Weeks Missing]
        SINGLE["Single Job&lt;br/&gt;Process all 12 weeks"]
        RESULT1["All done in 1 job&lt;br/&gt;30 minutes"]
    end

    subgraph "With batch_size = 4"
        ALL2[12 Weeks Missing]
        BATCH1["Batch 1&lt;br/&gt;Weeks 1-4"]
        BATCH2["Batch 2&lt;br/&gt;Weeks 5-8"]
        BATCH3["Batch 3&lt;br/&gt;Weeks 9-12"]
        RESULT2["All done in 3 jobs&lt;br/&gt;10 min each"]
    end

    ALL --&gt; SINGLE
    SINGLE --&gt; RESULT1

    ALL2 --&gt; BATCH1
    ALL2 --&gt; BATCH2
    ALL2 --&gt; BATCH3
    BATCH1 --&gt; RESULT2
    BATCH2 --&gt; RESULT2
    BATCH3 --&gt; RESULT2

    style ALL fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    style SINGLE fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
    style RESULT1 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style ALL2 fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    style BATCH1 fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style BATCH2 fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style BATCH3 fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style RESULT2 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000</code></pre>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-24-2"><a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">weekly_sales</span><span class="p">,</span>
</span><span id="__span-24-3"><a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-24-4"><a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="w">    </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-24-5"><a href="#__codelineno-24-5" id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="w">    </span><span class="n">batch_size</span><span class="w"> </span><span class="mi">4</span><span class="w">  </span><span class="c1">-- Process 4 weeks at a time</span>
</span><span id="__span-24-6"><a href="#__codelineno-24-6" id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="w">  </span><span class="p">)</span>
</span><span id="__span-24-7"><a href="#__codelineno-24-7" id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="p">);</span>
</span></code></pre></div>
<p><strong>Without batch_size (default):</strong></p>
<ul>
<li>
<p>Processes all missing intervals in one job</p>
</li>
<li>
<p>Example: 12 weeks = 1 job</p>
</li>
</ul>
<p><strong>With batch_size:</strong></p>
<ul>
<li>
<p>Divides intervals into batches</p>
</li>
<li>
<p>Example: 12 weeks ÷ 4 = 3 jobs</p>
</li>
</ul>
<p><em>[Screenshot: Visual comparison showing batch processing vs single job]</em></p>
<p><strong>When to use batches:</strong></p>
<ul>
<li>
<p>Large datasets that might timeout</p>
</li>
<li>
<p>Need better progress tracking</p>
</li>
<li>
<p>Want to parallelize processing</p>
</li>
</ul>
<p><strong>When not to use batches:</strong></p>
<ul>
<li>
<p>Small datasets (&lt; 1GB)</p>
</li>
<li>
<p>Fast queries (&lt; 1 minute)</p>
</li>
<li>
<p>Simple transformations</p>
</li>
</ul>
<hr/>
<h2 id="forward-only-models">Forward-Only Models<a class="headerlink" href="#forward-only-models" title="Link to this section">¶</a></h2>
<p>Sometimes you have models so large that rebuilding them is impossible. Forward-only models solve this. Use them for massive tables where a full backfill would take days or cost too much.</p>
<h3 id="what-are-forward-only-models">What Are Forward-Only Models?<a class="headerlink" href="#what-are-forward-only-models" title="Link to this section">¶</a></h3>
<p>Forward-only models never rebuild historical data. Changes are only applied going forward in time. Once historical data is processed, you can't go back and change it. You can only change what happens going forward.</p>
<pre class="mermaid"><code>flowchart TB
    subgraph "Regular Model Change"
        REG_CHANGE["Breaking Change Detected"]
        REG_REBUILD["Rebuild Entire Table&lt;br/&gt;All dates: Jan 1 - Dec 31"]
        REG_RESULT["All data updated"]
    end

    subgraph "Forward-Only Model Change"
        FWD_CHANGE["Breaking Change Detected&lt;br/&gt;forward_only: true"]
        FWD_CHECK["Check Existing Data&lt;br/&gt;Jan 1 - Dec 15: Keep as-is"]
        FWD_APPLY["Apply Change Forward&lt;br/&gt;Dec 16 - Dec 31: New data"]
        FWD_RESULT["Historical preserved&lt;br/&gt;Future updated"]
    end

    REG_CHANGE --&gt; REG_REBUILD
    REG_REBUILD --&gt; REG_RESULT

    FWD_CHANGE --&gt; FWD_CHECK
    FWD_CHECK --&gt; FWD_APPLY
    FWD_APPLY --&gt; FWD_RESULT

    style REG_CHANGE fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
    style REG_REBUILD fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    style REG_RESULT fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style FWD_CHANGE fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    style FWD_CHECK fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,color:#000
    style FWD_APPLY fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style FWD_RESULT fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000</code></pre>
<p><strong>Regular Model Change:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a>Breaking change → Rebuild entire table (all dates)
</span></code></pre></div><p></p>
<p><strong>Forward-Only Model Change:</strong>
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-26-1"><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a>Breaking change → Only apply to new dates going forward
</span></code></pre></div><p></p>
<p><em>[Screenshot: Visual comparison showing regular rebuild vs forward-only]</em></p>
<h3 id="when-to-use-forward-only">When to Use Forward-Only<a class="headerlink" href="#when-to-use-forward-only" title="Link to this section">¶</a></h3>
<p><strong>Use forward-only when:</strong></p>
<ul>
<li>
<p>Tables are too large to rebuild - if a full backfill would take forever or cost too much</p>
</li>
<li>
<p>Historical data can't be reprocessed - maybe the source data is gone or too expensive to reprocess</p>
</li>
<li>
<p>You only care about future data - if historical data is "good enough" and you just need new data to be correct</p>
</li>
</ul>
<p><strong>Don't use forward-only when:</strong></p>
<ul>
<li>
<p>You need to fix historical data - forward-only won't help you fix the past</p>
</li>
<li>
<p>Schema changes affect past data - if your change affects how historical data should look, you need a full rebuild</p>
</li>
<li>
<p>You want full data consistency - forward-only means historical and new data might have different schemas</p>
</li>
</ul>
<p>It's a trade-off: you get speed and cost savings, but you lose the ability to fix historical data. Make sure that's a trade-off you're okay with!</p>
<h3 id="making-a-model-forward-only">Making a Model Forward-Only<a class="headerlink" href="#making-a-model-forward-only" title="Link to this section">¶</a></h3>
<p>Add <code>forward_only true</code> to your model:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-27-1"><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-27-2"><a href="#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">weekly_sales</span><span class="p">,</span>
</span><span id="__span-27-3"><a href="#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-27-4"><a href="#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">    </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-27-5"><a href="#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">    </span><span class="n">forward_only</span><span class="w"> </span><span class="k">true</span><span class="w">  </span><span class="c1">-- All changes are forward-only</span>
</span><span id="__span-27-6"><a href="#__codelineno-27-6" id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="w">  </span><span class="p">)</span>
</span><span id="__span-27-7"><a href="#__codelineno-27-7" id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="p">);</span>
</span></code></pre></div>
<p><em>[Screenshot: Code showing forward_only configuration]</em></p>
<h3 id="forward-only-plans">Forward-Only Plans<a class="headerlink" href="#forward-only-plans" title="Link to this section">¶</a></h3>
<p>You can also make a specific plan forward-only:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-28-1"><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a>vulcan<span class="w"> </span>plan<span class="w"> </span>dev<span class="w"> </span>--forward-only
</span></code></pre></div>
<p>This treats <strong>all changes in the plan</strong> as forward-only, even if models aren't configured that way.</p>
<p><em>[Screenshot: Plan command with --forward-only flag]</em></p>
<hr/>
<h2 id="schema-changes-in-forward-only-models">Schema Changes in Forward-Only Models<a class="headerlink" href="#schema-changes-in-forward-only-models" title="Link to this section">¶</a></h2>
<p>When you change a forward-only model, Vulcan checks for schema changes that could cause problems.</p>
<h3 id="types-of-schema-changes">Types of Schema Changes<a class="headerlink" href="#types-of-schema-changes" title="Link to this section">¶</a></h3>
<h4 id="destructive-changes">Destructive Changes<a class="headerlink" href="#destructive-changes" title="Link to this section">¶</a></h4>
<p>Changes that <strong>remove or modify</strong> existing data:</p>
<pre class="mermaid"><code>flowchart LR
    subgraph "Destructive Changes"
        DROP["Dropping Column&lt;br/&gt;total_amount removed"]
        RENAME["Renaming Column&lt;br/&gt;order_id to id"]
        TYPE["Changing Type&lt;br/&gt;INT to STRING&lt;br/&gt;may cause loss"]
    end

    subgraph "Example"
        BEFORE1["Before:&lt;br/&gt;order_id, total_amount"]
        AFTER1["After:&lt;br/&gt;order_id only"]
    end

    DROP --&gt; BEFORE1
    BEFORE1 --&gt; AFTER1

    style DROP fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
    style RENAME fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
    style TYPE fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
    style BEFORE1 fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    style AFTER1 fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000</code></pre>
<ul>
<li>
<p>Dropping a column</p>
</li>
<li>
<p>Renaming a column</p>
</li>
<li>
<p>Changing data type (could cause data loss)</p>
</li>
</ul>
<p><strong>Example:</strong>
</p><div class="language-sql highlight"><pre><span></span><code><span id="__span-29-1"><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="c1">-- Before</span>
</span><span id="__span-29-2"><a href="#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">order_id</span><span class="p">,</span><span class="w"> </span><span class="n">total_amount</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">orders</span>
</span><span id="__span-29-3"><a href="#__codelineno-29-3" id="__codelineno-29-3" name="__codelineno-29-3"></a>
</span><span id="__span-29-4"><a href="#__codelineno-29-4" id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="c1">-- After (destructive - drops total_amount)</span>
</span><span id="__span-29-5"><a href="#__codelineno-29-5" id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">order_id</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">orders</span>
</span></code></pre></div><p></p>
<p><em>[Screenshot: Visual showing destructive change example]</em></p>
<h4 id="additive-changes">Additive Changes<a class="headerlink" href="#additive-changes" title="Link to this section">¶</a></h4>
<p>Changes that <strong>add</strong> new data without removing existing:</p>
<pre class="mermaid"><code>flowchart LR
    subgraph "Additive Changes"
        ADD["Adding Column&lt;br/&gt;customer_name added"]
        TYPE2["Compatible Type Change&lt;br/&gt;INT to STRING&lt;br/&gt;no data loss"]
    end

    subgraph "Example"
        BEFORE2["Before:&lt;br/&gt;order_id, total_amount"]
        AFTER2["After:&lt;br/&gt;order_id, total_amount,&lt;br/&gt;customer_name"]
    end

    ADD --&gt; BEFORE2
    BEFORE2 --&gt; AFTER2

    style ADD fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style TYPE2 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    style BEFORE2 fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    style AFTER2 fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000</code></pre>
<ul>
<li>
<p>Adding a new column</p>
</li>
<li>
<p>Changing data type (compatible, e.g., INT → STRING)</p>
</li>
</ul>
<p><strong>Example:</strong>
</p><div class="language-sql highlight"><pre><span></span><code><span id="__span-30-1"><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="c1">-- Before</span>
</span><span id="__span-30-2"><a href="#__codelineno-30-2" id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">order_id</span><span class="p">,</span><span class="w"> </span><span class="n">total_amount</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">orders</span>
</span><span id="__span-30-3"><a href="#__codelineno-30-3" id="__codelineno-30-3" name="__codelineno-30-3"></a>
</span><span id="__span-30-4"><a href="#__codelineno-30-4" id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="c1">-- After (additive - adds customer_name)</span>
</span><span id="__span-30-5"><a href="#__codelineno-30-5" id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">order_id</span><span class="p">,</span><span class="w"> </span><span class="n">total_amount</span><span class="p">,</span><span class="w"> </span><span class="n">customer_name</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">orders</span>
</span></code></pre></div><p></p>
<p><em>[Screenshot: Visual showing additive change example]</em></p>
<h3 id="controlling-schema-change-behavior">Controlling Schema Change Behavior<a class="headerlink" href="#controlling-schema-change-behavior" title="Link to this section">¶</a></h3>
<p>You can control how Vulcan handles schema changes:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-31-1"><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-31-2"><a href="#__codelineno-31-2" id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">weekly_sales</span><span class="p">,</span>
</span><span id="__span-31-3"><a href="#__codelineno-31-3" id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-31-4"><a href="#__codelineno-31-4" id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="w">    </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-31-5"><a href="#__codelineno-31-5" id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="w">        </span><span class="n">forward_only</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
</span><span id="__span-31-6"><a href="#__codelineno-31-6" id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="w">        </span><span class="n">on_destructive_change</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w">  </span><span class="c1">-- Block destructive changes</span>
</span><span id="__span-31-7"><a href="#__codelineno-31-7" id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="w">    </span><span class="n">on_additive_change</span><span class="w"> </span><span class="n">allow</span><span class="w">      </span><span class="c1">-- Allow new columns</span>
</span><span id="__span-31-8"><a href="#__codelineno-31-8" id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="w">  </span><span class="p">)</span>
</span><span id="__span-31-9"><a href="#__codelineno-31-9" id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="p">);</span>
</span></code></pre></div>
<p><strong>Options:</strong></p>
<ul>
<li>
<p><code>error</code> - Stop and raise an error (default for destructive)</p>
</li>
<li>
<p><code>warn</code> - Log a warning but continue</p>
</li>
<li>
<p><code>allow</code> - Silently proceed (default for additive)</p>
</li>
<li>
<p><code>ignore</code> - Skip the check entirely (dangerous!)</p>
</li>
</ul>
<p><em>[Screenshot: Code showing schema change configuration options]</em></p>
<h3 id="common-patterns">Common Patterns<a class="headerlink" href="#common-patterns" title="Link to this section">¶</a></h3>
<h4 id="strict-schema-control">Strict Schema Control<a class="headerlink" href="#strict-schema-control" title="Link to this section">¶</a></h4>
<p>Prevent any schema changes:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-32-1"><a href="#__codelineno-32-1" id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-32-2"><a href="#__codelineno-32-2" id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">production_model</span><span class="p">,</span>
</span><span id="__span-32-3"><a href="#__codelineno-32-3" id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-32-4"><a href="#__codelineno-32-4" id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">    </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-32-5"><a href="#__codelineno-32-5" id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="w">        </span><span class="n">forward_only</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
</span><span id="__span-32-6"><a href="#__codelineno-32-6" id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="w">    </span><span class="n">on_destructive_change</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w">  </span><span class="c1">-- Block destructive</span>
</span><span id="__span-32-7"><a href="#__codelineno-32-7" id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">    </span><span class="n">on_additive_change</span><span class="w"> </span><span class="n">error</span><span class="w">       </span><span class="c1">-- Block even new columns</span>
</span><span id="__span-32-8"><a href="#__codelineno-32-8" id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">  </span><span class="p">)</span>
</span><span id="__span-32-9"><a href="#__codelineno-32-9" id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="p">);</span>
</span></code></pre></div>
<p><em>[Screenshot: Strict schema control example]</em></p>
<h4 id="development-model">Development Model<a class="headerlink" href="#development-model" title="Link to this section">¶</a></h4>
<p>Allow all changes for rapid iteration:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-33-1"><a href="#__codelineno-33-1" id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-33-2"><a href="#__codelineno-33-2" id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">dev_model</span><span class="p">,</span>
</span><span id="__span-33-3"><a href="#__codelineno-33-3" id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-33-4"><a href="#__codelineno-33-4" id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">    </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-33-5"><a href="#__codelineno-33-5" id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="w">        </span><span class="n">forward_only</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
</span><span id="__span-33-6"><a href="#__codelineno-33-6" id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="w">        </span><span class="n">on_destructive_change</span><span class="w"> </span><span class="n">allow</span><span class="p">,</span><span class="w">  </span><span class="c1">-- Allow dropping columns</span>
</span><span id="__span-33-7"><a href="#__codelineno-33-7" id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="w">    </span><span class="n">on_additive_change</span><span class="w"> </span><span class="n">allow</span><span class="w">      </span><span class="c1">-- Allow new columns</span>
</span><span id="__span-33-8"><a href="#__codelineno-33-8" id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="w">  </span><span class="p">)</span>
</span><span id="__span-33-9"><a href="#__codelineno-33-9" id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="p">);</span>
</span></code></pre></div>
<p><em>[Screenshot: Development model example]</em></p>
<h4 id="production-safety">Production Safety<a class="headerlink" href="#production-safety" title="Link to this section">¶</a></h4>
<p>Allow safe changes, warn about risky ones:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-34-1"><a href="#__codelineno-34-1" id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="n">MODEL</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-34-2"><a href="#__codelineno-34-2" id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="n">sales</span><span class="p">.</span><span class="n">production_model</span><span class="p">,</span>
</span><span id="__span-34-3"><a href="#__codelineno-34-3" id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="w">    </span><span class="n">kind</span><span class="w"> </span><span class="n">INCREMENTAL_BY_TIME_RANGE</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-34-4"><a href="#__codelineno-34-4" id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="w">    </span><span class="n">time_column</span><span class="w"> </span><span class="n">order_date</span><span class="p">,</span>
</span><span id="__span-34-5"><a href="#__codelineno-34-5" id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="w">        </span><span class="n">forward_only</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
</span><span id="__span-34-6"><a href="#__codelineno-34-6" id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="w">    </span><span class="n">on_destructive_change</span><span class="w"> </span><span class="n">warn</span><span class="p">,</span><span class="w">   </span><span class="c1">-- Warn but allow</span>
</span><span id="__span-34-7"><a href="#__codelineno-34-7" id="__codelineno-34-7" name="__codelineno-34-7"></a><span class="w">    </span><span class="n">on_additive_change</span><span class="w"> </span><span class="n">allow</span><span class="w">      </span><span class="c1">-- Allow new columns</span>
</span><span id="__span-34-8"><a href="#__codelineno-34-8" id="__codelineno-34-8" name="__codelineno-34-8"></a><span class="w">  </span><span class="p">)</span>
</span><span id="__span-34-9"><a href="#__codelineno-34-9" id="__codelineno-34-9" name="__codelineno-34-9"></a><span class="p">);</span>
</span></code></pre></div>
<p><em>[Screenshot: Production safety example]</em></p>
<hr/>
<h2 id="important-notes">Important Notes<a class="headerlink" href="#important-notes" title="Link to this section">¶</a></h2>
<h3 id="time-column-must-be-utc">Time Column Must Be UTC<a class="headerlink" href="#time-column-must-be-utc" title="Link to this section">¶</a></h3>
<p>Always use UTC timezone for your <code>time_column</code>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-35-1"><a href="#__codelineno-35-1" id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="c1">-- Good: UTC timezone</span>
</span><span id="__span-35-2"><a href="#__codelineno-35-2" id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="n">time_column</span><span class="w"> </span><span class="n">order_date_utc</span>
</span><span id="__span-35-3"><a href="#__codelineno-35-3" id="__codelineno-35-3" name="__codelineno-35-3"></a>
</span><span id="__span-35-4"><a href="#__codelineno-35-4" id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="c1">-- Bad: Local timezone</span>
</span><span id="__span-35-5"><a href="#__codelineno-35-5" id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="n">time_column</span><span class="w"> </span><span class="n">order_date_local</span>
</span></code></pre></div>
<p><strong>Why?</strong> Ensures correct interval calculations and proper interaction with Vulcan's scheduler. If you use local timezones, you'll run into issues with daylight saving time changes, timezone differences, and interval calculations. UTC is consistent everywhere.</p>
<p><em>[Screenshot: Visual warning about UTC requirement]</em></p>
<h3 id="always-include-where-clause">Always Include WHERE Clause<a class="headerlink" href="#always-include-where-clause" title="Link to this section">¶</a></h3>
<p>Your model SQL <strong>must</strong> include a WHERE clause with <code>@start_ds</code> and <code>@end_ds</code>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-36-1"><a href="#__codelineno-36-1" id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="c1">-- Required - This tells Vulcan what time range to process</span>
</span><span id="__span-36-2"><a href="#__codelineno-36-2" id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">order_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="o">@</span><span class="n">start_ds</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="o">@</span><span class="n">end_ds</span>
</span><span id="__span-36-3"><a href="#__codelineno-36-3" id="__codelineno-36-3" name="__codelineno-36-3"></a>
</span><span id="__span-36-4"><a href="#__codelineno-36-4" id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="c1">-- Missing WHERE clause - Don't do this</span>
</span><span id="__span-36-5"><a href="#__codelineno-36-5" id="__codelineno-36-5" name="__codelineno-36-5"></a>
</span><span id="__span-36-6"><a href="#__codelineno-36-6" id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="c1">-- WHERE clause is required</span>
</span></code></pre></div>
<p>Without this WHERE clause, Vulcan won't know what time range to process, and your queries will be inefficient (or fail entirely). Always include it!</p>
<p><em>[Screenshot: Code showing required WHERE clause]</em></p>
<h3 id="set-a-start-date">Set a Start Date<a class="headerlink" href="#set-a-start-date" title="Link to this section">¶</a></h3>
<p>Always specify when your data begins:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-37-1"><a href="#__codelineno-37-1" id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="k">start</span><span class="w"> </span><span class="s1">'2025-01-01'</span><span class="w">  </span><span class="c1">-- Start processing from this date</span>
</span></code></pre></div>
<p>This tells Vulcan where to start backfilling. If your data goes back to 2020 but you only want to process from 2025, set the start date to 2025-01-01. Vulcan will backfill from this date when you first create the model.</p>
<p><em>[Screenshot: Code showing start date configuration]</em></p>
<h3 id="choose-appropriate-batch_size">Choose Appropriate batch_size<a class="headerlink" href="#choose-appropriate-batch_size" title="Link to this section">¶</a></h3>
<ul>
<li>
<p>Start with <code>batch_size 1</code> for small datasets - process one interval at a time</p>
</li>
<li>
<p>Increase for larger datasets that might timeout - if processing all intervals at once times out, batch them</p>
</li>
<li>
<p>Monitor performance to find the right balance. Too small and you have too many jobs. Too large and jobs timeout.</p>
</li>
</ul>
<p>The default is to process all missing intervals in one job. If that doesn't work for you, use <code>batch_size</code> to break it up.</p>
<p><em>[Screenshot: Visual guide for choosing batch_size]</em></p>
<hr/>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Link to this section">¶</a></h2>
<p><strong>Incremental by time models:</strong></p>
<ul>
<li>
<p>Only process new or missing time intervals</p>
</li>
<li>
<p>Faster and cheaper than full refreshes</p>
</li>
<li>
<p>Use for time-based data (orders, events, transactions)</p>
</li>
<li>
<p>Require a time column and WHERE clause</p>
</li>
<li>
<p>Use cron schedules to control execution frequency</p>
</li>
</ul>
<p><strong>Key concepts:</strong></p>
<ul>
<li>
<p><strong>Intervals:</strong> Time periods (days, weeks, hours) that Vulcan tracks</p>
</li>
<li>
<p><strong>Backfill:</strong> Processing historical intervals when first creating a model</p>
</li>
<li>
<p><strong>Cron:</strong> Schedule that determines how often a model runs</p>
</li>
<li>
<p><strong>Forward-only:</strong> Models that never rebuild historical data</p>
</li>
</ul>
<hr/>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Link to this section">¶</a></h2>
<ul>
<li>Learn about <a href="../../components/model/model_kinds/">Model Kinds</a> for all model types</li>
</ul>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Models" class="md-footer__link md-footer__link--prev" href="../models/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Models
              </div>
</div>
</a>
<a aria-label="Next: Data Quality" class="md-footer__link md-footer__link--next" href="../data_quality/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Data Quality
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2025 DataOS Vulcan Team<br/>
<small>Complete stack for building data products</small>
</div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/tmdc-io/vulcan-book" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-progress" data-md-component="progress" role="progressbar"></div>
<script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tracking", "navigation.indexes", "navigation.path", "navigation.top", "navigation.footer", "toc.follow", "search.highlight", "search.suggest", "search.share", "content.tabs.link", "content.code.copy", "content.code.annotate", "content.tooltips"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
<script src="../../assets/javascripts/mermaid-zoom.js"></script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>